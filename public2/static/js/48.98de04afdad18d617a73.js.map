{"version":3,"sources":["webpack:///src/views/projectManage/projectProgressManage/genset-progress.vue","webpack:///./src/views/projectManage/projectProgressManage/genset-progress.vue?9837","webpack:///./src/views/projectManage/projectProgressManage/genset-progress.vue"],"names":["genset_progress","name","components","GensetProgressRecordsDialog","props","data","loading","loading_1","ProjectId","GensetId","crewColumns","components_data","crewInfoColumns","this","crewDataSource","searchForm","type","type1","columns","gensetProgressColumns","dataSource","options","index","labelIndex","width","selectItem","RecordsDialogVisible","watch","configData","handler","newVal","oldVal","console","log","projectId","gensetId","deep","immediate","mounted","queryTableData","methods","getGensetDetail","_this","query","GeneratorSetId","$api","project","GetGensetProjectJoinGensetDetail","then","res","Code","$set","Data","_this2","params","ProgressType","GetGensetProjectProgressSetting","catch","reset","handleProjectProgressClick","row","closeDialog","key","val","refresh","handleBackClick","$router","push","path","active","projectProgressManage_genset_progress","render","_vm","_h","$createElement","_c","_self","staticClass","_v","directives","rawName","value","expression","attrs","border","_b","slot","label","align","scopedSlots","_u","fn","scope","staticStyle","text-align","disabled","RecordCount","on","click","$event","ProjectProgressId","ProgressId","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"uJAqGAA,GACAC,KAAA,iBACAC,YACAC,8BAAA,GAEAC,OAAA,cACAC,KANA,WAOA,OACAC,SAAA,EACAC,WAAA,EAGAC,UAAA,KACAC,SAAA,KAEAC,YAAAC,EAAA,EAAAC,gBAAAC,MACAC,kBAGAC,YACAC,KAAA,GACAC,MAAA,IAGAC,QAAAP,EAAA,EAAAQ,sBAAAN,MACAO,cACAC,SACAC,OAAA,EACAC,WAAA,KACAnB,OACAoB,MAAA,MAIAC,WAAA,KACAC,sBAAA,IAGAC,OACAC,YACAC,QAAA,SAAAC,EAAAC,GACAC,QAAAC,IAAA,aAAAH,GACAjB,KAAAL,UAAAsB,EAAAI,UACArB,KAAAJ,SAAAqB,EAAAK,UAEAC,MAAA,EACAC,WAAA,IAGAC,QAjDA,WAkDAN,QAAAC,IAAApB,KAAAL,UAAAK,KAAAJ,UACAI,KAAA0B,kBAGAC,SAEAC,gBAFA,WAEA,IAAAC,EAAA7B,KACA8B,GACAC,eAAA/B,KAAAJ,UAEAI,KAAAgC,KAAAC,QAAAC,oCAAAJ,GAAAK,KAAA,SAAAC,GACA,IAAAA,EAAAC,MAEAR,EAAAS,KAAAT,EAAA,kBAAAO,EAAAG,UAKAb,eAdA,WAcA,IAAAc,EAAAxC,KACAA,KAAAP,SAAA,EACA,IAAAgD,GACA9C,UAAAK,KAAAL,UACA+C,aAAA,EACAX,eAAA/B,KAAAJ,UAEAI,KAAAgC,KAAAC,QACAU,gCAAAF,GACAN,KAAA,SAAAC,GACA,IAAAA,EAAAC,MAEAG,EAAAF,KAAAE,EAAA,aAAAJ,EAAAG,MAEAC,EAAA/C,SAAA,IAEAmD,MAAA,WACAJ,EAAA/C,SAAA,KAGAoD,MAlCA,WAmCA7C,KAAAsC,KAAAtC,KAAA,cACAG,KAAA,GACAC,MAAA,MAIA0C,2BAzCA,SAyCAC,GACA/C,KAAAY,WAAAmC,EACA/C,KAAAa,sBAAA,GAGAmC,YA9CA,SA8CAC,EAAAC,GACAlD,KAAAiD,IAAA,EACAC,KAAAC,SACAnD,KAAA0B,kBAIA0B,gBArDA,WAsDApD,KAAAqD,QAAAC,MAAAC,KAAA,0BAAAzB,OAAA0B,OAAA,QC9MeC,GADEC,OAFjB,WAA0B,IAAAC,EAAA3D,KAAa4D,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BE,YAAA,2BAAqCF,EAAA,KAAUE,YAAA,kBAA4BL,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,aAA+CI,aAAa9E,KAAA,UAAA+E,QAAA,YAAAC,MAAAT,EAAA,UAAAU,WAAA,cAAgFC,OAAS9D,QAAAmD,EAAAnD,QAAAH,QAAAsD,EAAAtD,QAAAE,WAAAoD,EAAApD,WAAAgE,OAAA,MAAqFT,EAAA,kBAAAH,EAAAa,IAA+BF,OAAOG,KAAA,YAAAC,MAAA,KAAAC,MAAA,UAAiDF,KAAA,YAAAG,YAAAjB,EAAAkB,KAAuC5B,IAAA,UAAA6B,GAAA,SAAAC,GAAiC,OAAAjB,EAAA,OAAkBE,YAAA,gBAAAgB,aAAyCC,aAAA,WAAsBnB,EAAA,aAAkBQ,OAAOnE,KAAA,OAAA+E,SAAA,GAAAH,EAAAhC,IAAAoC,aAAoDC,IAAKC,MAAA,SAAAC,GAAyB,OAAA3B,EAAAb,2BAAAiC,EAAAhC,SAAmDY,EAAAM,GAAA,oDAA4D,kBAAAN,EAAAnD,SAAAmD,EAAAnD,QAAAjB,OAAA,QAAAoE,EAAAM,GAAA,KAAAN,EAAA,qBAAAG,EAAA,+BAAyIQ,OAAOiB,kBAAA5B,EAAA/C,WAAA4E,WAAA7F,UAAAgE,EAAAhE,UAAAC,SAAA+D,EAAA/D,UAAgGwF,IAAKpC,YAAA,SAAAE,GAA8B,OAAAS,EAAAX,YAAA,uBAAAE,OAAyDS,EAAA8B,MAAA,MAE9qCC,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE1G,EACAsE,GATF,EAVA,SAAAqC,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/48.98de04afdad18d617a73.js","sourcesContent":["<!--\r\n * @Autor: linxu\r\n * @Date: 2022-03-15 10:12:21\r\n * @LastEditors: linxu\r\n * @LastEditTime: 2022-09-20 10:56:22\r\n * @Description: 单机工程进度\r\n-->\r\n<template>\r\n  <div>\r\n    <!-- <BMainTopComponent\r\n      :isShowBackBtn=\"true\"\r\n      :isHandleBackClick=\"true\"\r\n      @handleBackClick=\"handleBackClick\"\r\n    /> -->\r\n    <div class=\"genset-progress-manage\">\r\n      <!-- <p class=\"content-title\">所选机组</p>\r\n      <TableList\r\n        class=\"crewTable\"\r\n        :options=\"options\"\r\n        :columns=\"crewColumns\"\r\n        :dataSource=\"crewDataSource\"\r\n        border\r\n        v-loading=\"loading\"\r\n      >\r\n      </TableList> -->\r\n      <p class=\"content-title\">工程进度</p>\r\n      <!-- 筛选 -->\r\n      <!-- <div class=\"search-box\">\r\n        <div class=\"search-item\">\r\n          <span>事件类型:</span>\r\n          <el-select\r\n            v-model=\"searchForm.type\"\r\n            :popper-append-to-body=\"false\"\r\n            placeholder=\"请选择事件类型\"\r\n          >\r\n            <el-option label=\"全部\" value=\"\"></el-option>\r\n            <el-option label=\"项目启动\" value=\"1\"></el-option>\r\n            <el-option label=\"项目完工\" value=\"2\"></el-option>\r\n          </el-select>\r\n        </div>\r\n        <div class=\"search-item\">\r\n          <span>事件状态:</span>\r\n          <el-select\r\n            v-model=\"searchForm.type1\"\r\n            :popper-append-to-body=\"false\"\r\n            placeholder=\"请选择事件状态\"\r\n          >\r\n            <el-option label=\"全部\" value=\"\"></el-option>\r\n            <el-option label=\"待完成\" value=\"1\"></el-option>\r\n            <el-option label=\"已完成\" value=\"2\"></el-option>\r\n          </el-select>\r\n        </div>\r\n        <div class=\"search-btn-box\">\r\n          <el-button type=\"text\" class=\"reset-btn\" @click=\"reset()\">清空筛选</el-button>\r\n          <el-button type=\"primary\" class=\"query-btn\" @click=\"queryTableData()\">查 询</el-button>\r\n        </div>\r\n      </div> -->\r\n\r\n      <!-- 表格 -->\r\n      <TableList\r\n        :options=\"options\"\r\n        :columns=\"columns\"\r\n        :dataSource=\"dataSource\"\r\n        border\r\n        v-loading=\"loading_1\"\r\n      >\r\n        <el-table-column\r\n          slot=\"operation\"\r\n          label=\"操作\"\r\n          align=\"center\"\r\n          v-bind=\"options && options.props\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <div class=\"operate-group\" style=\"text-align: right\">\r\n              <el-button\r\n                type=\"text\"\r\n                :disabled=\"scope.row.RecordCount == 0\"\r\n                @click=\"handleProjectProgressClick(scope.row)\"\r\n              >\r\n                工程进度管理\r\n              </el-button>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </TableList>\r\n\r\n      <!-- 工程进度记录表 -->\r\n      <GensetProgressRecordsDialog\r\n        v-if=\"RecordsDialogVisible\"\r\n        :ProjectProgressId=\"selectItem.ProgressId\"\r\n        :ProjectId=\"ProjectId\"\r\n        :GensetId=\"GensetId\"\r\n        @closeDialog=\"(val) => closeDialog('RecordsDialogVisible', val)\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport GensetProgressRecordsDialog from './components/GensetProgressRecordsDialog.vue'\r\nimport _data from './components/data'\r\n\r\nexport default {\r\n  name: 'GensetProgress',\r\n  components: {\r\n    GensetProgressRecordsDialog\r\n  },\r\n  props: ['configData'],\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      loading_1: false,\r\n      // ProjectId: parseInt(this.$route.query.ProjectId),\r\n      // GensetId: parseInt(this.$route.query.GensetId),\r\n      ProjectId: null,\r\n      GensetId: null,\r\n\r\n      crewColumns: _data.crewInfoColumns(this),\r\n      crewDataSource: [],\r\n      /****** 工程进度 ******/\r\n      // 筛选条件\r\n      searchForm: {\r\n        type: '',\r\n        type1: ''\r\n      },\r\n      // 表格\r\n      columns: _data.gensetProgressColumns(this),\r\n      dataSource: [],\r\n      options: {\r\n        index: true, //序号列\r\n        labelIndex: '序号',\r\n        props: {\r\n          width: 126 // 操作列宽度\r\n        }\r\n      },\r\n\r\n      selectItem: null, // 选中数据\r\n      RecordsDialogVisible: false\r\n    }\r\n  },\r\n  watch: {\r\n    configData: {\r\n      handler: function (newVal, oldVal) {\r\n        console.log('configData', newVal)\r\n        this.ProjectId = newVal.projectId\r\n        this.GensetId = newVal.gensetId\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n  },\r\n  mounted() {\r\n    console.log(this.ProjectId, this.GensetId)\r\n    this.queryTableData()\r\n    // this.getGensetDetail()\r\n  },\r\n  methods: {\r\n    // 查询机组详情\r\n    getGensetDetail() {\r\n      const query = {\r\n        GeneratorSetId: this.GensetId\r\n      }\r\n      this.$api.project.GetGensetProjectJoinGensetDetail({}, query).then((res) => {\r\n        if (res.Code === 1) {\r\n          // console.log(res)\r\n          this.$set(this, 'crewDataSource', [res.Data])\r\n        }\r\n      })\r\n    },\r\n    // 查询机组进度事件\r\n    queryTableData() {\r\n      this.loading = true\r\n      const params = {\r\n        ProjectId: this.ProjectId,\r\n        ProgressType: 1,\r\n        GeneratorSetId: this.GensetId\r\n      }\r\n      this.$api.project\r\n        .GetGensetProjectProgressSetting(params)\r\n        .then((res) => {\r\n          if (res.Code === 1) {\r\n            // console.log(res)\r\n            this.$set(this, 'dataSource', res.Data)\r\n          }\r\n          this.loading = false\r\n        })\r\n        .catch(() => {\r\n          this.loading = false\r\n        })\r\n    },\r\n    reset() {\r\n      this.$set(this, 'searchForm', {\r\n        type: '',\r\n        type1: ''\r\n      })\r\n    },\r\n    // 项目工程进度\r\n    handleProjectProgressClick(row) {\r\n      this.selectItem = row\r\n      this.RecordsDialogVisible = true\r\n    },\r\n    // 弹框组件关闭\r\n    closeDialog(key, val) {\r\n      this[key] = false\r\n      if (val && val.refresh) {\r\n        this.queryTableData()\r\n      }\r\n    },\r\n\r\n    handleBackClick() {\r\n      this.$router.push({ path: '/project/project-detail', query: { active: 2 } })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.genset-progress-manage {\r\n  display: initial !important;\r\n  .crewTable {\r\n    margin-bottom: 16px;\r\n  }\r\n  .search-box {\r\n    background-color: transparent;\r\n    padding: 0 16px;\r\n    height: 32px;\r\n    border: 0;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/projectManage/projectProgressManage/genset-progress.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"genset-progress-manage\"},[_c('p',{staticClass:\"content-title\"},[_vm._v(\"工程进度\")]),_vm._v(\" \"),_c('TableList',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading_1),expression:\"loading_1\"}],attrs:{\"options\":_vm.options,\"columns\":_vm.columns,\"dataSource\":_vm.dataSource,\"border\":\"\"}},[_c('el-table-column',_vm._b({attrs:{\"slot\":\"operation\",\"label\":\"操作\",\"align\":\"center\"},slot:\"operation\",scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"operate-group\",staticStyle:{\"text-align\":\"right\"}},[_c('el-button',{attrs:{\"type\":\"text\",\"disabled\":scope.row.RecordCount == 0},on:{\"click\":function($event){return _vm.handleProjectProgressClick(scope.row)}}},[_vm._v(\"\\n              工程进度管理\\n            \")])],1)]}}])},'el-table-column',_vm.options && _vm.options.props,false))],1),_vm._v(\" \"),(_vm.RecordsDialogVisible)?_c('GensetProgressRecordsDialog',{attrs:{\"ProjectProgressId\":_vm.selectItem.ProgressId,\"ProjectId\":_vm.ProjectId,\"GensetId\":_vm.GensetId},on:{\"closeDialog\":function (val) { return _vm.closeDialog('RecordsDialogVisible', val); }}}):_vm._e()],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-59098d48\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/projectManage/projectProgressManage/genset-progress.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-59098d48\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./genset-progress.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./genset-progress.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./genset-progress.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-59098d48\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./genset-progress.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-59098d48\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/projectManage/projectProgressManage/genset-progress.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}