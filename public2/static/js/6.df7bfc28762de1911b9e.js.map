{"version":3,"sources":["webpack:///src/views/equipmentManage/crew-record/curve/index.vue","webpack:///./src/views/equipmentManage/crew-record/curve/index.vue?7b2b","webpack:///./src/views/equipmentManage/crew-record/curve/index.vue","webpack:///src/components/RecordCurve/index.vue","webpack:///./src/components/RecordCurve/index.vue?1881","webpack:///./src/components/RecordCurve/index.vue"],"names":["curve","name","components","ToggleCrew","list","RecordCurve","data","value_time","Date","value_type","typeOpt","label","value","curveParameters","checkList","checkListSplitAll","curveData","computed","extends_default","Object","vuex_esm","value_time_start","addMinutes","this","dayjs_min_default","add","format","watch","selectCrew","handler","nv","getCurveData","methods","init","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","getCurveParameters","stop","handleQuery","arr","forEach","item","concat","split","_this2","$api","equipment","findGeneratorSetStatisitcsItems","then","dataList","Data","catch","result","console","error","_this3","p","TimeStart","TimeEnd","Items","from_default","join","Type","q","id","ID","findGeneratorSetHistoryDataV3","mounted","crew_record_curve","render","_vm","_h","$createElement","_c","_self","_v","attrs","staticClass","shadow","type","align","placeholder","placement","model","callback","$$v","expression","_l","key","e","Key","span","Nos","_s","Describe","justify","on","click","dataType","className","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","chart","props","Array","default","_","ov","renderChart","countTime0","$moment","$echarts","dispose","document","querySelector","myChart","moment","_data","Datas","length","showLoading","text","textColor","maskColor","zlevel","fontSize","showSpinner","setTimeout","data0","includes","No","push","dataD","EndTime","StartTime","GeneratorSetID","option","getDefaultOption","series","date","startDate","common","endDate","xAxis","datas","index","items","legend","stack","showSymbol","showAllSymbol","symbol","symbolSize","emphasis","scale","animation","tooltip","formatter","params","seriesName","Unit","curValue","itemIndex","itemTime","Time","curValueLast","curFirst","i","curDate","Value","TimeString","dataZoom","start","backgroundColor","realtime","throttle","end","dataBackground","lineStyle","opacity","areaStyle","selectedDataBackground","hideLoading","setOption","interval","diff","info","trigger","position","pt","textStyle","color","confine","toolbox","show","feature","dataView","readOnly","saveAsImage","title","left","x","y","orient","width","boundaryGap","axisLine","axisLabel","axisPointer","yAxis","min","splitLine","components_RecordCurve","class","style","height"],"mappings":"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","file":"static/js/6.df7bfc28762de1911b9e.js","sourcesContent":["<!--\r\n * @Author Demon3443002624@qq.com\r\n * @Version 2022-5-18 14:43:51\r\n * @Description 历史曲线\r\n * @Version 2022-5-18 14:44:14\r\n * @Description \r\n-->\r\n<template>\r\n  <div>\r\n    <BMainTopComponent />\r\n    <el-container>\r\n      <el-main>\r\n        <div id=\"crew-record-curve\">\r\n          <!-- <el-row class=\"toggle-crew-box\">\r\n            <toggle-crew ></toggle-crew>\r\n          </el-row> -->\r\n          <el-card shadow=\"never\" class=\"query-box\">\r\n            <el-row type=\"flex\" align=\"middle\">\r\n              筛选：<el-date-picker\r\n                format=\"yyyy-MM-dd HH:mm\"\r\n                v-model=\"value_time\"\r\n                type=\"datetime\"\r\n                placeholder=\"选择日期时间\"\r\n                placement=\"bottom-start\"\r\n              >\r\n              </el-date-picker>\r\n              &nbsp;&nbsp;&nbsp;&nbsp;时间跨度：<el-select\r\n                v-model=\"value_type\"\r\n                placeholder=\"请选择\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in typeOpt\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\"\r\n                >\r\n                </el-option>\r\n              </el-select>\r\n            </el-row>\r\n            <el-row>\r\n              <div class=\"items-box\">\r\n                <el-row class=\"a-item-box\">\r\n                  <el-checkbox-group v-model=\"checkList\">\r\n                    <el-col v-for=\"e in curveParameters\" :key=\"e.Key\" :span=\"6\">\r\n                      <el-checkbox :label=\"e.Nos\">{{ e.Describe }}</el-checkbox>\r\n                    </el-col>\r\n                  </el-checkbox-group>\r\n                </el-row>\r\n                <el-row type=\"flex\" align=\"middle\" justify=\"end\" class=\"query-btn\">\r\n                  <el-button type=\"primary\" @click=\"handleQuery\">搜索</el-button>\r\n                </el-row>\r\n              </div>\r\n            </el-row>\r\n          </el-card>\r\n          <el-row class=\"chart-box\">\r\n            <record-curve\r\n              :curveData=\"curveData\"\r\n              :dataType=\"checkListSplitAll\"\r\n              :className=\"'history'\"\r\n            />\r\n          </el-row>\r\n        </div>\r\n      </el-main>\r\n      <toggle-crew></toggle-crew>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport dayjs from 'dayjs'\r\n\r\n// import _data from '../data'\r\nimport ToggleCrew from '@/components/toggleCrew/list'\r\nimport RecordCurve from '@/components/RecordCurve'\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n  name: `CrewRecordCurve`,\r\n  components: { ToggleCrew, RecordCurve },\r\n  data() {\r\n    return {\r\n      value_time: new Date(),\r\n      value_type: '0',\r\n      typeOpt: [\r\n        {\r\n          label: `前2小时`,\r\n          value: `0`\r\n        },\r\n        {\r\n          label: `前1.5小时`,\r\n          value: `1`\r\n        },\r\n        {\r\n          label: `前1小时`,\r\n          value: `2`\r\n        },\r\n        {\r\n          label: `前0.5小时`,\r\n          value: `3`\r\n        }\r\n      ],\r\n      curveParameters: [],\r\n      // 默认选中电池电压和ADC电压\r\n      checkList: ['r_048', 'cus_adc'],\r\n      // 参数值拆分\r\n      checkListSplitAll: ['r_048', 'cus_adc'],\r\n      curveData: null\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['selectCrew']),\r\n    value_time_start() {\r\n      let addMinutes = 2 * 60\r\n      switch (this.value_type) {\r\n        case '1':\r\n          addMinutes = 1.5 * 60\r\n          break\r\n        case '2':\r\n          addMinutes = 1 * 60\r\n          break\r\n        case '3':\r\n          addMinutes = 0.5 * 60\r\n          break\r\n        default:\r\n          break\r\n      }\r\n      return dayjs(this.value_time).add(-addMinutes, 'm').format('YYYY-MM-DD HH:mm')\r\n    }\r\n  },\r\n  watch: {\r\n    selectCrew: {\r\n      handler: function (nv) {\r\n        this.getCurveData()\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // init\r\n    async init() {\r\n      await this.getCurveParameters()\r\n      await this.getCurveData()\r\n    },\r\n    // 按钮 搜索\r\n    handleQuery() {\r\n      let arr = []\r\n      this.checkList.forEach((item) => {\r\n        arr = arr.concat(item.split(','))\r\n      })\r\n      this.checkListSplitAll = arr\r\n      this.getCurveData()\r\n    },\r\n    // 接口 获取曲线参数\r\n    getCurveParameters() {\r\n      return this.$api.equipment\r\n        .findGeneratorSetStatisitcsItems()\r\n        .then((value) => {\r\n          const dataList = !!value && !!value.Data && value.Data\r\n          if (dataList) {\r\n            this.curveParameters = dataList\r\n          }\r\n        })\r\n        .catch((result) => {\r\n          console.error('获取曲线参数失败', result)\r\n        })\r\n    },\r\n    // 接口 获取曲线数据\r\n    getCurveData() {\r\n      const p = {\r\n          TimeStart: this.value_time_start,\r\n          TimeEnd: dayjs(this.value_time).format('YYYY-MM-DD HH:mm'),\r\n          Items: Array.from(this.checkListSplitAll).join(','),\r\n          Type: '0'\r\n        },\r\n        q = {\r\n          id: this.selectCrew.ID\r\n        }\r\n      return this.$api.equipment\r\n        .findGeneratorSetHistoryDataV3(p, q)\r\n        .then((value) => {\r\n          // value = _data.curveHIstory\r\n          !!value && !!value.Data && (this.curveData = value.Data)\r\n        })\r\n        .catch((result) => {\r\n          console.error('获取曲线数据失败', result)\r\n        })\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#crew-record-curve {\r\n  display: block;\r\n  .query-box {\r\n    margin-top: -10px;\r\n    /deep/.el-card__body {\r\n      padding: 5px;\r\n    }\r\n    .a-item-box {\r\n      margin: 2px 0 0 0;\r\n      .el-col {\r\n        height: 20px;\r\n        .el-checkbox {\r\n          font-weight: bold;\r\n        }\r\n      }\r\n    }\r\n    .query-btn {\r\n      margin-top: -25px;\r\n    }\r\n  }\r\n  .chart-box {\r\n    height: 450px;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/equipmentManage/crew-record/curve/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('BMainTopComponent'),_vm._v(\" \"),_c('el-container',[_c('el-main',[_c('div',{attrs:{\"id\":\"crew-record-curve\"}},[_c('el-card',{staticClass:\"query-box\",attrs:{\"shadow\":\"never\"}},[_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_vm._v(\"\\n            筛选：\"),_c('el-date-picker',{attrs:{\"format\":\"yyyy-MM-dd HH:mm\",\"type\":\"datetime\",\"placeholder\":\"选择日期时间\",\"placement\":\"bottom-start\"},model:{value:(_vm.value_time),callback:function ($$v) {_vm.value_time=$$v},expression:\"value_time\"}}),_vm._v(\"\\n                时间跨度：\"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.value_type),callback:function ($$v) {_vm.value_type=$$v},expression:\"value_type\"}},_vm._l((_vm.typeOpt),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._v(\" \"),_c('el-row',[_c('div',{staticClass:\"items-box\"},[_c('el-row',{staticClass:\"a-item-box\"},[_c('el-checkbox-group',{model:{value:(_vm.checkList),callback:function ($$v) {_vm.checkList=$$v},expression:\"checkList\"}},_vm._l((_vm.curveParameters),function(e){return _c('el-col',{key:e.Key,attrs:{\"span\":6}},[_c('el-checkbox',{attrs:{\"label\":e.Nos}},[_vm._v(_vm._s(e.Describe))])],1)}),1)],1),_vm._v(\" \"),_c('el-row',{staticClass:\"query-btn\",attrs:{\"type\":\"flex\",\"align\":\"middle\",\"justify\":\"end\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleQuery}},[_vm._v(\"搜索\")])],1)],1)])],1),_vm._v(\" \"),_c('el-row',{staticClass:\"chart-box\"},[_c('record-curve',{attrs:{\"curveData\":_vm.curveData,\"dataType\":_vm.checkListSplitAll,\"className\":'history'}})],1)],1)]),_vm._v(\" \"),_c('toggle-crew')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-75bea9f6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/equipmentManage/crew-record/curve/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-75bea9f6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-75bea9f6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-75bea9f6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/equipmentManage/crew-record/curve/index.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div\r\n    :class=\"'record-curve' + className\"\r\n    :style=\"{\r\n      height: '100%',\r\n      width: '100%'\r\n    }\"\r\n  ></div>\r\n</template>\r\n\r\n<script>\r\nimport dayjs from 'dayjs'\r\n\r\nimport __data from './data'\r\nimport { formatTime } from '@/utils/common'\r\n\r\nexport default {\r\n  name: `RecordCurve`,\r\n  data() {\r\n    return {\r\n      chart: null\r\n    }\r\n  },\r\n  props: {\r\n    dataType: {\r\n      type: Array,\r\n      default: (_) => {\r\n        return []\r\n      }\r\n    },\r\n    className: '',\r\n    curveData: {\r\n      type: Object,\r\n      default: (_) => {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    dataType(nv, ov) {\r\n      this.renderChart()\r\n    },\r\n    curveData(nv){\r\n      this.renderChart()\r\n    }\r\n  },\r\n  methods: {\r\n    renderChart() {\r\n      const countTime0 = this.$moment()\r\n      this.chart && this.$echarts.dispose(this.chart)\r\n      this.chart = this.$echarts.init(\r\n        document.querySelector(`.record-curve${this.className}`),\r\n        `dark`\r\n      )\r\n      const myChart = this.chart\r\n      const moment = this.$moment\r\n      const _data = this.curveData\r\n      if (_data && Array.from(_data.Datas).length != 0) {\r\n        myChart.showLoading({\r\n          text: '数据加载中，请稍候...',\r\n          textColor: '#eee',\r\n          maskColor: 'rgba(16, 12, 42)',\r\n          zlevel: 5,\r\n          fontSize: 20,\r\n          showSpinner: false\r\n        })\r\n        setTimeout(() => {\r\n          const data0 = []\r\n          _data.Datas.forEach((item) => {\r\n            if (this.dataType.includes(item.No)) data0.push(item)\r\n          })\r\n          const dataD = {}\r\n          dataD.Datas = data0\r\n          dataD.EndTime = _data.EndTime\r\n          dataD.StartTime = _data.StartTime\r\n          dataD.GeneratorSetID = _data.GeneratorSetID\r\n          dataD.Nos = _data.Nos\r\n          var option = this.getDefaultOption()\r\n          var series = []\r\n          var date = []\r\n          var startDate = formatTime(dataD.StartTime)\r\n\r\n          var endDate = formatTime(dataD.EndTime)\r\n          var startDataZoom = 0\r\n          var endDataZoom = 10\r\n          for (; startDate <= endDate; startDate = startDate.add(1, 's')) {\r\n            date.push(startDate.format('yyyy-MM-DD HH:mm:ss'))\r\n          }\r\n          option.xAxis.data = date\r\n          const datas = dataD\r\n          for (var index in datas.Datas) {\r\n            var data = datas.Datas[index]\r\n            var items = data.Data\r\n            option.legend.data.push(data.Describe)\r\n            series[index] = {\r\n              name: data.Describe,\r\n              type: 'line',\r\n              stack: '',\r\n              data: [],\r\n              showSymbol: true,\r\n              showAllSymbol: false,\r\n              symbol: 'emptyCircle', // 设定为实心点\r\n              symbolSize: 5, // 设定实心点的大小\r\n              // hoverAnimation: true,\r\n              // hoverAnimation is deprecated, use emphasis.scale instead.\r\n              emphasis: {\r\n                scale: true\r\n              },\r\n              // animation: true,\r\n              // 解决大数据加载卡顿问题 1\r\n              animation: false,\r\n              // 解决大数据加载卡顿问题（ Echats 官方）-->有问题\r\n              // sampling: 'average',\r\n              tooltip: {\r\n                formatter: function (params) {\r\n                  return (\r\n                    params.name +\r\n                    '<br/>' +\r\n                    params.seriesName +\r\n                    '：' +\r\n                    params.value +\r\n                    ' ' +\r\n                    items[0].Unit\r\n                  )\r\n                }\r\n              }\r\n            }\r\n            var curValue = '-'\r\n            var itemIndex = 0\r\n            var itemTime = moment(items[itemIndex].Time)\r\n            var curValueLast = '-'\r\n            var curFirst = 0\r\n            // 生成数据\r\n            // for (var i = 0; i < date.length; i++) {\r\n            //   const a = moment(date[i])\r\n            //   const b = moment(date[i])\r\n            // }\r\n            // date.forEach((item) => {\r\n            //   // const a = moment(item)\r\n            //   // const b = moment(item)\r\n            //   // const a = Math.random()\r\n            //   // const b = Math.random()\r\n            //   const a = dayjs(item)\r\n            //   const b = dayjs(item)\r\n            // })\r\n            for (var i = 0; i < date.length; i++) {\r\n              var curDate = dayjs(date[i])\r\n              curValue = items[itemIndex].Value\r\n              itemTime = dayjs(items[itemIndex].TimeString)\r\n\r\n              if (curDate <= itemTime) {\r\n                if (curFirst === 0 && itemTime - curDate >= 1000) {\r\n                  curValue = '-'\r\n                } else if (itemTime - curDate < 1000) {\r\n                  curValue = items[itemIndex].Value\r\n                  curValueLast = curValue\r\n                  curFirst = 1\r\n                  if (items.length > itemIndex + 1) itemIndex++\r\n                } else {\r\n                  curValue = curValueLast\r\n                  if (itemTime - curDate >= 300000) {\r\n                    curFirst = 0\r\n                    curValue = '-'\r\n                  }\r\n                }\r\n              } else if (curFirst === 1 && curDate > itemTime) {\r\n                // curValue = curValueLast;//最后一条数据补点\r\n                curValue = '-' // 最后一条数据不补点\r\n                if (items.length > itemIndex + 1) itemIndex++\r\n              }\r\n\r\n              series[index].data.push(curValue)\r\n            }\r\n          }\r\n          option.series = series\r\n          option.dataZoom = [\r\n            {\r\n              type: 'inside',\r\n              start: 0,\r\n              backgroundColor: 'rgba(47,69,84,0)',\r\n              // 解决大数据加载卡顿问题 2\r\n              realtime: false,\r\n              throttle: 0\r\n            },\r\n            {\r\n              start: startDataZoom,\r\n              end: endDataZoom,\r\n              // 解决大数据加载卡顿问题 2\r\n              realtime: false,\r\n              throttle: 0,\r\n              dataBackground: {\r\n                // 数据阴影的样式。\r\n                lineStyle: {\r\n                  opacity: 0\r\n                },\r\n                areaStyle: {\r\n                  opacity: 0\r\n                }\r\n              },\r\n              // 隐藏数据阴影\r\n              selectedDataBackground: {\r\n                lineStyle: {\r\n                  opacity: 0\r\n                },\r\n                areaStyle: {\r\n                  opacity: 0\r\n                }\r\n              }\r\n            }\r\n          ]\r\n          myChart.hideLoading()\r\n          myChart.setOption(option)\r\n          const interval = this.$moment().diff(countTime0)\r\n          console.info(`info:ECharts finished in ${interval}ms`)\r\n        }, 100)\r\n      }\r\n    },\r\n    getDefaultOption() {\r\n      return {\r\n        tooltip: {\r\n          trigger: 'axis',\r\n          position: function (pt) {\r\n            return [pt[0], '10%']\r\n          },\r\n          textStyle: {\r\n            color: '#fff'\r\n          },\r\n          backgroundColor: '#6f6f6f89',\r\n          confine: true\r\n        },\r\n        toolbox: {\r\n          show: false,\r\n          feature: {\r\n            dataView: { show: true, readOnly: false },\r\n            saveAsImage: { show: true }\r\n          }\r\n        },\r\n        title: { left: 'left' },\r\n        legend: {\r\n          x: '10%',\r\n          y: '10px',\r\n          type: 'scroll',\r\n          orient: 'horizontal', // ''\r\n          data: [],\r\n          width: '80%'\r\n        },\r\n        xAxis: {\r\n          // name: '时间',\r\n          name: '',\r\n          type: 'category',\r\n          boundaryGap: false,\r\n          data: [],\r\n          axisLine: {\r\n            lineStyle: {\r\n              color: '#eedd78'\r\n            }\r\n          },\r\n          axisLabel: {\r\n            color: '#eedd78'\r\n          },\r\n          axisPointer: {\r\n            lineStyle: {\r\n              color: '#eedd78',\r\n              type: 'solid'\r\n            }\r\n          }\r\n        },\r\n        yAxis: {\r\n          name: '',\r\n          type: 'value',\r\n          boundaryGap: ['20%', '20%'],\r\n          min: 0,\r\n          axisLine: {\r\n            show: true,\r\n            lineStyle: {\r\n              color: '#eedd78'\r\n            }\r\n          },\r\n          splitLine: {\r\n            lineStyle: {\r\n              type: 'dashed',\r\n              color: '#aaaaaa'\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.renderChart()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.record-curve {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/RecordCurve/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:'record-curve' + _vm.className,style:({\n    height: '100%',\n    width: '100%'\n  })})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4092876a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/RecordCurve/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4092876a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4092876a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4092876a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/RecordCurve/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}