webpackJsonp([7],{LSdZ:function(t,e){},gy2x:function(t,e){},"l/HZ":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Dd8w"),n=a.n(r),l=a("oqQY"),s=a.n(l),o=a("NYxO"),i={name:"CrewRecordPowerChart",props:{xData:{type:Array,default:function(t){return[]}},sData:{type:Array,default:function(t){return[]}}},data:function(){return{chart:null}},watch:{xData:function(){this.renderChart()},sData:function(){this.renderChart()}},methods:{renderChart:function(){this.chart||(this.chart=this.$echarts.init(document.querySelector(".crew-record-power-chart")));var t={xAxis:{type:"category",data:this.xData,axisTick:{},axisLabel:{rotate:60}},yAxis:{name:"累计发电量(kWh)",type:"value",axisLine:{show:!0,lineStyle:{color:"#c23531"}},splitLine:{lineStyle:{type:"dashed"}}},tooltip:{show:!0,formatter:function(t){return'<el-card style="color:#fff">\n                      <div>'+t.name+"</div>\n                      <div>累计发电量："+t.data+"</div>\n                    </el-card>"},backgroundColor:"rgba(50,50,50,0.7)"},series:[{data:this.sData,type:"bar",itemStyle:{color:"#d43239"}}]};this.chart.setOption(t)}}},c={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"crew-record-power-chart"})},staticRenderFns:[]};var d=a("VU/8")(i,c,!1,function(t){a("LSdZ")},"data-v-3de9c22a",null).exports,u={name:"CrewRecordPower",components:{ToggleCrew:a("5w7s").a,Chart:d},data:function(){return{value_type:1,value_date:[this.$moment().date(1),this.$moment()],typeOpt:[{label:"本月",value:1},{label:"前一周",value:2},{label:"前半个月",value:3},{label:"前一个月",value:4}],xData:[],sData:[],formData:{energy:"",time:""}}},computed:n()({},Object(o.c)(["selectCrew"]),{dateString:function(){return{start:s()(this.value_date[0]).format("YYYY-MM-DD"),end:s()(this.value_date[1]).format("YYYY-MM-DD")}}}),watch:{selectCrew:{handler:function(t,e){this.getChartData()},immediate:!0,deep:!0},value_type:function(t,e){var a=null;switch(t){case 1:a=[this.$moment().date(1),this.$moment()];break;case 2:a=[this.$moment().add(-6,"days"),this.$moment()];break;case 3:a=[this.$moment().add(-14,"days"),this.$moment()];break;default:a=[this.$moment().add(-29,"days"),this.$moment()]}this.value_date=a,this.getChartData()},value_date:function(t){this.getChartData()}},methods:{getChartData:function(){var t=this,e={StartTime:s()(this.value_date[0]).format("YYYY-MM-DD"),EndTime:s()(this.value_date[1]).format("YYYY-MM-DD")},a={generatorId:this.selectCrew.ID};this.$api.equipment.getTotalGenerationEnergy(e,a).then(function(e){var a=!!e&&!!e.Data&&e.Data;if(a){var r=a.DateStrs,n=a.TotalEnergy,l={energy:a.TotalYearEnergy+"kwh",time:a.TotalYearAllMinute+"分钟（"+a.TotalYearHour+"小时"+a.TotalYearMinute+"分钟）"};t.formData=l,t.xData=r,t.sData=n}}).catch(function(t){})}},mounted:function(){this.getChartData()}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("BMainTopComponent"),t._v(" "),a("el-container",[a("el-main",[a("div",{attrs:{id:"crew-record-power"}},[a("el-row",{staticClass:"query-box"},[a("el-card",{attrs:{shadow:"never"}},[a("span",[t._v("筛选：")]),t._v(" "),a("el-row",{attrs:{type:"flex",align:"middle"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value_type,callback:function(e){t.value_type=e},expression:"value_type"}},t._l(t.typeOpt,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v("    \n            "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"yyyy-MM-dd",clearable:!1,"popper-append-to-body":!1,placement:"bottom-start"},model:{value:t.value_date,callback:function(e){t.value_date=e},expression:"value_date"}})],1)],1),t._v(" "),a("el-row",{staticClass:"data-box"},[a("el-card",{attrs:{shadow:"never"}},[a("el-row",{staticClass:"table-box"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{staticClass:"title"},[t._v("发电量统计")])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[t._v("机组名称")]),t._v(" "),a("el-col",{attrs:{span:18}},[t._v(t._s(t.selectCrew.DisplayName))])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[t._v("开始时间")]),t._v(" "),a("el-col",{attrs:{span:18}},[t._v(t._s(t.dateString.start))])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[t._v("结束时间")]),t._v(" "),a("el-col",{attrs:{span:18}},[t._v(t._s(t.dateString.end))])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[t._v("累计发电量")]),t._v(" "),a("el-col",{attrs:{span:18}},[t._v(t._s(t.formData.energy))])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[t._v("累计运行时间")]),t._v(" "),a("el-col",{attrs:{span:18}},[t._v(t._s(t.formData.time))])],1)],1),t._v(" "),a("el-row",{staticClass:"chart-box"},[a("chart",{attrs:{sData:t.sData,xData:t.xData}})],1)],1)],1)],1)]),t._v(" "),a("toggle-crew")],1)],1)},staticRenderFns:[]};var h=a("VU/8")(u,v,!1,function(t){a("gy2x")},"data-v-66d21f00",null);e.default=h.exports}});
//# sourceMappingURL=7.7928dfdfcd0ff10c5b11.js.map