{"version":3,"sources":["webpack:///src/views/equipmentManage/crew-record/online/index.vue","webpack:///./src/views/equipmentManage/crew-record/online/index.vue?2218","webpack:///./src/views/equipmentManage/crew-record/online/index.vue"],"names":["columns","label","prop","props","online","name","components","ToggleCrew","data","dataSource","dataTotal","options","index","labelIndex","paginationCfg","currentPage","pageSize","layout","pageSizes","value_date","Date","setDate","getDate","value_type","queryOpt","typeOpt","value","typeMapping","9","10","computed","extends_default","Object","vuex_esm","watch","selectCrew","handler","nv","this","_query","created","mounted","methods","queryTableData","_this","q","page","p","DateStart","dayjs_min_default","format","DateEnd","Type","GeneratorSetId","ID","$api","equipment","getOnOfflineRecords","then","dataObj","Data","arr","dataList","length","forEach","e","i","obj","key","mch_name","DisplayName","type","time","common","Time","push","TotalItemCount","$set","catch","handleNewJump","row","handleChangePage","val","handleChangeSize","crew_record_online","render","_vm","_h","$createElement","_c","_self","_v","attrs","id","shadow","staticClass","range-separator","start-placeholder","end-placeholder","popper-append-to-body","placement","model","callback","$$v","expression","align","placeholder","_l","item","on","click","pagination","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/13.d6f9b66c2926d40892f6.js","sourcesContent":["<!--\r\n * @Author Demon3443002624@qq.com\r\n * @Version 2022-5-18 14:43:51\r\n * @Description 上线记录\r\n * @Version 2022-5-18 14:44:14\r\n * @Description \r\n-->\r\n<template>\r\n  <div>\r\n    <BMainTopComponent />\r\n    <el-container>\r\n      <el-main>\r\n        <div id=\"crew-record-operating\">\r\n          <!-- <toggle-crew ></toggle-crew> -->\r\n          <el-card shadow=\"never\">\r\n            <div class=\"block\">\r\n              <span>筛选：</span>\r\n              <el-date-picker\r\n                v-model=\"value_date\"\r\n                type=\"daterange\"\r\n                range-separator=\"至\"\r\n                start-placeholder=\"开始时间\"\r\n                end-placeholder=\"结束时间\"\r\n                format=\"yyyy-MM-dd\"\r\n                :popper-append-to-body=\"false\"\r\n                placement=\"bottom-start\"\r\n              >\r\n              </el-date-picker>\r\n            </div>\r\n            <el-row type=\"flex\" align=\"middle\">\r\n              &nbsp;&nbsp;&nbsp;&nbsp;类型：\r\n              <el-select v-model=\"value_type\" placeholder=\"请选择\">\r\n                <el-option\r\n                  v-for=\"item in typeOpt\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\"\r\n                >\r\n                </el-option>\r\n              </el-select>\r\n            </el-row>\r\n            <el-button type=\"primary\" @click=\"_query\">搜索</el-button>\r\n          </el-card>\r\n          <el-card shadow=\"never\">\r\n            <table-list\r\n              :options=\"options\"\r\n              :columns=\"columns\"\r\n              :dataSource=\"dataSource\"\r\n              :dataTotal=\"dataTotal\"\r\n              :pagination=\"paginationCfg\"\r\n              @handleChangePage=\"handleChangePage\"\r\n              @handleChangeSize=\"handleChangeSize\"\r\n            />\r\n          </el-card>\r\n        </div>\r\n      </el-main>\r\n      <toggle-crew ></toggle-crew>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport dayjs from 'dayjs'\r\nimport { mapGetters } from 'vuex'\r\n\r\n// import _data from '../data'\r\nimport { formatTime } from '@/utils/common'\r\nimport ToggleCrew from '@/components/toggleCrew/list'\r\n\r\n// 表格头设置\r\nconst columns = [\r\n  {\r\n    label: '机组名称',\r\n    prop: 'mch_name',\r\n    props: {\r\n      // sortable: 'sortable'\r\n    }\r\n  },\r\n  {\r\n    label: '类型',\r\n    prop: 'type'\r\n  },\r\n  {\r\n    label: '时间',\r\n    prop: 'time'\r\n  }\r\n]\r\nexport default {\r\n  name: `crewRecordOperating`,\r\n  components: {\r\n    ToggleCrew\r\n  },\r\n  data() {\r\n    return {\r\n      columns,\r\n      dataSource: [],\r\n      dataTotal: 0,\r\n      options: {\r\n        index: true,\r\n        labelIndex: '序号'\r\n      },\r\n      paginationCfg: {\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n        layout: 'total, sizes, prev, pager, next, jumper',\r\n        pageSizes: [10, 20, 30, 40]\r\n      },\r\n      data: [],\r\n      value_date: [new Date(new Date().setDate(new Date().getDate() - 7)), new Date()],\r\n      value_type: '-1',\r\n      queryOpt: {},\r\n      typeOpt: [\r\n        {\r\n          value: '-1',\r\n          label: '全部'\r\n        },\r\n        {\r\n          value: 9,\r\n          label: '离线'\r\n        },\r\n        {\r\n          value: 10,\r\n          label: '上线'\r\n        }\r\n      ],\r\n      typeMapping: {\r\n        9: '离线',\r\n        10: '上线'\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['selectCrew'])\r\n  },\r\n  watch: {\r\n    selectCrew: {\r\n      handler: function (nv) {\r\n        this._query()\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.queryOpt = {\r\n      value_date: this.value_date,\r\n      value_type: this.value_type\r\n    }\r\n  },\r\n  mounted() {\r\n    this._query()\r\n  },\r\n  methods: {\r\n    // 查询数据\r\n    queryTableData() {\r\n      const q = {\r\n          pageSize: this.paginationCfg.pageSize,\r\n          page: this.paginationCfg.currentPage\r\n        },\r\n        p = {\r\n          // DateStart: dayjs(this.value_date[0]).format('YYYY-MM-DD'),\r\n          // DateEnd: dayjs(this.value_date[1]).format('YYYY-MM-DD'),\r\n          // Type: this.value_type,\r\n          DateStart: dayjs(this.queryOpt.value_date[0]).format('YYYY-MM-DD'),\r\n          DateEnd: dayjs(this.queryOpt.value_date[1]).format('YYYY-MM-DD'),\r\n          Type: this.queryOpt.value_type,\r\n          GeneratorSetId: this.selectCrew.ID\r\n        }\r\n      this.$api.equipment\r\n        .getOnOfflineRecords(p, q)\r\n        .then((value) => {\r\n          // value = _data.online\r\n          const dataObj = !!value && !!value.Data && value.Data\r\n          if (dataObj) {\r\n            const arr = []\r\n            const dataList = dataObj.Data\r\n            !dataList ||\r\n              dataList.length === 0 ||\r\n              dataList.forEach((e, i) => {\r\n                const obj = {\r\n                  key: i,\r\n                  mch_name: e.DisplayName,\r\n                  type: this.typeMapping[e.Type],\r\n                  time: formatTime(e.Time).format('YYYY-MM-DD HH:mm:ss')\r\n                }\r\n                arr.push(obj)\r\n              })\r\n            this.dataTotal = dataObj.TotalItemCount\r\n            this.$set(this, 'dataSource', arr)\r\n          }\r\n        })\r\n        .catch(() => {})\r\n    },\r\n    handleNewJump(row) {},\r\n    // 分页 当前页改变\r\n    handleChangePage(val) {\r\n      this.paginationCfg.currentPage = val\r\n      this.queryTableData()\r\n    },\r\n    // 分页 每页条数改变\r\n    handleChangeSize(val) {\r\n      this.paginationCfg.currentPage = 1\r\n      this.paginationCfg.pageSize = val\r\n      this.queryTableData()\r\n    },\r\n    // 搜索\r\n    _query() {\r\n      this.paginationCfg.currentPage = 1\r\n      this.queryOpt = {\r\n        value_date: this.value_date,\r\n        value_type: this.value_type\r\n      }\r\n      this.queryTableData()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#crew-record-operating {\r\n  /deep/.el-card {\r\n    overflow: initial;\r\n    margin-bottom: 15px;\r\n    .el-card__body {\r\n      display: flex;\r\n      .el-button {\r\n        margin: 0 0 0 10px;\r\n      }\r\n      .el-input__inner {\r\n        height: 32px;\r\n      }\r\n    }\r\n  }\r\n  /deep/ .toggle-crew {\r\n    margin-bottom: 0;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/equipmentManage/crew-record/online/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('BMainTopComponent'),_vm._v(\" \"),_c('el-container',[_c('el-main',[_c('div',{attrs:{\"id\":\"crew-record-operating\"}},[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('div',{staticClass:\"block\"},[_c('span',[_vm._v(\"筛选：\")]),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始时间\",\"end-placeholder\":\"结束时间\",\"format\":\"yyyy-MM-dd\",\"popper-append-to-body\":false,\"placement\":\"bottom-start\"},model:{value:(_vm.value_date),callback:function ($$v) {_vm.value_date=$$v},expression:\"value_date\"}})],1),_vm._v(\" \"),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_vm._v(\"\\n                类型：\\n            \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.value_type),callback:function ($$v) {_vm.value_type=$$v},expression:\"value_type\"}},_vm._l((_vm.typeOpt),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm._query}},[_vm._v(\"搜索\")])],1),_vm._v(\" \"),_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('table-list',{attrs:{\"options\":_vm.options,\"columns\":_vm.columns,\"dataSource\":_vm.dataSource,\"dataTotal\":_vm.dataTotal,\"pagination\":_vm.paginationCfg},on:{\"handleChangePage\":_vm.handleChangePage,\"handleChangeSize\":_vm.handleChangeSize}})],1)],1)]),_vm._v(\" \"),_c('toggle-crew')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0b777bc9\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/equipmentManage/crew-record/online/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0b777bc9\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0b777bc9\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0b777bc9\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/equipmentManage/crew-record/online/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}