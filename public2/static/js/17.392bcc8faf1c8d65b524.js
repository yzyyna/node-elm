webpackJsonp([17],{"0/jW":function(e,t,a){"use strict";var i=a("fZjL"),n=a.n(i),s=a("Dd8w"),l=a.n(s),o=a("YT+p"),r=a.n(o),c=a("NYxO"),d=a("X2Oc"),u={name:"GensetInfo",inject:["reload"],props:{gensetInfo:{type:Object,default:null}},data:function(){return{GensetInfo:null,GensetMchInfo:null,showByCrewStatus:d.g,url:a("3xIo"),isShowDrawer:!1,direction:"rtl",activeName:"1"}},computed:l()({},Object(c.c)(["selectCrew","GensetBrowseRecords"])),watch:{gensetInfo:{handler:function(e,t){this.GensetMchInfo=e},deep:!0}},mounted:function(){this.getGeneratorSet()},methods:l()({},Object(c.b)(["toggleSelectCrew"]),{getGeneratorSet:function(){var e=this;this.$api.operation.FindGeneratorSet({id:this.selectCrew.ID}).then(function(t){e.GensetInfo=t.Data})},getUrl:function(e){return a("fO1v")("./signal_"+e+".png")},handleRefresh:function(){this.reload()},handleClickTab:function(){console.log(this.activeName)},toggleCrew:function(e){if(e.ID)return this.isShowDrawer=!1,void this.toggleSelectCrew(e);this.$message({type:"error",message:"请选择机组！"})},toggleIsExpandClick:function(e){this.isShowDrawer=e},handleClose:function(e){this.isShowDrawer=!1}})},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"genset-info"},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticClass:"genset-info-items genset-info-basic",attrs:{span:12}},[a("span",{staticClass:"genset-info-item genset-name"},[e._v(e._s(e.selectCrew.DisplayName))]),e._v(" "),0!=e.selectCrew.Status?a("div",{staticClass:"genset-info-item"},[2==e.selectCrew.NetworkType?a("el-image",{staticStyle:{width:"20px",height:"20px"},attrs:{src:e.url}}):1==e.selectCrew.NetworkType?a("el-image",{staticStyle:{width:"20px",height:"20px"},attrs:{src:e.getUrl(""+e.selectCrew.NetworkValue)}}):e._e()],1):e._e(),e._v(" "),a("el-tag",{staticClass:"genset-info-item",style:{background:e.showByCrewStatus(e.selectCrew.Status).color,color:1==e.selectCrew.Status||2==e.selectCrew.Status?"#000":"#fff"}},[e._v(e._s(e.showByCrewStatus(e.selectCrew.Status).text)+"\n      ")]),e._v(" "),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:e.GensetMchInfo&&e.GensetMchInfo.Temperature,expression:"GensetMchInfo && GensetMchInfo.Temperature"}],staticClass:"genset-info-item genset-temperature"},[e._v("温度"+e._s(e.GensetMchInfo&&e.GensetMchInfo.Temperature||"-")+"\n      ")]),e._v(" "),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:e.GensetMchInfo&&e.GensetMchInfo.Windage,expression:"GensetMchInfo && GensetMchInfo.Windage"}],staticClass:"genset-info-item genset-windage"},[e._v("风阻"+e._s(e.GensetMchInfo&&e.GensetMchInfo.Windage||"-")+"\n      ")]),e._v(" "),a("el-tag",{staticClass:"genset-info-item genset-altitude"},[e._v("\n        海拔"+e._s(e.GensetInfo&&e.GensetInfo.Altitude||"-")+"m\n      ")])],1),e._v(" "),a("el-col",{staticClass:"genset-info-items operate-btns",attrs:{span:12}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.GensetMchInfo&&e.GensetMchInfo.CollectorTime,expression:"GensetMchInfo && GensetMchInfo.CollectorTime"}],attrs:{title:"数据每隔3秒更新一次"}},[e._v("\n        数据最近更新时间："+e._s(e.GensetMchInfo&&e.GensetMchInfo.CollectorTime)+"\n      ")]),e._v(" "),a("i",{staticClass:"genset-info-item el-icon-refresh",attrs:{title:"点击刷新页面"},on:{click:function(t){return e.handleRefresh()}}}),e._v(" "),a("i",{staticClass:"genset-info-item el-icon-time",attrs:{title:"机组浏览足迹"},on:{click:function(t){return e.toggleIsExpandClick(!0)}}})])],1),e._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticClass:"genset-info-items genset-info-more"},[a("span",[e._v("机组编号："+e._s(e.selectCrew.CollectorToken))]),e._v(" "),a("span",[e._v("发动机型号："+e._s(e.GensetInfo&&e.GensetInfo.EngineModel||"-"))]),e._v(" "),a("span",[e._v("功率(KW)："+e._s(e.GensetInfo&&e.GensetInfo.RatedPower||"-"))]),e._v(" "),a("span",[e._v("累计运行时长："+e._s(e.GensetInfo&&e.GensetInfo.TotalRunTime||"-"))]),e._v(" "),a("span",[e._v("当前位置："+e._s(e.GensetInfo&&e.GensetInfo.InstallationSite||"-"))])])],1),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"维保监控",name:"1"}})],1),e._v(" "),a("el-drawer",{attrs:{title:"",visible:e.isShowDrawer,direction:e.direction,"with-header":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.isShowDrawer=t}}},[a("div",{staticClass:"toggle-crew-list"},[a("p",{staticClass:"content-title"},[a("span",[e._v("机组浏览足迹\n          "),a("i",{staticClass:"genset-info-item el-icon-question",attrs:{title:"若退出账号或清理浏览器缓存，浏览足迹将被清空"}})]),e._v(" "),a("i",{staticClass:"el-icon-close",on:{click:function(t){return e.toggleIsExpandClick(!1)}}})]),e._v(" "),a("div",{staticClass:"genset-container"},[e.GensetBrowseRecords&&e.GensetBrowseRecords.length>0?a("div",{staticClass:"genset-list"},e._l(e.GensetBrowseRecords,function(t,i){return a("el-row",{key:i,staticClass:"item-box",class:{active:t.ID===e.selectCrew.ID},nativeOn:{click:function(a){return e.toggleCrew(t)}}},[a("div",[a("div",{staticClass:"color_type"},[a("span",{style:{background:e.showByCrewStatus(t.Status).color}})]),e._v(" "),a("div",{staticClass:"name-text SingleLineHiding",attrs:{title:t.DisplayName}},[e._v("\n                "+e._s(t.DisplayName)+"\n              ")]),e._v(" "),0!=t.Status?a("div",[2==t.NetworkType?a("el-image",{staticStyle:{width:"20px",height:"20px"},attrs:{src:e.url}}):1==t.NetworkType?a("el-image",{staticStyle:{width:"20px",height:"20px"},attrs:{src:e.getUrl(""+t.NetworkValue)}}):e._e()],1):e._e()]),e._v(" "),a("div",[a("span",{staticClass:"status-text"},[e._v("\n                "+e._s(e.showByCrewStatus(t.Status).text)+"\n              ")]),e._v(" "),a("span",{staticClass:"address-text SingleLineHiding",attrs:{title:t.InstallationSite}},[e._v("\n                "+e._s(t.InstallationSite)+"\n              ")])])])}),1):a("p",{staticClass:"no-data"},[e._v("暂无记录！")])])])])],1)},staticRenderFns:[]};var m=a("VU/8")(u,p,!1,function(e){a("bXqF")},"data-v-a0fd288e",null).exports,_=a("5w7s"),v=[{prop:"date",label:"日期",width:"150"},{prop:"name",label:"姓名",width:"150"},{prop:"sex",label:"年龄",width:"150"},{prop:"province",label:"省份",width:""},{prop:"city",label:"城市",width:"150"},{prop:"address",label:"地址",width:"150"}],h=[{date:"2022-3-14",name:"爱新觉罗",province:"上海",city:"普陀区",address:"上海市普陀区金沙江路 1518 弄",zip:200333,sex:18},{date:"2022-3-14",sex:18,name:"爱新觉罗",province:"上海",city:"普陀区",address:"上海市普陀区金沙江路 1518 弄",zip:200333},{date:"2022-3-14",name:"爱新觉罗",sex:18,province:"上海",city:"普陀区",address:"上海市普陀区金沙江路 1518 弄",zip:200333}],f=a("M4fF"),g=a.n(f),w={data:function(){return{new_date_json:{},multipleSelection:[],is_edit:!0,is_delete:!0,selection:!1,radio:!0,space_color:!1,table_data:[]}},props:{labelText:{type:Object,default:function(e){return{add:"添加项目",edit:"编辑",save:"确定",delete:"删除"}}},table_columns:{type:Array,default:function(e){return v}},dataArray:{type:Array,default:function(e){return h}}},watch:{space_color:function(){this.$nextTick(function(){this.tableRowClassName()})},table_data:{handler:function(e,t){var a=this;console.log(e,t),this.$emit("dataChange",{data:e}),this.$nextTick(function(){a.tableRowClassName()})},deep:!0}},methods:{tableRowClassName:function(){var e=this.$refs.myTable.$el.getElementsByTagName("tbody")[0].getElementsByTagName("tr");for(var t in e)t%2==0&&(this.space_color?e[t].style.backgroundColor="#f0f9eb":e[t].style.backgroundColor="")},handleSelectionChange:function(e){this.multipleSelection=e},handleEdit:function(e,t){t.edit=!0},handleDelete:function(e,t){var a=this;console.log(e,t);var i=this.table_data.findIndex(function(e){return e==t});t.add?this.table_data.splice(i,1):this.$confirm("","",{message:'是否确定<span style="color:red;font-weight:bold">删除</span>该项目？',dangerouslyUseHTMLString:!0}).then(function(e){var n=l()({},t,{MaintenanceItemId:-1});a.table_data.splice(i,1,n)}).catch(function(){return!1})},handleSave:function(e,t){t.edit=!1,delete this.table_data[e].add,this.$message({message:"操作成功！",type:"success"})},handleAdd:function(){var e=this,t={};for(var a in this.new_date_json)"edit"===a?delete t[a]:"add"===a?delete t[a]:t[a]=null;t.edit=!0,t.add=!0,console.log("handleAdd",t),this.table_data.push(t),this.$nextTick(function(){e.$emit("addDataItem")})},initEditAttribute:function(){this.edit;var e=g.a.cloneDeep(this.dataArray);if(e.length>0){for(var t in e)e[t].edit=!0,this.table_data.push(e[t]);0===n()(this.new_date_json).length&&this.initAddDataJson(e[0])}},initAddDataJson:function(e){var t=e,a={};for(var i in t)a[i]="edit"===i?"true":"";a.add=!0,this.new_date_json=a}},created:function(){},mounted:function(){this.initEditAttribute(),this.$nextTick(function(){this.tableRowClassName()})}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{ref:"myTable",staticStyle:{width:"100%"},attrs:{data:e.table_data.filter(function(e){return-1!==e.MaintenanceItemId})},on:{"selection-change":e.handleSelectionChange}},[e.radio?a("el-table-column",{attrs:{type:"index",width:"50"}}):e._e(),e._v(" "),e.selection?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),e._l(e.table_columns,function(t,i,n){return a("el-table-column",{key:n,attrs:{align:"center",item:t,index:i,label:t.label},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.edit&&"ItemContent"===t.prop?a("el-input",{attrs:{size:"small",placeholder:"请输入"+t.label},model:{value:i.row[t.prop],callback:function(a){e.$set(i.row,t.prop,a)},expression:"scope.row[item.prop]"}}):e._e(),e._v(" "),i.row.edit&&"ItemContent"!==t.prop?a("el-input-number",{attrs:{min:0,"controls-position":"right",placeholder:"请输入"+t.label},model:{value:i.row[t.prop],callback:function(a){e.$set(i.row,t.prop,a)},expression:"scope.row[item.prop]"}}):e._e(),e._v(" "),i.row.edit?e._e():a("span",[e._v(e._s(i.row[t.prop]))])]}}],null,!0)})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.is_delete?a("el-button",{attrs:{size:"mini",plain:!0,type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v(e._s(e.labelText.delete))]):e._e()]}}])})],2)],1)},staticRenderFns:[]};var C=a("VU/8")(w,b,!1,function(e){a("lqwT")},"data-v-4e4930ff",null).exports,y=a("I4G/"),D=[{prop:"fpie_006_12",name:"燃油油水比重-%"},{prop:"fpie_006_02",name:"进油管空气分离器-%"},{prop:"fpie_006_22",name:"底座燃油箱液位-%"},{prop:"fpie_006_23",name:"底座燃油箱液位-L"},{prop:"fpie_006_32",name:"油底壳机油液位-%"},{prop:"fpie_006_42",name:"补机油箱液位-%"},{prop:"fpie_006_43",name:"补机油箱液位-L"},{prop:"fpie_006_92",name:"待滤箱液位-%"},{prop:"fpie_006_93",name:"待滤箱液位-L"},{prop:"fpie_006_62",name:"废液箱液位-%"},{prop:"fpie_006_63",name:"废液箱液位-L"},{prop:"fpie_006_51",name:"冷却水箱状态"},{prop:"fpie_007_02",name:"冷却水温度"},{prop:"fpie_007_03",name:"A相电流"},{prop:"fpie_007_04",name:"B相电流"},{prop:"fpie_007_05",name:"C相电流"},{prop:"fpie_007_06",name:"AC相电压"}],S=[{key:"1",name:"机组视频",tip:"视频开关",props:"fpie_007_11",openCode:"41",closeCode:"42"},{key:"2",name:"排水电磁阀",tip:"燃油排水",props:"fpie_006_15",openCode:"47",closeCode:"48"},{key:"3",name:"燃油排气泵",tip:"燃油排气",props:"fpie_006_04",openCode:"45",closeCode:"46"},{key:"4",name:"燃油加热器",tip:"燃油加热",props:"fpie_006_16",openCode:"39",closeCode:"40"},{key:"5",name:"水套加热器",tip:"水套加热",props:"fpie_007_01",openCode:"37",closeCode:"38"},{key:"6",name:"补机油补油泵",tip:"油底壳补油",props:"fpie_006_45",openCode:"33",closeCode:"34"},{key:"7",name:"待滤油箱抽油泵",tip:"油底壳抽油",props:"fpie_006_95",openCode:"31",closeCode:"32"}],T=[{prop:"ItemContent",label:"维保事项",width:"100"},{prop:"DefaultHourSetting",label:"运行时间(h)",width:"100"},{prop:"DefaultDaySetting",label:"绝对时间(天)",width:"100"}],k={name:"sensorMonitor",inject:["reload"],components:{GensetInfo:m,ToggleCrew:_.a,EditTable:C,ControllerConfiguration:y.default},props:{isShow:{type:Boolean,default:!0}},data:function(){return{IsVideo:null,videoH5Url:null,switchStatus:{"1_flag":!1,"2_flag":!1,"3_flag":!1,"4_flag":!1,"5_flag":!1,"6_flag":!1,"7_flag":!1},resizefun:null,animation:null,myCharts:[],myLiquidfillCharts:[],colors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}],CollectorTime:"",realTimeData:{},GeneratorSetInfo:{},IsFirstRequst:!0,colLeft:9,colRight:15,echart_arr:[{id:"monitor-gauge-1",des:"燃油油水比重",key:"fpie_006_12",value:0,unit:"%",min:0,max:100,IsRender:!1,seriesType:"gauge",axisLineSetting:[[.2,"#228b22"],[.8,"#f59a23"],[1,"#d9001b"]]},{id:"monitor-gauge-2",des:"进油管空气分离器",key:"fpie_006_02",value:0,unit:"%",min:0,max:100,IsRender:!1,seriesType:"gauge",axisLineSetting:[[.2,"#228b22"],[.8,"#f59a23"],[1,"#d9001b"]]},{id:"monitor-liquidfill-1",des:"燃油箱余量",key:"fpie_006_22",realKey:"fpie_006_23",value:0,unit:"L",min:0,max:700,IsRender:!1,seriesType:"liquidFill"},{id:"monitor-gauge-3",des:"油底壳机油液位",key:"fpie_006_32",value:0,unit:"%",min:0,max:100,IsRender:!1,seriesType:"gauge",axisLineSetting:[[.2,"#d9001b"],[.8,"#f59a23"],[1,"#228b22"]]},{id:"monitor-liquidfill-2",des:"补机油箱液位",key:"fpie_006_42",realKey:"fpie_006_43",value:0,unit:"L",min:0,max:120,IsRender:!1,seriesType:"liquidFill"},{id:"monitor-liquidfill-3",des:"待滤油箱液位",key:"fpie_006_92",realKey:"fpie_006_93",value:0,unit:"L",min:0,max:120,IsRender:!1,seriesType:"liquidFill"},{id:"monitor-liquidfill-4",des:"废液箱液位",key:"fpie_006_62",realKey:"fpie_006_63",value:0,unit:"L",min:0,max:223,IsRender:!1,seriesType:"liquidFill"}],loading:!0,showStrategyItemList:null,editDialigVisible:!1,GensetSettingDetail:null,table_columns:T,StrategyItemList:null,matterListDialigVisible:!1,showDetailDialigVisible:!1,configData:null,showRecordsDialigVisible:!1,searchForm:{keyWord:"",searchTime:null},pickerTime:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}},dataSource:[{date:"2022-06-10",person:"姜波",tableData:[{name:"维保事项1",data:"运行：500h/480h    绝对：800/480h"},{name:"维保事项2",data:"运行：500h/480h    绝对：800/480h"}]},{date:"2022-06-12",person:"姜波",tableData:[{name:"维保事项1",data:"运行：500h/480h    绝对：800/480h"},{name:"维保事项2",data:"运行：500h/480h    绝对：800/480h"}]}]}},computed:l()({},Object(c.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.initData()},deep:!0},$route:{handler:function(e,t){t&&this.initData()},deep:!0,immediate:!0}},mounted:function(){var e=this;this.selectCrew.ID&&(this.initData(),this.resizefun=function(){e.myCharts.forEach(function(e){e.resize()})},window.addEventListener("resize",this.resizefun))},methods:{initData:function(){this.getGeneratorSet(),this.getPicVideo(),this.initInterval()},initInterval:function(){var e=this;this.getMchInfo(),this.animation&&(clearInterval(this.animation),this.animation=null),this.animation=setInterval(function(){e.getMchInfo()},3e3)},getGeneratorSet:function(){var e=this;this.$api.screenData.GetMaintenanceGensetSettingDetailV2({},{GensetId:this.selectCrew.ID}).then(function(t){1===t.Code&&(e.$set(e,"StrategyItemList",t.Data.Programs),e.$set(e,"showStrategyItemList",t.Data.Programs&&t.Data.Programs.slice(0,4)))})},getPicVideo:function(){var e=this;this.$api.screenData.FindGeneratorSetByMonitor({id:this.selectCrew.ID}).then(function(t){var a=t.Data;e.IsVideo=a.IsVideo,a.IsVideo&&(a&&(e.videoH5Url=a.VideoH5Url),e.$nextTick(function(){e.renderVideo()}))}).catch(function(e){console.error("设备管理-机组监控-机组监控-获取图片和视频接口 FindGeneratorSetByMonitor ，错误信息：\n",e)})},renderVideo:function(){var e=this;if(this.videoH5Url){var t=new r.a;t.attachMedia(this.$refs.myVideo),t.on(r.a.Events.MEDIA_ATTACHED,function(a){t.loadSource(e.videoH5Url),t.on(r.a.Events.MANIFEST_PARSED,function(){this.$refs.myVideo.play()})}),t.on(r.a.Events.ERROR,function(e,a){if(a.fatal)switch(a.type){case r.a.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered, try to recover"),t.startLoad();break;case r.a.ErrorTypes.MEDIA_ERROR:console.error("fatal media error encountered, try to recover"),t.recoverMediaError();break;default:t.destroy()}})}},getMchInfo:function(){var e=this;this.$api.screenData.getsingleMchInfoRealtime({id:this.selectCrew.ID}).then(function(t){if(1===t.Code){var a=t.Data;e.CollectorTime=Object(d.c)(a.CollectorTime).format("yyyy-MM-DD HH:mm:ss"),e.$set(e.GeneratorSetInfo,"CollectorTime",e.CollectorTime);var i=a.NowData;if(n()(i).includes("fpie_001_03")){var s=i.fpie_001_03.Value?"####"!==i.fpie_001_03.Value?i.fpie_001_03.Value+i.fpie_001_03.Unit:"-":"";e.$set(e.GeneratorSetInfo,"Temperature",s)}else e.$set(e.GeneratorSetInfo,"Temperature","");if(n()(i).includes("fpie_006_74")){var l=i.fpie_006_74.Value?"####"!==i.fpie_006_74.Value?i.fpie_006_74.Value+i.fpie_006_74.Unit:"-":"";e.$set(e.GeneratorSetInfo,"Windage",l)}else e.$set(e.GeneratorSetInfo,"Windage","");e.$nextTick(function(){e.$emit("changeGeneratorSetInfo",e.GeneratorSetInfo)});var o={};D.forEach(function(e){i[e.prop]?o[e.prop]="####"!=i[e.prop].Value?i[e.prop]:{Value:"-",Unit:""}:o[e.prop]={Value:"-",Unit:""}}),e.$set(e,"realTimeData",o),S.forEach(function(t){i[t.props]&&e.$set(e.switchStatus,t.key+"_flag",1==i[t.props].Value)}),e.$nextTick(function(){if(e.IsFirstRequst){e.IsFirstRequst=!1;var t=n()(e.realTimeData);return e.echart_arr.forEach(function(e,a){t.includes(e.key)?e.IsRender=!0:e.IsRender=!1}),void e.$nextTick(function(){e.init(),e.loading=!1})}e.refreshData(),e.loading=!1})}}).catch(function(e){console.log(e)})},init:function(){var e=this;this.echart_arr.forEach(function(t){if(t.IsRender){var a=document.getElementById(t.id),i=e.$echarts.init(a),n=null;"gauge"===t.seriesType&&(n=e.getGaugeOption(t)),"liquidFill"===t.seriesType&&(n=e.getLiquidFillOption(t)),i.setOption(n),e.myCharts.push(i)}})},refreshData:function(){var e=this;this.echart_arr.forEach(function(t,a){if(t.IsRender){var i=null;"gauge"===t.seriesType&&(i=e.getGaugeOption(t)),"liquidFill"===t.seriesType&&(i=e.getLiquidFillOption(t)),e.myCharts[a]&&e.myCharts[a].setOption(i)}})},getGaugeOption:function(e){var t=this.realTimeData[e.key].Value;return{series:[{type:"gauge",radius:"85%",min:e.min,max:e.max,splitNumber:4,axisLine:{lineStyle:{width:6,color:e.axisLineSetting||[[.05,"#555555"],[.1,"#d9001b"],[.6,"#f59a23"],[1,"#228b22"]]}},pointer:{icon:"path://M2090.36389,615.30999 L2090.36389,615.30999 C2091.48372,615.30999 2092.40383,616.194028 2092.44859,617.312956 L2096.90698,728.755929 C2097.05155,732.369577 2094.2393,735.416212 2090.62566,735.56078 C2090.53845,735.564269 2090.45117,735.566014 2090.36389,735.566014 L2090.36389,735.566014 C2086.74736,735.566014 2083.81557,732.63423 2083.81557,729.017692 C2083.81557,728.930412 2083.81732,728.84314 2083.82081,728.755929 L2088.2792,617.312956 C2088.32396,616.194028 2089.24407,615.30999 2090.36389,615.30999 Z",length:"75%",width:6,offsetCenter:[0,"5%"],itemStyle:{color:"-"==t?"#808080":"auto"}},axisTick:{show:!1},splitLine:{distance:-4,length:12,lineStyle:{color:"auto",width:1}},axisLabel:{color:"#0099FF",distance:10,fontSize:12,formatter:function(e){return e.toFixed(0)}},detail:{show:!1},data:[{value:t||e.value}]}]}},getLiquidFillOption:function(e,t){var a=this.realTimeData[e.key].Value+" "+this.realTimeData[e.key].Unit,i=this.realTimeData[e.key].Value/100,n=this.realTimeData[e.realKey];return{series:[{type:"liquidFill",radius:"80%",data:[i],amplitude:"3%",waveLength:"25%",outline:{show:!0,borderDistance:2,itemStyle:{color:"none",borderColor:"#294D99",borderWidth:2,shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.25)"}},label:{formatter:(n.Value+" "+n.Unit||e.value)+" \n\n "+a,fontSize:12}}]}},handleInput:function(e,t){this.switchStatus[e+"_flag"]=!t},handleClickSwitch:function(e,t){var a=this,i=S.find(function(t){return t.key==e}),n=this.switchStatus[e+"_flag"]?"关闭":"开启",s=""+n+i.name,l="确定"+n+i.name+"吗？",o=this.$createElement;this.$confirm("操作提示",{title:s,message:o("div",[o("p",[o("span",l)])]),confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=a.switchStatus[e+"_flag"]?i.closeCode:i.openCode;a.changeSwitchStatus(e,t)}).catch(function(){a.$message({type:"info",message:"已取消"})})},changeSwitchStatus:function(e,t){var a=this,i={id:this.selectCrew.ID,key:t};this.$api.operation.control({},i).then(function(t){a.$message.success(t.Message),a.switchStatus[e+"_flag"]=!a.switchStatus[e+"_flag"],clearInterval(a.animation),a.initInterval()}).catch(function(e){a.$message.error(e)})},formatDate:function(e){return Object(d.c)(e).format("yyyy-MM-DD")},handleShowDetail:function(){this.configData={activeTab:14,gensetId:this.selectCrew.ID,type:1,runStatus:!0},this.showDetailDialigVisible=!0},handleEditMaintenanceClick:function(){var e=this;this.$api.project.GetMaintenanceGensetSettingDetail({},{GensetId:this.selectCrew.ID}).then(function(t){1===t.Code?(e.$set(e,"GensetSettingDetail",t.Data),e.editDialigVisible=!0):e.$message({type:"error",message:"机组维保策略查询失败！"})})},handleAddClick:function(){this.$refs.editTable.handleAdd()},tableDataChange:function(e){this.$set(this.GensetSettingDetail,"ProgramList",e.data)},addDataItem:function(){var e=document.querySelector(".edit-maintenance-dialog .el-dialog__body"),t=(e.scrollTop,e.offsetHeight-39),a=e.scrollHeight-39;e.scrollTo(0,a-t)},handleSave:function(){var e=this;if(!this.GensetSettingDetail.ProgramList||this.GensetSettingDetail.ProgramList&&0==this.GensetSettingDetail.ProgramList.length)this.$message({type:"warning",message:"请添加维保事项!"});else{var t=this.GensetSettingDetail.ProgramList.map(function(e){return{MaintenanceProgramId:e.MaintenanceProgramId,MaintenanceItemId:e.MaintenanceItemId,ItemContent:e.ItemContent,DefaultHourSetting:e.DefaultHourSetting,DefaultDaySetting:e.DefaultDaySetting}}),a={StrategyId:this.GensetSettingDetail.StrategyId,ProgramList:t},i={GensetId:this.selectCrew.ID};this.$api.screenData.EditMaintenanceGensetSettingV2(a,i).then(function(t){1===t.Code&&(e.$message({type:"success",message:"编辑机组维保策略成功!"}),e.closeDialog("editDialigVisible",{refresh:!0}))})}},handleShowMoreClick:function(){this.matterListDialigVisible=!0},handleShowRecordsClick:function(){this.showRecordsDialigVisible=!0},reset:function(){this.$set(this,"searchForm",{searchTime:null,keyWord:""})},searchData:function(){console.log(this.searchForm)},closeDialog:function(e,t){this[e]=!1,t&&t.refresh&&this.initData()}},beforeDestroy:function(){clearInterval(this.animation),window.removeEventListener("resize",this.resizefun),this.resizefun=null}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"sensor-monitor"}},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"sensor-monitor-container",attrs:{type:"flex"}},[a("el-col",{staticClass:"maintenance-items",attrs:{span:8}},[a("div",{staticClass:"monitor-items-area maintenance-info"},[a("el-row",{staticClass:"area-top",attrs:{type:"flex"}},[a("el-col",{staticClass:"items-title"},[a("span",[e._v("维保信息")]),e._v(" "),a("i",{staticClass:"el-icon-question",attrs:{title:"按实际运行时长或绝对时长 减 策略运行时长或绝对时长的差值(取最大者)按大小降序排列"}})]),e._v(" "),a("el-col",{staticClass:"items-btns"})],1),e._v(" "),a("ul",{staticClass:"maintenance-matter"},[a("li",{staticClass:"title"},[a("div",[a("span",[e._v("维保事项")])]),e._v(" "),a("div",[a("span",[e._v("运行时长(实际/策略)")])]),e._v(" "),a("div",[a("span",[e._v("绝对时长(实际/策略)")])])]),e._v(" "),e.showStrategyItemList&&e.showStrategyItemList.length>0?e._l(e.showStrategyItemList,function(t,i){return a("li",{key:i},[a("div",[a("span",{staticClass:"SingleLineHiding",attrs:{title:t.ItemContent}},[e._v("\n                  "+e._s(t.ItemContent)+"\n                ")])]),e._v(" "),a("div",[a("span",[a("em",{class:{exceed:t.NextRemindHour>=t.DefaultHourSetting}},[e._v("\n                    "+e._s(t.NextRemindHour)+"h\n                  ")]),e._v("\n                  /\n                  "),a("em",[e._v(e._s(t.DefaultHourSetting)+"h")])])]),e._v(" "),a("div",[a("span",[a("em",{class:{exceed:t.NextRemindDate>=t.DefaultHourSetting}},[e._v("\n                    "+e._s(0)+"天\n                    ")]),e._v("\n                  /\n                  "),a("em",[e._v(e._s(t.DefaultDaySetting)+"天")])])])])}):a("li",{staticClass:"no-data"},[a("p",[e._v("暂无数据")])])],2),e._v(" "),a("div",{staticClass:"operate-btns"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleShowDetail()}}},[e._v("维保策略详情 ")])],1)],1),e._v(" "),a("div",{staticClass:"monitor-items-area vidio-container"},[a("el-row",{staticClass:"area-top",attrs:{type:"flex"}},[a("el-col",{staticClass:"items-title"},[a("span",[e._v("机组视频")])]),e._v(" "),e.IsVideo?a("el-col",{staticClass:"items-btns"},[a("el-switch",{staticClass:"maintenance-switch",on:{input:function(t){return e.handleInput("1",t)}},nativeOn:{click:function(t){return t.preventDefault(),e.handleClickSwitch("1")}},model:{value:e.switchStatus["1_flag"],callback:function(t){e.$set(e.switchStatus,"1_flag",t)},expression:"switchStatus['1_flag']"}})],1):e._e()],1),e._v(" "),a("div",{staticClass:"maintenance-items-container"},[e.IsVideo?a("video",{ref:"myVideo",attrs:{width:"100%",height:"100%",controls:"controls",autoplay:"autoplay",muted:"muted"},domProps:{muted:!0}}):a("p",[e._v("暂无摄像头")])])],1)]),e._v(" "),a("el-col",{staticClass:"maintenance-items",attrs:{span:8}},[a("div",{staticClass:"monitor-items-area fuel-unit"},[a("el-row",{staticClass:"area-top",attrs:{type:"flex"}},[a("el-col",{staticClass:"items-title"},[a("span",[e._v("燃油单元")])])],1),e._v(" "),a("div",{staticClass:"maintenance-items-container"},[e.realTimeData&&e.realTimeData.fpie_006_12?a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:e.colLeft}},[a("div",{staticClass:"monitor-item",attrs:{id:"monitor-gauge-1"}})]),e._v(" "),a("el-col",{attrs:{span:e.colRight}},[a("div",{class:"-"!==e.realTimeData.fpie_006_02.Value?e.realTimeData.fpie_006_12.Value<=20?"normalColor":e.realTimeData.fpie_006_12.Value<=80?"warningColor":"attentionColor":"nullColor"},[a("span",[e._v("\n                  油水比重\n                  "),a("em",[e._v("\n                    "+e._s(e.realTimeData.fpie_006_12.Value+e.realTimeData.fpie_006_12.Unit)+"\n                  ")])])]),e._v(" "),a("div",[a("span",{attrs:{title:"排水电磁阀"}},[e._v("燃油排水")]),e._v(" "),a("el-switch",{staticClass:"maintenance-switch",on:{input:function(t){return e.handleInput("2",t)}},nativeOn:{click:function(t){return t.preventDefault(),e.handleClickSwitch("2")}},model:{value:e.switchStatus["2_flag"],callback:function(t){e.$set(e.switchStatus,"2_flag",t)},expression:"switchStatus['2_flag']"}})],1)])],1):e._e(),e._v(" "),e.realTimeData&&e.realTimeData.fpie_006_02?a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:e.colLeft}},[a("div",{staticClass:"monitor-item",attrs:{id:"monitor-gauge-2"}})]),e._v(" "),a("el-col",{attrs:{span:e.colRight}},[a("div",{class:"-"!==e.realTimeData.fpie_006_02.Value?e.realTimeData.fpie_006_02.Value<=20?"normalColor":e.realTimeData.fpie_006_02.Value<=80?"warningColor":"attentionColor":"nullColor"},[a("span",[e._v("\n                  进油管空气分离器\n                  "),a("em",[e._v("\n                    "+e._s(e.realTimeData.fpie_006_02.Value+e.realTimeData.fpie_006_02.Unit)+"\n                  ")])])]),e._v(" "),a("div",[a("span",{attrs:{title:"燃油排气泵"}},[e._v("燃油排气")]),e._v(" "),a("el-switch",{staticClass:"maintenance-switch",on:{input:function(t){return e.handleInput("3",t)}},nativeOn:{click:function(t){return t.preventDefault(),e.handleClickSwitch("3")}},model:{value:e.switchStatus["3_flag"],callback:function(t){e.$set(e.switchStatus,"3_flag",t)},expression:"switchStatus['3_flag']"}})],1)])],1):e._e(),e._v(" "),e.realTimeData&&e.realTimeData.fpie_006_23?a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:e.colLeft}},[a("div",{staticClass:"monitor-item",attrs:{id:"monitor-liquidfill-1"}})]),e._v(" "),a("el-col",{attrs:{span:e.colRight}},[a("div",[a("span",[e._v("\n                  燃油箱余量\n                  "),a("em",[e._v("\n                    "+e._s(e.realTimeData.fpie_006_23.Value+e.realTimeData.fpie_006_23.Unit)+"\n                  ")])]),e._v(" "),a("span",[e._v("燃油耗尽百分比 "),a("em",[e._v("99.9%")])])]),e._v(" "),a("div",[a("span",{attrs:{title:"燃油加热器"}},[e._v("燃油加热")]),e._v(" "),a("el-switch",{staticClass:"maintenance-switch",on:{input:function(t){return e.handleInput("4",t)}},nativeOn:{click:function(t){return t.preventDefault(),e.handleClickSwitch("4")}},model:{value:e.switchStatus["4_flag"],callback:function(t){e.$set(e.switchStatus,"4_flag",t)},expression:"switchStatus['4_flag']"}})],1)])],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"monitor-items-area cooling-water"},[a("el-row",{staticClass:"area-top",attrs:{type:"flex"}},[a("el-col",{staticClass:"items-title"},[a("span",[e._v("冷却水")])])],1),e._v(" "),a("div",{staticClass:"maintenance-items-container"},[e.realTimeData&&e.realTimeData.fpie_006_51?a("el-row",[a("el-col",[a("div",{staticClass:"data-items"},[a("span",{class:"-"!==e.realTimeData.fpie_006_51.Value?0==e.realTimeData.fpie_006_51.Value?"normalColor":"warningColor":"nullColor"},[e._v("当前水量\n                  "),a("em",[e._v(e._s("-"!==e.realTimeData.fpie_006_51.Value?0==e.realTimeData.fpie_006_51.Value?"有水":"无水":"-"))])]),e._v(" "),a("span",[e._v("当前水温\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_007_02.Value+e.realTimeData.fpie_007_02.Unit))])]),e._v(" "),a("span",[e._v("A相电流\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_007_03.Value+e.realTimeData.fpie_007_03.Unit))])])]),e._v(" "),a("div",{staticClass:"data-items"},[a("span",[e._v("B相电流\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_007_04.Value+e.realTimeData.fpie_007_04.Unit))])]),e._v(" "),a("span",[e._v("C相电流\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_007_05.Value+e.realTimeData.fpie_007_05.Unit))])]),e._v(" "),a("span",[e._v("AC相电压\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_007_06.Value+e.realTimeData.fpie_007_06.Unit))])])]),e._v(" "),a("div",[a("span",{attrs:{title:"水套加热器"}},[e._v("水温加热")]),e._v(" "),a("el-switch",{staticClass:"maintenance-switch",on:{input:function(t){return e.handleInput("5",t)}},nativeOn:{click:function(t){return t.preventDefault(),e.handleClickSwitch("5")}},model:{value:e.switchStatus["5_flag"],callback:function(t){e.$set(e.switchStatus,"5_flag",t)},expression:"switchStatus['5_flag']"}})],1)])],1):e._e()],1)],1)]),e._v(" "),a("el-col",{staticClass:"maintenance-items",attrs:{span:8}},[a("div",{staticClass:"monitor-items-area engineoil-unit"},[a("el-row",{staticClass:"area-top",attrs:{type:"flex"}},[a("el-col",{staticClass:"items-title"},[a("span",[e._v("机油单元")])])],1),e._v(" "),a("div",{staticClass:"maintenance-items-container"},[e.realTimeData&&e.realTimeData.fpie_006_32?a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:e.colLeft}},[a("div",{staticClass:"monitor-item",attrs:{id:"monitor-gauge-3"}})]),e._v(" "),a("el-col",{attrs:{span:e.colRight}},[a("div",{class:"-"!==e.realTimeData.fpie_006_02.Value?e.realTimeData.fpie_006_32.Value<=20?"attentionColor":e.realTimeData.fpie_006_32.Value<=80?"warningColor":"normalColor":"nullColor"},[a("span",[e._v("\n                  机油油底壳\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_006_32.Value+e.realTimeData.fpie_006_32.Unit))])])])])],1):e._e(),e._v(" "),e.realTimeData&&e.realTimeData.fpie_006_43?a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:e.colLeft}},[a("div",{staticClass:"monitor-item",attrs:{id:"monitor-liquidfill-2"}})]),e._v(" "),a("el-col",{attrs:{span:e.colRight}},[a("div",[a("span",[e._v("\n                  补机油箱余量\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_006_43.Value+e.realTimeData.fpie_006_43.Unit))])])]),e._v(" "),a("div",[a("span",{attrs:{title:"补机油补油泵"}},[e._v("油底壳补油")]),e._v(" "),a("el-switch",{staticClass:"maintenance-switch",on:{input:function(t){return e.handleInput("6",t)}},nativeOn:{click:function(t){return t.preventDefault(),e.handleClickSwitch("6")}},model:{value:e.switchStatus["6_flag"],callback:function(t){e.$set(e.switchStatus,"6_flag",t)},expression:"switchStatus['6_flag']"}})],1)])],1):e._e(),e._v(" "),e.realTimeData&&e.realTimeData.fpie_006_93?a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:e.colLeft}},[a("div",{staticClass:"monitor-item",attrs:{id:"monitor-liquidfill-3"}})]),e._v(" "),a("el-col",{attrs:{span:e.colRight}},[a("div",[a("span",[e._v("\n                  待滤油箱余量\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_006_93.Value+e.realTimeData.fpie_006_93.Unit))])])]),e._v(" "),a("div",[a("span",{attrs:{title:"待滤油箱抽油泵"}},[e._v("油底壳抽油")]),e._v(" "),a("el-switch",{staticClass:"maintenance-switch",on:{input:function(t){return e.handleInput("7",t)}},nativeOn:{click:function(t){return t.preventDefault(),e.handleClickSwitch("7")}},model:{value:e.switchStatus["7_flag"],callback:function(t){e.$set(e.switchStatus,"7_flag",t)},expression:"switchStatus['7_flag']"}})],1)])],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"monitor-items-area waste-liquid-tank"},[a("el-row",{staticClass:"area-top",attrs:{type:"flex"}},[a("el-col",{staticClass:"items-title"},[a("span",[e._v("废液箱")])])],1),e._v(" "),a("div",{staticClass:"maintenance-items-container"},[e.realTimeData&&e.realTimeData.fpie_006_63?a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:e.colLeft}},[a("div",{staticClass:"monitor-item",attrs:{id:"monitor-liquidfill-4"}})]),e._v(" "),a("el-col",{attrs:{span:e.colRight}},[a("div",[a("span",[e._v("\n                  废液箱液位\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_006_63.Value+e.realTimeData.fpie_006_63.Unit))])])])])],1):e._e()],1)],1)])],1),e._v(" "),e.showDetailDialigVisible?a("el-dialog",{staticClass:"maintenance-detail-dialog",attrs:{title:"维保策略详情",width:"80%",visible:e.showDetailDialigVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.showDetailDialigVisible=t},close:function(){return e.closeDialog("showDetailDialigVisible",{refresh:!0})}}},[a("div",{staticClass:"dialog-content"},[a("ControllerConfiguration",{attrs:{configData:e.configData}})],1)]):e._e(),e._v(" "),e.editDialigVisible?a("el-dialog",{staticClass:"edit-maintenance-dialog",attrs:{title:"维保策略优化",width:"80%",visible:e.editDialigVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.editDialigVisible=t},close:function(){return e.closeDialog("editDialigVisible")}}},[a("div",{staticClass:"dialog-content"},[a("edit-table",{ref:"editTable",attrs:{table_columns:e.table_columns,dataArray:e.GensetSettingDetail.ProgramList},on:{dataChange:e.tableDataChange,addDataItem:e.addDataItem}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticClass:"add-item"},[a("el-button",{staticClass:"add-btn",attrs:{size:"mini"},on:{click:function(t){return e.handleAddClick()}}},[e._v(" 添加项目 ")])],1),e._v(" "),a("el-col",[a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(){return e.closeDialog("editDialigVisible")}}},[e._v("\n            取消\n          ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleSave()}}},[e._v(" 保存 ")])],1)],1)],1)]):e._e(),e._v(" "),e.matterListDialigVisible?a("el-dialog",{staticClass:"show-maintenance-dialog",attrs:{width:"600px",visible:e.matterListDialigVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.matterListDialigVisible=t},close:function(){return e.closeDialog("matterListDialigVisible")}}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v("全部维保事项")]),e._v(" "),a("i",{staticClass:"el-icon-question",attrs:{title:"按实际运行时长或绝对时长 减 策略运行时长或绝对时长的差值(取最大者)按大小降序排列"}})]),e._v(" "),a("div",{staticClass:"dialog-content show-maintenance-dialog-content"},[a("ul",{staticClass:"maintenance-matter"},[a("li",{staticClass:"title"},[a("div",[a("span",[e._v("维保事项")])]),e._v(" "),a("div",[a("span",[e._v("运行时长(实际/策略)")])]),e._v(" "),a("div",[a("span",[e._v("绝对时长(实际/策略)")])])]),e._v(" "),e.StrategyItemList&&e.StrategyItemList.length>0?e._l(e.StrategyItemList,function(t,i){return a("li",{key:i},[a("div",[a("span",{staticClass:"SingleLineHiding",attrs:{title:t.ItemContent}},[e._v("\n                "+e._s(t.ItemContent)+"\n              ")])]),e._v(" "),a("div",[a("span",[a("em",[e._v(e._s(t.NextRemindHour)+"h")]),e._v(" /\n                "),a("em",[e._v(e._s(t.DefaultHourSetting)+"h")])])]),e._v(" "),a("div",[a("span",[a("em",[e._v(e._s(0)+"天")]),e._v(" /\n                "),a("em",[e._v(e._s(t.DefaultDaySetting)+"天")])])])])}):a("li",{staticClass:"no-data"},[a("p",[e._v("暂无数据")])])],2)]),e._v(" "),a("div",{staticClass:"footer-center"},[e.StrategyItemList&&e.StrategyItemList.length>0?a("el-button",{on:{click:function(t){return e.handleEditMaintenanceClick()}}},[e._v("维保策略优化\n      ")]):e._e()],1)]):e._e(),e._v(" "),e.showRecordsDialigVisible?a("el-dialog",{staticClass:"maintenance-record-dialog",attrs:{title:"维保记录",width:"60%",visible:e.showRecordsDialigVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.showRecordsDialigVisible=t},close:function(){return e.closeDialog("showRecordsDialigVisible")}}},[a("div",{staticClass:"dialog-content"},[a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-item"},[a("el-input",{attrs:{placeholder:"支持名字或维保事项关键字搜索"},model:{value:e.searchForm.keyWord,callback:function(t){e.$set(e.searchForm,"keyWord",t)},expression:"searchForm.keyWord"}})],1),e._v(" "),a("div",{staticClass:"search-item date-type"},[a("span",[e._v("维保日期:")]),e._v(" "),a("el-date-picker",{staticClass:"input-with-select",attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerTime,placement:"bottom-start"},model:{value:e.searchForm.searchTime,callback:function(t){e.$set(e.searchForm,"searchTime",t)},expression:"searchForm['searchTime']"}})],1),e._v(" "),a("div",{staticClass:"search-btn-box"},[a("el-button",{staticClass:"reset-btn",attrs:{type:"text"},on:{click:function(t){return e.reset()}}},[e._v("清空筛选")]),e._v(" "),a("el-button",{staticClass:"query-btn",attrs:{type:"primary"},on:{click:function(t){return e.searchData()}}},[e._v("查 询")])],1)]),e._v(" "),a("el-timeline",e._l(e.dataSource,function(t,i){return a("el-timeline-item",{key:i,attrs:{timestamp:t.date+"  维保人:"+t.person,placement:"top"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"维保事项",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"data",label:"维保前数据",width:"180"}})],1)],1)}),1)],1)]):e._e()],1)},staticRenderFns:[]};var I=a("VU/8")(k,x,!1,function(e){a("lVJv")},"data-v-77fc325d",null);t.a=I.exports},"5WTO":function(e,t){},KR8f:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),s=a("HVSh"),l=a("Gu7T"),o=a.n(l),r=a("NYxO"),c={warninglist:{waringcolumn:[{prop:"time",label:"报警时间",width:"10",key:"title2"},{prop:"mchname",label:"机组名称",width:"12",key:"title3"},{prop:"divisionmch",label:"报警分机组",width:"8",key:"title4"},{prop:"warningcontent",label:"报警内容",width:"12",key:"title5"},{prop:"warningtype",label:"报警类型",width:"6",key:"title6"}],warningdatas:[{order:"1",time:"2021-11-19 09:01:38",mchname:"测试机组",divisionmch:"测试分机组",warningcontent:"测试警告内容",warningtype:"测试警告类型",operation:"查看"}],keepcolumn:[{prop:"unit",label:"机组",width:"5",key:"title22"},{prop:"plandate",label:"计划保养日期",width:"4",key:"title23"},{prop:"type",label:"保养类型",width:"2",key:"title24"}],keepdatas:[{order:"1",unit:"测试机组",plandate:"2021-11-19",type:"测试类型",operation:"查看"}]}},d=a("X2Oc"),u={props:["showTabledialog"],data:function(){return{activeName:"first",dialogTableVisible:!0,warningdatas:[],waringcolumn:c.warninglist.waringcolumn,keepdatas:[],keepcolumn:c.warninglist.keepcolumn,warningDataTable:[],keepDataTable:[]}},watch:{warningDataTable:function(e,t){this.warningdatas=e},keepDataTable:function(e,t){this.keepdatas=e}},mounted:function(){this.init()},methods:n()({},Object(r.b)(["toggleSelectCrew"]),{handleClick:function(e,t){var a=this,i="first"===this.activeName?"warningTable":"keepTable";setTimeout(function(){a.$refs[i].doLayout()},100)},handleClick_check:function(e,t,a){var i=this;if(e.id){this.$api.common.getCrewList({model:{DisplayMode:1,IsLease:1,UserID:-1,CollectorToken:"",StatusMode:0}},{page:0,pageSize:999}).then(function(a){var n=a.Data.Data.filter(function(t){return t.ID===e.id})[0];n&&n.ID?(i.toggleSelectCrew(n),0===t?i.$router.push("/equipment/crewmonitor/crew-monitor-info"):i.$router.push("/operation/unit-maintenance-manage/maintain-record")):i.$message({type:"error",message:"未查询到该机组！"})})}},init:function(){this.warningdatas=[],this.keepdatas=[];var e=this.$loading({lock:!0,text:"数据加载中，请勿操作...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.setWarnKeepData(function(t){e.close()})},setWarnKeepData:function(e){var t=this;this.$api.screenData.FindGeneratorSetRadioIndexPage().then(function(a){if(a){var i=a.Data,n=i.AlarmList||[],s=i.RemindList||[],l=[],r=[];n.forEach(function(e,t){var a={order:t,id:e.GeneratorSetId,time:Object(d.c)(e.Time).format("yyyy-MM-DD HH:mm:ss"),mchname:e.GensetName,divisionmch:"测试分机组",warningcontent:e.Content,warningtype:"警告",operation:"查看"};l.push(a)}),s.forEach(function(e,t){var a={order:t,id:e.GeneratorSetId,unit:e.GensetName,plandate:Object(d.c)(e.Time).format("YYYY-MM-DD"),type:"保养",keepContent:e.Content,operation:"查看"};r.push(a)}),t.warningdatas=[].concat(o()(l.map(function(e){return"实时报警："+e.mchname+"-"+e.warningcontent})),o()(r.map(function(e){return"保养提醒："+e.unit+e.keepContent}))),l.length>0&&l.sort(function(e,a){return-t.$moment(e.time).diff(t.$moment(a.time))}),r.length>0&&r.sort(function(e,a){return-t.$moment(e.plandate).diff(t.$moment(a.plandate))}),t.warningDataTable=l,t.keepDataTable=r}e(a)})},closeDialog:function(){this.$emit("hiddenTabledialog")}})},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"Tabledialog",attrs:{title:"提示信息",center:!0,visible:e.dialogTableVisible,"modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogTableVisible=t},close:e.closeDialog}},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"当前报警",name:"first"}},[a("el-table",{ref:"warningTable",staticStyle:{width:"100%"},attrs:{data:e.warningdatas,size:"medium",height:"500px","highlight-current-row":!1}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"60px"}}),e._v(" "),e._l(e.waringcolumn,function(e){return a("el-table-column",{key:e.key,attrs:{"min-width":e.width,label:e.label,align:"center",prop:e.prop}})}),e._v(" "),a("el-table-column",{key:"title8",attrs:{width:"60px",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.handleClick_check(t.row,0)}}},[e._v("查看")])]}}])})],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"保养信息",name:"second"}},[a("el-table",{ref:"keepTable",staticStyle:{width:"100%"},attrs:{data:e.keepdatas,size:"medium",height:"500px","highlight-current-row":!1}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"60px"}}),e._v(" "),e._l(e.keepcolumn,function(e){return a("el-table-column",{key:e.key,attrs:{"min-width":e.width,label:e.label,prop:e.prop,align:"center"}})}),e._v(" "),a("el-table-column",{key:"title6",attrs:{width:"60px",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.handleClick_check(t.row,1)}}},[e._v("查看")])]}}])})],2)],1)],1)],1)},staticRenderFns:[]};var m={name:"systemManage",components:{TableDialogWarning:a("VU/8")(u,p,!1,function(e){a("ZldE")},"data-v-5c9b6b7c",null).exports},data:function(){return{animation:null,tabs:[{type:"GensetAlarm",status:2,label:"报警",value:0},{type:"GensetWarn",status:3,label:"警告",value:0},{type:"GensetRun",status:4,label:"运行",value:0},{type:"GensetStop",status:5,label:"停机",value:0},{type:"GensetOffline",status:6,label:"离线",value:0},{type:"GensetAll",status:0,label:"全部",value:0}],warningdatas:[],realTimeData:{},warningDataTable:[],keepDataTable:[],showTabledialog:!1}},computed:n()({},Object(r.c)(["selectCrew"])),mounted:function(){var e=this;this.getCrewStatusCount(),this.setWarnKeepData(),this.animation=setInterval(function(){e.getCrewStatusCount(),e.setWarnKeepData()},6e4)},methods:{getCrewStatusCount:function(){var e=this;this.$api.equipment_old.findGenSetStatusCount().then(function(t){if(t.IsSuccess){var a=t.Data;e.tabs.forEach(function(e){e.value=a[e.type]})}})},setWarnKeepData:function(){var e=this;this.$api.screenData.FindGeneratorSetRadioIndexPage().then(function(t){if(t){var a=t.Data,i=a.AlarmList||[],n=a.RemindList||[],s=[],l=[];i.forEach(function(e,t){var a={order:t,time:Object(d.c)(e.Time).format("yyyy-MM-DD HH:mm:ss"),mchname:e.GensetName,divisionmch:"测试分机组",warningcontent:e.Content,warningtype:e.Type,operation:"查看"};s.push(a)}),n.forEach(function(e,t){var a={order:t,unit:e.GensetName,plandate:Object(d.c)(e.Time).format("YYYY-MM-DD"),type:e.Type,operation:"查看",keepContent:e.Content};l.push(a)}),e.warningdatas={d1:[].concat(o()(s.map(function(e){return"实时报警："+e.mchname+"-"+e.warningcontent}))),d2:[].concat(o()(l.map(function(e){return"保养提醒："+e.unit+e.keepContent})))},e.warningDataTable=s,e.keepDataTable=l}}).catch(function(e){console.log(e)})},warningClickHandler:function(){this.showTabledialog=!0},hiddenTabledialog:function(){this.showTabledialog=!1}},beforeDestroy:function(){clearInterval(this.animation)}},_={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"system-manage"}},[i("div",{staticClass:"warning-box",on:{click:e.warningClickHandler}},[i("el-carousel",{ref:"carousel",attrs:{height:"48px",interval:3e3,direction:"vertical","indicator-position":"none"}},[e._l(e.warningdatas.d1,function(t,n){return i("el-carousel-item",{key:"warningKey"+n},[i("el-row",{attrs:{align:"middle",justify:"center",type:"flex"}},[i("img",{staticClass:"img-warning",attrs:{src:a("x2cw")}}),e._v(" "),i("span",[e._v(e._s(t))])])],1)}),e._v(" "),e._l(e.warningdatas.d2,function(t,n){return i("el-carousel-item",{key:"warningKey2"+n},[i("el-row",{attrs:{align:"middle",justify:"center",type:"flex"}},[i("img",{staticClass:"img-warning",attrs:{src:a("pheV")}}),e._v(" "),i("span",[e._v(e._s(t))])])],1)})],2)],1),e._v(" "),i("div",{staticClass:"system-manage-content"},[i("div",{staticClass:"crew-monitor-item"},[i("div",{staticClass:"content-title"},[e._v("机组监控")]),e._v(" "),i("ul",{staticClass:"item-content"},e._l(e.tabs,function(t){return i("li",{key:t.status},[i("span",[e._v(e._s(t.value))]),e._v(" "),i("div",[e._v(e._s(t.label))])])}),0)]),e._v(" "),e._m(0),e._v(" "),e._m(1)]),e._v(" "),e.showTabledialog?i("table-dialog-warning",{attrs:{showTabledialog:e.showTabledialog},on:{hiddenTabledialog:e.hiddenTabledialog}}):e._e()],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contract-overview-item"},[a("div",{staticClass:"content-title"},[e._v("合同总览")]),e._v(" "),a("ul",{staticClass:"item-content"},[a("li",[a("span",[e._v("0")]),e._v(" "),a("div",[e._v("已到期")])]),e._v(" "),a("li",[a("span",[e._v("0")]),e._v(" "),a("div",[e._v("即将到期")])]),e._v(" "),a("li",[a("span",[e._v("0")]),e._v(" "),a("div",[e._v("今日新增")])]),e._v(" "),a("li",[a("span",[e._v("0")]),e._v(" "),a("div",[e._v("本月新增")])]),e._v(" "),a("li",[a("span",[e._v("0")]),e._v(" "),a("div",[e._v("合同总数")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pending-transactions-item"},[a("div",{staticClass:"content-title"},[e._v("待处理事务")]),e._v(" "),a("ul",{staticClass:"item-content"},[a("li",[a("span",[e._v("剩余7天即将到期合同")]),a("span",[e._v("(0)")])]),e._v(" "),a("li",[a("span",[e._v("待处理维修单")]),a("span",[e._v("(0)")])]),e._v(" "),a("li",[a("span",[e._v("待查看《用户满意度调查》")]),a("span",[e._v("(0)")])]),e._v(" "),a("li",[a("span",[e._v("已到期合同")]),a("span",[e._v("(0)")])]),e._v(" "),a("li",[a("span",[e._v("机组保养提醒")]),a("span",[e._v("(0)")])]),e._v(" "),a("li",[a("span",[e._v("已发货订单")]),a("span",[e._v("(0)")])]),e._v(" "),a("li",[a("span",[e._v("机组日常点检提醒")]),a("span",[e._v("(0)")])])])])}]};var v=a("VU/8")(m,_,!1,function(e){a("QLqj")},"data-v-5799f2cc",null).exports,h=a("0/jW"),f=a("6Vh6"),g={name:"ToggleCrewNoList",components:{PositionCascader:a("j9eq").a},data:function(){return{mchCode:null,mchType:null,mchPosition:null,operatingState:null,mchTypeOpt:[],operatingStateOpt:[]}},mounted:function(){this.getMchTypeOpt(),this.getOperatingStateOpt()},methods:{searchHandler:function(){var e=this.$data,t=e.mchCode,a=e.mchType,i=e.mchPosition,n=e.operatingState;this.$emit("searchHandler",{mchCode:t,mchType:a,mchPosition:i,operatingState:n})},positionChange:function(e){this.mchPosition=e},getMchTypeOpt:function(){this.mchTypeOpt=[{label:"单机组",value:1},{label:"并机组",value:2}]},getOperatingStateOpt:function(){this.operatingStateOpt=[{label:"报警",value:0},{label:"警告",value:1},{label:"运行",value:2},{label:"停机",value:3},{label:"离线",value:4}]}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"toggle-crew-no-list"},[a("el-row",{staticClass:"items",attrs:{type:"flex"}},[a("el-col",{attrs:{span:5}},[a("label",{staticClass:"label"},[e._v("机组编码： "),a("el-input",{attrs:{placeholder:"请输入机组编码"},model:{value:e.mchCode,callback:function(t){e.mchCode=t},expression:"mchCode"}})],1)]),e._v(" "),a("el-col",{attrs:{span:5}},[a("label",{staticClass:"label"},[e._v("机组类型： ")]),e._v(" "),a("el-select",{attrs:{"popper-append-to-body":!1,placeholder:"请选择机组类型"},model:{value:e.mchType,callback:function(t){e.mchType=t},expression:"mchType"}},e._l(e.mchTypeOpt,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("label",{staticClass:"label"},[e._v("机组位置： ")]),e._v(" "),a("position-cascader",{attrs:{placeholder:"请选择机组所在位置"},on:{positionChange:e.positionChange}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("label",{staticClass:"label"},[e._v("运行状态：")]),e._v(" "),a("el-select",{attrs:{"popper-append-to-body":!1,placeholder:"请选择运行状态"},model:{value:e.operatingState,callback:function(t){e.operatingState=t},expression:"operatingState"}},e._l(e.operatingStateOpt,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.searchHandler}},[e._v("搜索")])],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(g,w,!1,function(e){a("pD1r")},"data-v-44893fab",null).exports,C=a("UJFK"),y={name:"projectMonitor",components:{ProjectSelect:f.a,MchSelect:b,TransverseTable:C.a},data:function(){return{stateObj:{"报警":"#f1534f","警告":"#f2c614","运行":"#20be62","停机":"#f1534f","离线":"#808080","全部":"#000000"},stateNum:{"报警":0,"警告":1,"运行":2,"停机":3,"离线":4,"全部":10},tableData:[{mchCode:"FCZZL-21001",content:"发电A相电压低停机",time:"2022-1-12 11:22:01"},{mchCode:"FCZZL-21001",content:"发电A相电压低停机",time:"2022-1-12 11:22:01"},{mchCode:"FCZZL-21001",content:"发电A相电压低停机发电A相电压低停机发电A相电压低停机发电A相电压低停机",time:"2022-1-12 11:22:01"},{mchCode:"FCZZL-21001",content:"发电A相电压低停机",time:"2022-1-12 11:22:01"}],mchData:[{mchCode:"FPSS9487595950",mchType:"单机组",mchTotal:1,mchState:"正常运行",mchPosition:"成都市武侯区武汉大路",mchLoadTotal:3,hasSub:!1},{mchCode:"FPSS9487595950",mchType:"单机组",mchTotal:1,mchState:"警告",mchPosition:"成都市武侯区武汉大路",mchLoadTotal:3,hasSub:!1},{mchCode:"FPSS9487595950",mchType:"并机组主机1",mchTotal:1,mchState:"停机",mchPosition:"成都市武侯区武汉大路",mchLoadTotal:3,hasSub:!0,subMch:[{mchCode:"FPSS9487595950",mchType:"并机组1分机1",mchTotal:1,mchState:"正常运行",mchPosition:"成都市武侯区武汉大路",mchLoadTotal:3},{mchCode:"FPSS9487595950",mchType:"并机组1分机2",mchTotal:1,mchState:"离线",mchPosition:"成都市武侯区武汉大路",mchLoadTotal:3},{mchCode:"FPSS9487595950",mchType:"并机组1分机3",mchTotal:1,mchState:"报警",mchPosition:"成都市武侯区武汉大路",mchLoadTotal:3}]},{mchCode:"FPSS9487595950",mchType:"单机组",mchTotal:1,mchState:"警告",mchPosition:"成都市武侯区武汉大路",mchLoadTotal:3,hasSub:!1},{mchCode:"FPSS9487595950",mchType:"并机组主机2",mchTotal:1,mchState:"停机",mchPosition:"成都市武侯区武汉大路",mchLoadTotal:3,hasSub:!0,subMch:[{mchCode:"FPSS9487595950",mchType:"并机组分机1",mchTotal:1,mchState:"正常运行",mchPosition:"成都市武侯区武汉大路",mchLoadTotal:3},{mchCode:"FPSS9487595950",mchType:"并机组分机2",mchTotal:1,mchState:"离线",mchPosition:"成都市武侯区武汉大路",mchLoadTotal:3},{mchCode:"FPSS9487595950",mchType:"并机组分机3",mchTotal:1,mchState:"正常运行",mchPosition:"成都市武侯区武汉大路",mchLoadTotal:3}]}],checked:!1,loading:!1}},computed:{mchDataAll:function(){var e=this,t=[];return this.mchData.forEach(function(a){t.push(a),!0===a.hasSub&&!0===e.checked&&a.subMch.forEach(function(e){t.push(e)})}),t},disabled:function(){var e=!0;return this.mchData.map(function(t){t.hasSub&&(e=!1)}),e}},methods:{operatingHandler:function(e){this.$message("点击了故障诊断，机组编码为："+e.mchCode)},checkDetailHandler:function(){this.$message("点击了查看详细数据"),this.$emit("checkDetailHandler")},searchHandler:function(e){this.$message("点击了搜索"),console.log("点击了搜索",e)}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"projectMonitoring","element-loading-text":"拼命加载中，请稍后...","element-loading-spinner":"el-icon-loading","element-loading-background":"#9f9f9f91"}},[a("el-row",{staticClass:"project-select"},[a("project-select")],1),e._v(" "),a("el-row",{staticClass:"project-monitoring"},[a("el-row",{staticClass:"title content-title",attrs:{type:"flex",align:"middle"}},[e._v("\n      云端电站项目监控\n    ")]),e._v(" "),a("el-row",{staticClass:"project-data"},[a("el-row",{staticClass:"title"},[e._v("项目数据")]),e._v(" "),a("el-row",{staticClass:"card-box-head",attrs:{gutter:20,type:"flex"}},[a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-row",{staticClass:"card-box-head-label"},[a("el-col",[e._v("机组总数")]),e._v(" "),a("el-col",[e._v("5")])],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-row",{staticClass:"card-box-head-label"},[a("el-col",[e._v("单机台数")]),e._v(" "),a("el-col",[e._v("5")])],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-row",{staticClass:"card-box-head-label"},[a("el-col",[e._v("并机台数")]),e._v(" "),a("el-col",[e._v("5")])],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-row",{staticClass:"card-box-head-label"},[a("el-col",[e._v("合闸总数")]),e._v(" "),a("el-col",[e._v("5")])],1)],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("el-row",e._l(e.stateObj,function(t,i,n){return a("el-col",{key:n,attrs:{span:4}},[a("el-row",{staticClass:"card-box-head-label2"},[a("el-col",{style:{color:t}},[e._v(e._s(e.stateNum[i]))]),e._v(" "),a("el-col",[e._v(e._s(i))])],1)],1)}),1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"card-box-bottom",attrs:{gutter:20,type:"flex"}},[a("el-col",{attrs:{span:12}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("el-row",{staticClass:"card-box-bottom-label"},[a("el-col",[a("el-row",[a("el-col",{attrs:{span:12}},[e._v("实际总功")]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("总功率")])],1)],1),e._v(" "),a("el-col",[a("el-row",[a("el-col",{attrs:{span:12}},[e._v("5")]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("6")])],1)],1),e._v(" "),a("el-col",[e._v("机组群容量： 0.00")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("el-row",{staticClass:"card-box-bottom-label"},[a("el-col",[e._v("供电时长")]),e._v(" "),a("el-col",[e._v("5")]),e._v(" "),a("el-col",[e._v("上次供电时长： 0.00")])],1)],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"show-header":!1,height:120,"cell-style":{padding:"0",fontSize:".7rem"}}},[a("el-table-column",{attrs:{prop:"mchCode",label:"机组编码",width:"1"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"报警内容",width:"3"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"报警时间",width:"1"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"1"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.operatingHandler(t.row)}}},[e._v("故障诊断")])]}}])})],1)],1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"operating-data"},[a("el-row",{staticClass:"title"},[e._v("机组运行数据")]),e._v(" "),a("el-row",{staticClass:"mch-select"},[a("mch-select",{on:{searchHandler:e.searchHandler}})],1),e._v(" "),a("el-row",{staticClass:"mch-info-table"},[a("el-checkbox",{attrs:{disabled:e.disabled},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("展示并机组分机搜索结果")]),e._v(" "),a("transverse-table",{attrs:{mchData:e.mchDataAll}})],1),e._v(" "),a("el-row",{staticClass:"to-project-detail",attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{type:"text"},on:{click:e.checkDetailHandler}},[e._v(">>查看详细数据")])],1)],1)],1)],1)},staticRenderFns:[]};var S={name:"projectMonitoringDetail",data:function(){return{firstRequest:!0,crewList:[],myCharts:[],animation:null,option_1:{grid:{top:"16px",right:"16px",bottom:"16px",left:"16px",containLabel:!0},series:[{type:"gauge",radius:"90%",min:0,max:2e3,axisLine:{lineStyle:{width:5,color:[[.3,"#67e0e3"],[.7,"#37a2da"],[1,"#fd666d"]]}},pointer:{width:2,itemStyle:{color:"auto"}},axisTick:{distance:-5,length:2,lineStyle:{color:"#fff",width:1}},splitLine:{distance:-5,length:5,lineStyle:{color:"#fff",width:2}},axisLabel:{color:"#0099FF",distance:8,fontSize:8,formatter:function(e){return e.toFixed(0)}},detail:{valueAnimation:!0,formatter:" {value} RPM",color:"auto",fontSize:10,width:60,lineHeight:16,overflow:"break",offsetCenter:[0,"40%"]},data:[{value:0,name:"",title:{fontSize:10,offsetCenter:["0%","40%"]}}]}]},loading:!0,resizefun:null}},computed:{targetStatusText:function(e){var t=["故障","停机","怠速","额定转速","合闸待并机"];return function(e){return t[e]}}},mounted:function(){var e=this;this.getMchInfo(),setTimeout(function(){e.loading=!1},500),this.animation=setInterval(function(){e.getMchInfo()},5e3),this.resizefun=function(){e.myCharts.forEach(function(e){e.resize()})},window.addEventListener("resize",this.resizefun)},beforeDestroy:function(){clearInterval(this.animation),window.removeEventListener("resize",this.resizefun),this.resizefun=null},methods:{getMchInfo:function(){var e=this;this.crewList=[{ID:1,status:4,value:500,targetStatus:"4"},{ID:2,status:3,value:500,targetStatus:"0"},{ID:3,status:2,value:500,targetStatus:"1"},{ID:4,status:6,value:500,targetStatus:"2"},{ID:5,status:6,value:500,targetStatus:"3"},{ID:6,status:6,value:500,targetStatus:"4"}],this.firstRequest?this.$nextTick(function(){e.init()}):this.refreshData()},init:function(){var e=this;this.crewList.forEach(function(t){var a=document.getElementById("crew-speed-echart-"+t.ID),i=e.$echarts.init(a);e.option_1.series[0].data[0].value=t.value,i.setOption(e.option_1),e.myCharts.push(i)})},refreshData:function(){var e=this;this.crewList.forEach(function(t,a){e.option_1.series[0].data[0].value=t.value,e.myCharts[a].setOption(e.option_1)})}}},T={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"projectMonitoringDetail","element-loading-text":"拼命加载中，请稍后...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[e._m(0),e._v(" "),i("div",{staticClass:"statistical-data-box"},[i("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[i("el-col",{staticClass:"data-item-box",attrs:{span:8}},[i("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[i("el-col",{staticClass:"data-item",attrs:{span:6}},[i("p",[e._v("机组总数")]),e._v(" "),i("p",[e._v("3")])]),e._v(" "),i("el-col",{staticClass:"data-item",attrs:{span:6}},[i("p",[e._v("单机台数")]),e._v(" "),i("p",[e._v("3")])]),e._v(" "),i("el-col",{staticClass:"data-item",attrs:{span:6}},[i("p",[e._v("并机组数")]),e._v(" "),i("p",[e._v("3")])]),e._v(" "),i("el-col",{staticClass:"data-item",attrs:{span:6}},[i("p",[e._v("合闸总数")]),e._v(" "),i("p",[e._v("3")])])],1)],1),e._v(" "),i("el-col",{staticClass:"data-item-box",attrs:{span:8}},[i("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[i("el-col",{staticClass:"data-item",attrs:{span:6}},[i("p",[e._v("实际总功")]),e._v(" "),i("p",[e._v("3")])]),e._v(" "),i("el-col",{staticClass:"data-item",attrs:{span:6}},[i("p",[e._v("机组群容量")]),e._v(" "),i("p",[e._v("3")])]),e._v(" "),i("el-col",{staticClass:"data-item",attrs:{span:6}},[i("p",[e._v("总功率")]),e._v(" "),i("p",[e._v("2500")])]),e._v(" "),i("el-col",{staticClass:"data-item",attrs:{span:6}},[i("p",[e._v("供电时长")]),e._v(" "),i("p",[e._v("3")])]),e._v(" "),i("el-col",{staticClass:"data-item",attrs:{span:6}},[i("p",[e._v("上次供电时长")]),e._v(" "),i("p",[e._v("3")])])],1)],1),e._v(" "),i("el-col",{staticClass:"data-item-box",attrs:{span:8}},[i("el-row",{staticClass:"crew-status-num",attrs:{type:"flex",justify:"space-between",align:"middle"}},[i("el-col",{staticClass:"color_type_4",attrs:{span:4}},[i("span",{attrs:{title:"运行"}}),i("em",[e._v("0")])]),e._v(" "),i("el-col",{staticClass:"color_type_2",attrs:{span:4}},[i("span",{attrs:{title:"报警"}}),i("em",[e._v("0")])]),e._v(" "),i("el-col",{staticClass:"color_type_3",attrs:{span:4}},[i("span",{attrs:{title:"警告"}}),i("em",[e._v("0")])]),e._v(" "),i("el-col",{staticClass:"color_type_5",attrs:{span:4}},[i("span",{attrs:{title:"停机"}}),i("em",[e._v("0")])]),e._v(" "),i("el-col",{staticClass:"color_type_6",attrs:{span:4}},[i("span",{attrs:{title:"离线"}}),i("em",[e._v("0")])]),e._v(" "),i("el-col",{staticClass:"color_type_0",attrs:{span:4}},[i("span",{attrs:{title:"全部"}}),i("em",[e._v("0")])])],1)],1)],1)],1),e._v(" "),i("el-carousel",{ref:"carousel",staticClass:"warninginfo-box",attrs:{height:"48px",interval:3e3,direction:"vertical","indicator-position":"none"}},e._l(5,function(t,n){return i("el-carousel-item",{key:n},[i("el-row",{attrs:{align:"middle",justify:"center",type:"flex"}},[i("img",{staticClass:"img-warning",attrs:{src:a("x2cw")}}),e._v(" "),i("span",[e._v("FPSS7821010607 发电A相电压低停机 2021-10-01 21:21:09")]),e._v(" "),i("el-button",{staticClass:"mr16",attrs:{type:"text"}},[e._v("故障诊断")])],1)],1)}),1),e._v(" "),i("div",{staticClass:"crewinfo-box"},e._l(e.crewList,function(t){return i("div",{key:t.ID,staticClass:"crewinfo-item"},[i("div",{staticClass:"crew-info-echarts"},[i("div",{staticClass:"crew-info-power"},[e._m(1,!0),e._v(" "),i("div",{staticClass:"progress-box effective-power-box"},[i("el-progress",{attrs:{percentage:60,color:"#ec808d"}}),e._v(" "),i("p",[e._v("有效功率")])],1),e._v(" "),i("div",{staticClass:"progress-box invalid-power-box"},[i("el-progress",{attrs:{percentage:10,color:"#caf982"}}),e._v(" "),i("p",[e._v("无效功率")])],1)]),e._v(" "),i("div",{staticClass:"crew-speed-echart",attrs:{id:"crew-speed-echart-"+t.ID}})]),e._v(" "),i("div",{class:["crew-info-box","color_type_"+t.status]},[e._m(2,!0),e._v(" "),e._m(3,!0),e._v(" "),e._m(4,!0),e._v(" "),i("div",{staticClass:"crew-info-item crew-info-item5"},[i("p",[i("span",[e._v("机组当前状态")]),i("em",[e._v(e._s(e.targetStatusText(t.targetStatus)))])]),e._v(" "),e._m(5,!0),e._v(" "),e._m(6,!0),e._v(" "),e._m(7,!0),e._v(" "),e._m(8,!0),e._v(" "),e._m(9,!0),e._v(" "),"4"===t.targetStatus?i("p",[i("span",[e._v("相位差")]),i("em",[e._v("--")])]):e._e()])]),e._v(" "),i("p",{staticClass:"crew-type"},[e._v("单机组监控")])])}),0)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"creat-info-box"},[t("div",{staticClass:"content-title"},[this._v("_详细数据")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"target-power-box"},[a("em",{staticClass:"left-text"},[e._v("目"),a("br"),e._v("标"),a("br"),e._v("功"),a("br"),e._v("率")]),e._v(" "),a("span"),e._v(" "),a("em",{staticClass:"right-text"},[e._v("500"),a("br"),e._v("Kw")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crew-info-item crew-info-item1"},[a("div",[a("span",{staticClass:"tip"}),e._v(" "),a("span",{staticClass:"name"},[e._v("FPSS7821120098")]),e._v(" "),a("span",{staticClass:"type"},[e._v("并机组")])]),e._v(" "),a("p",[e._v("并机组分机")]),e._v(" "),a("p",[e._v("成都市武侯区武汉大路")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crew-info-item crew-info-item2"},[a("p",[a("span",[e._v("水温")]),a("em",[e._v("81℃")])]),e._v(" "),a("p",[a("span",[e._v("油压")]),a("em",[e._v("428KPa")])]),e._v(" "),a("p",[a("span",[e._v("转速")]),a("em",[e._v("1503RPM")])]),e._v(" "),a("p",[a("span",[e._v("油耗")]),a("em",[e._v("2107L")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crew-info-item crew-info-item3"},[a("p",[a("span",[e._v("功率因数")]),a("em",[e._v("0.80")])]),e._v(" "),a("p",[a("span",[e._v("负载功率")]),a("em",[e._v("300Kw")])]),e._v(" "),a("p",[a("span",[e._v("线电流")]),a("em")]),e._v(" "),a("p",[a("span",[e._v("负载分配差")]),a("em")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("span",[this._v("负荷百分比")]),t("em",[this._v("0.80")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("span",[this._v("相电压")]),t("em",[this._v("300Kw")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("span",[this._v("线电压")]),t("em")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("span",[this._v("频率")]),t("em")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("span",[this._v("电度")]),t("em")])}]};var k={name:"projectMonitoring",components:{ProjectMonitor:a("VU/8")(y,D,!1,function(e){a("OstL")},"data-v-d9c0ff74",null).exports,projectMonitoringDetail:a("VU/8")(S,T,!1,function(e){a("ufeR"),a("Nst4")},"data-v-2857ea0e",null).exports},data:function(){return{pageFlag:this.$route.query.pageFlag||1}},watch:{$route:{handler:function(e,t){this.pageFlag=this.$route.query.pageFlag||1},deep:!0}},methods:{checkDetailHandler:function(){this.pageFlag=2}}},x={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("BMainTopComponent"),this._v(" "),1===this.pageFlag?t("ProjectMonitor",{on:{checkDetailHandler:this.checkDetailHandler}}):t("projectMonitoringDetail")],1)},staticRenderFns:[]},I=a("VU/8")(k,x,!1,null,null,null).exports,$=a("A1gM"),L={name:"home",components:{ToggleCrew:s.a,systemManage:v,sensorMonitor:h.a,projectMonitor:I,CrewMonitor:$.a},data:function(){return{tabs:[{label:"运维统计",value:1,linkUrl:""},{label:"机组监控",value:2,linkUrl:""},{label:"传感器监控",value:3,linkUrl:""}],selectTab:1,isShowBackBtn:!("4"!==this.$route.query.type||"2"!==this.$route.query.pageFlag)}},computed:n()({},Object(r.c)(["selectCrew"]),{linkUrl:function(){var e=this;if(2===this.selectTab)return this.tabs.filter(function(t){return t.value===e.selectTab})[0].linkUrl}}),watch:{$route:{handler:function(e,t){e.query.type?this.selectTab=e.query.type:this.selectTab=1,"4"===e.query.type&&"2"===e.query.pageFlag?this.isShowBackBtn=!0:this.isShowBackBtn=!1},deep:!0}},mounted:function(){this.$route.query.type&&(this.selectTab=this.$route.query.type)},methods:{changeTab:function(e){this.$router.push({path:"/operation/operationStatistics",query:{type:e}})}}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("BMainTopComponent",{attrs:{isShowBackBtn:e.isShowBackBtn}}),e._v(" "),a("div",{attrs:{id:"home-page"}},[a("div",{staticClass:"tab-box"},e._l(e.tabs,function(t){return a("el-button",{key:t.value,class:["status-tab",{"select-tab":e.selectTab==t.value}],on:{click:function(a){return e.changeTab(t.value)}}},[e._v(e._s(t.label))])}),1),e._v(" "),1==e.selectTab?a("system-manage"):e._e(),e._v(" "),2==e.selectTab?a("crew-monitor",{staticClass:"crew-monitor-info"}):e._e(),e._v(" "),3==e.selectTab?a("sensor-monitor",{staticClass:"sensor-monitor-info",attrs:{isShow:!1}}):e._e(),e._v(" "),4==e.selectTab?a("project-monitor",{staticClass:"project-monitor-info"}):e._e()],1)],1)},staticRenderFns:[]};var M=a("VU/8")(L,V,!1,function(e){a("5WTO")},"data-v-d993d916",null);t.default=M.exports},Nst4:function(e,t){},OstL:function(e,t){},QLqj:function(e,t){},UJFK:function(e,t,a){"use strict";var i={name:"TransverseTable",data:function(){return{stateColor:{"报警":"#f1534f","警告":"#f2c614","正常运行":"#20be62","停机":"#f1534f","离线":"#808080","全部":"#000000"}}},props:{mchData:{type:Array,default:function(e){return[]}}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"transverse-table"},[e._m(0),e._v(" "),a("div",{staticClass:"items"},e._l(e.mchData,function(t,i){return a("div",{key:i,staticClass:"item"},[a("div",{staticClass:"head-box"},[e._v(e._s(t.code))]),e._v(" "),e._l(t.data,function(t,i){return a("div",{key:i},[e._v(e._s(t))])})],2)}),0)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"head",attrs:{type:"flex",align:"middle"}},[a("div",{staticClass:"head-box"}),e._v(" "),a("div",[e._v("优先级")]),e._v(" "),a("div",[e._v("可用状态")]),e._v(" "),a("div",[e._v("机组位置")]),e._v(" "),a("div",[e._v("最大功率")]),e._v(" "),a("div",[e._v("限制功率")]),e._v(" "),a("div",[e._v("投入状态")]),e._v(" "),a("div",[e._v("机组寿命")]),e._v(" "),a("div",[e._v("平均无故障时间")]),e._v(" "),a("div",[e._v("待载个数")])])}]};var s=a("VU/8")(i,n,!1,function(e){a("mSck")},"data-v-38c786fa",null);t.a=s.exports},ZldE:function(e,t){},bXqF:function(e,t){},lVJv:function(e,t){},lqwT:function(e,t){},mSck:function(e,t){},pD1r:function(e,t){},ufeR:function(e,t){}});
//# sourceMappingURL=17.392bcc8faf1c8d65b524.js.map