webpackJsonp([9],{"1kPL":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("oqQY"),i=a.n(o),l=a("NYxO"),p=a("X2Oc"),u=[{label:"类型",prop:"type",props:{}},{label:"操作人",prop:"operating_people"},{label:"操作时间",prop:"operating_time"}],s={name:"CrewRecordOperating",components:{ToggleCrew:a("5w7s").a},data:function(){return{columns:u,dataSource:[],dataTotal:0,options:{index:!0,labelIndex:"序号"},paginationCfg:{currentPage:1,pageSize:10,layout:"total, sizes, prev, pager, next, jumper",pageSizes:[10,20,30,40]},data:[],value_date:[new Date((new Date).setDate((new Date).getDate()-7)),new Date],value_type:"0",queryOpt:{},typeOpt:{0:"全部",1:"停机按键",2:"手动按键",3:"模拟按键",4:"自动按键",5:"静音按键",6:"开机按键",7:"发电合闸",8:"市电合闸",9:"报警复位",10:"发电分闸",11:"市电分闸"}}},watch:{selectCrew:{handler:function(e){this._query()}}},created:function(){this.queryOpt={value_date:this.value_date,value_type:this.value_type}},computed:r()({},Object(l.c)(["selectCrew"])),mounted:function(){this._query()},methods:{queryTableData:function(){var e=this,t={pageSize:this.paginationCfg.pageSize,page:this.paginationCfg.currentPage},a={DateStart:i()(this.queryOpt.value_date[0]).format("YYYY-MM-DD"),DateEnd:i()(this.queryOpt.value_date[1]).format("YYYY-MM-DD"),Type:Number(this.queryOpt.value_type)||-1,GeneratorSetId:this.selectCrew.ID};this.$api.equipment.getOperateRecords(a,t).then(function(t){var a=!!t&&!!t.Data&&t.Data;if(a){var n=[],r=a.Data;!r||0===r.length||r.forEach(function(t,a){var r={key:a,type:e.typeOpt[t.Type],content:t.Content,operating_people:t.UserName,operating_time:Object(p.c)(t.Creare_Time).format("YYYY-MM-DD HH:mm:ss")};n.push(r)}),e.dataTotal=a.TotalItemCount,e.$set(e,"dataSource",n)}}).catch(function(){})},handleNewJump:function(e){},handleChangePage:function(e){this.paginationCfg.currentPage=e,this.queryTableData()},handleChangeSize:function(e){this.paginationCfg.currentPage=1,this.paginationCfg.pageSize=e,this.queryTableData()},_query:function(){this.paginationCfg.currentPage=1,this.queryOpt={value_date:this.value_date,value_type:this.value_type},this.queryTableData()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("BMainTopComponent"),e._v(" "),a("el-container",[a("el-main",[a("div",{attrs:{id:"crew-record-operating"}},[a("el-card",{attrs:{shadow:"never"}},[a("div",{staticClass:"block"},[a("span",[e._v("筛选：")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"yyyy-MM-dd","popper-append-to-body":!1,placement:"bottom-start"},model:{value:e.value_date,callback:function(t){e.value_date=t},expression:"value_date"}})],1),e._v(" "),a("el-row",{attrs:{type:"flex",align:"middle"}},[e._v("\n                类型：\n            "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value_type,callback:function(t){e.value_type=t},expression:"value_type"}},e._l(e.typeOpt,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e._query}},[e._v("搜索")])],1),e._v(" "),a("el-card",{attrs:{shadow:"never"}},[a("table-list",{attrs:{options:e.options,columns:e.columns,dataSource:e.dataSource,dataTotal:e.dataTotal,pagination:e.paginationCfg},on:{handleChangePage:e.handleChangePage,handleChangeSize:e.handleChangeSize}})],1)],1)]),e._v(" "),a("toggle-crew")],1)],1)},staticRenderFns:[]};var d=a("VU/8")(s,c,!1,function(e){a("iwCJ")},"data-v-7ffd213e",null);t.default=d.exports},iwCJ:function(e,t){}});
//# sourceMappingURL=9.bb501862e18803f3a3ea.js.map