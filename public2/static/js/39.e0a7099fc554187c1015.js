webpackJsonp([39],{CFHN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("fALy"),s=a("FkJj"),l=s.a.WorkOrderTypeEnum,i=s.a.WorkOrderStatusEnum,u={name:"UserFeedbackList",mixins:[o.a],data:function(){return{loading:!1,searchForm:{name:"",type:"-1",Status:"-1"},WorkOrderTypeEnum:l,WorkOrderStatusEnum:i,columns:s.a.userFeedbackColumns(this),dataSource:[],options:{height:"100%",index:!0,labelIndex:"序号",props:{width:126}},crewManageVisible:!1}},mounted:function(){this.queryTableData()},methods:{queryTableData:function(){var e=this;this.loading=!0;var t={Page:this.paginationCfg.currentPage,PageSize:this.paginationCfg.pageSize},a=r()({},this.searchForm);console.log(a,t),this.$api.operation.getGensetProjectFeedbackManage(a,t).then(function(t){1===t.Code&&(e.dataTotal=t.Data.TotalItemCount,e.$set(e,"dataSource",t.Data.Data)),e.loading=!1}).catch(function(){e.loading=!1})},reset:function(){this.$set(this,"searchForm",{name:"",type:"-1",Status:"-1"})},handleShow:function(e){this.$router.push({path:"/operation/feedbackDetails",query:{feedbackId:e.FeedbackId,feedBackInfo:e}})},handleClose:function(e){var t=this,a=this.$createElement;this.$confirm("操作提示",{title:"关闭工单",message:a("div",[a("p",[a("span","确定关闭当前工单吗？")])]),confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:e.FeedbackId};t.$api.operation.closeGensetProjectFeedback({},a).then(function(e){1===e.Code?(t.$message({type:"success",message:"关闭工单成功!"}),t.queryTableData()):t.$message({type:"error",message:"关闭工单失败，请重新尝试!"})}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消"})})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("BMainTopComponent"),e._v(" "),a("div",{staticClass:"user-feedback"},[a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-item"},[a("span",[e._v("反馈人:")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("div",{staticClass:"search-item"},[a("span",[e._v("工单分类:")]),e._v(" "),a("el-select",{attrs:{"popper-append-to-body":!1,placeholder:"请选择工单分类"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("el-option",{attrs:{label:"全部",value:"-1"}}),e._v(" "),e._l(e.WorkOrderTypeEnum,function(e,t){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),a("div",{staticClass:"search-item"},[a("span",[e._v("工单状态:")]),e._v(" "),a("el-select",{attrs:{"popper-append-to-body":!1,placeholder:"请选择工单状态"},model:{value:e.searchForm.Status,callback:function(t){e.$set(e.searchForm,"Status",t)},expression:"searchForm.Status"}},[a("el-option",{attrs:{label:"全部",value:"-1"}}),e._v(" "),e._l(e.WorkOrderStatusEnum,function(e,t){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),a("div",{staticClass:"search-btn-box"},[a("el-button",{staticClass:"reset-btn",attrs:{type:"text"},on:{click:function(t){return e.reset()}}},[e._v("清空筛选")]),e._v(" "),a("el-button",{staticClass:"query-btn",attrs:{type:"primary"},on:{click:function(t){return e.queryTableData()}}},[e._v("查 询")])],1)]),e._v(" "),a("TableList",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{options:e.options,columns:e.columns,dataSource:e.dataSource,dataTotal:e.dataTotal,pagination:e.paginationCfg,border:""},on:{handleChangePage:e.handleChangePage,handleChangeSize:e.handleChangeSize}},[a("el-table-column",e._b({attrs:{slot:"operation",label:"操作",align:"center"},slot:"operation",scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"operate-group"},[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleShow(t.row)}}},[e._v(" 查看 ")]),e._v(" "),3!==t.row.Status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleClose(t.row)}}},[e._v("\n              关闭\n            ")]):e._e()],1)]}}])},"el-table-column",e.options&&e.options.props,!1))],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(u,c,!1,function(e){a("HUqX")},"data-v-5b6f84bd",null);t.default=d.exports},FkJj:function(e,t,a){"use strict";var n=[{value:0,label:"项目建议"},{value:1,label:"投诉"},{value:2,label:"其他"}],r=[{value:1,label:"待处理"},{value:2,label:"待确认"},{value:3,label:"已关闭"}];t.a={WorkOrderTypeEnum:n,WorkOrderStatusEnum:r,userFeedbackColumns:function(e){return[{label:"工单分类",prop:"Sort",minWidth:"15%",formatter:function(e,t,a){return n.find(function(t){return t.value==e.Sort}).label}},{label:"问题标题",prop:"FeedbackTitle",minWidth:"25%"},{label:"反馈人",prop:"CreateUserName",minWidth:"15%"},{label:"提交时间",prop:"CreateTime",minWidth:"20%",formatter:function(t,a,n){return t.CreateTime?e.$moment(t.CreateTime).format("yyyy-MM-DD HH:mm:ss"):""}},{label:"工单状态",prop:"Status",minWidth:"15%",formatter:function(e,t,a){return e.Status?r.find(function(t){return t.value==e.Status}).label:""}}]}}},HUqX:function(e,t){}});
//# sourceMappingURL=39.e0a7099fc554187c1015.js.map