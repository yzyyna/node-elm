webpackJsonp([3,14],{"/z1V":function(e,t){},"0/jW":function(e,t,a){"use strict";var n=a("fZjL"),i=a.n(n),s=a("Dd8w"),r=a.n(s),l=a("YT+p"),o=a.n(l),c=a("NYxO"),u=a("X2Oc"),d={name:"GensetInfo",inject:["reload"],props:{gensetInfo:{type:Object,default:null}},data:function(){return{GensetInfo:null,GensetMchInfo:null,showByCrewStatus:u.g,url:a("3xIo"),isShowDrawer:!1,direction:"rtl",activeName:"1"}},computed:r()({},Object(c.c)(["selectCrew","GensetBrowseRecords"])),watch:{gensetInfo:{handler:function(e,t){this.GensetMchInfo=e},deep:!0}},mounted:function(){this.getGeneratorSet()},methods:r()({},Object(c.b)(["toggleSelectCrew"]),{getGeneratorSet:function(){var e=this;this.$api.operation.FindGeneratorSet({id:this.selectCrew.ID}).then(function(t){e.GensetInfo=t.Data})},getUrl:function(e){return a("fO1v")("./signal_"+e+".png")},handleRefresh:function(){this.reload()},handleClickTab:function(){console.log(this.activeName)},toggleCrew:function(e){if(e.ID)return this.isShowDrawer=!1,void this.toggleSelectCrew(e);this.$message({type:"error",message:"请选择机组！"})},toggleIsExpandClick:function(e){this.isShowDrawer=e},handleClose:function(e){this.isShowDrawer=!1}})},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"genset-info"},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticClass:"genset-info-items genset-info-basic",attrs:{span:12}},[a("span",{staticClass:"genset-info-item genset-name"},[e._v(e._s(e.selectCrew.DisplayName))]),e._v(" "),0!=e.selectCrew.Status?a("div",{staticClass:"genset-info-item"},[2==e.selectCrew.NetworkType?a("el-image",{staticStyle:{width:"20px",height:"20px"},attrs:{src:e.url}}):1==e.selectCrew.NetworkType?a("el-image",{staticStyle:{width:"20px",height:"20px"},attrs:{src:e.getUrl(""+e.selectCrew.NetworkValue)}}):e._e()],1):e._e(),e._v(" "),a("el-tag",{staticClass:"genset-info-item",style:{background:e.showByCrewStatus(e.selectCrew.Status).color,color:1==e.selectCrew.Status||2==e.selectCrew.Status?"#000":"#fff"}},[e._v(e._s(e.showByCrewStatus(e.selectCrew.Status).text)+"\n      ")]),e._v(" "),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:e.GensetMchInfo&&e.GensetMchInfo.Temperature,expression:"GensetMchInfo && GensetMchInfo.Temperature"}],staticClass:"genset-info-item genset-temperature"},[e._v("温度"+e._s(e.GensetMchInfo&&e.GensetMchInfo.Temperature||"-")+"\n      ")]),e._v(" "),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:e.GensetMchInfo&&e.GensetMchInfo.Windage,expression:"GensetMchInfo && GensetMchInfo.Windage"}],staticClass:"genset-info-item genset-windage"},[e._v("风阻"+e._s(e.GensetMchInfo&&e.GensetMchInfo.Windage||"-")+"\n      ")]),e._v(" "),a("el-tag",{staticClass:"genset-info-item genset-altitude"},[e._v("\n        海拔"+e._s(e.GensetInfo&&e.GensetInfo.Altitude||"-")+"m\n      ")])],1),e._v(" "),a("el-col",{staticClass:"genset-info-items operate-btns",attrs:{span:12}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.GensetMchInfo&&e.GensetMchInfo.CollectorTime,expression:"GensetMchInfo && GensetMchInfo.CollectorTime"}],attrs:{title:"数据每隔3秒更新一次"}},[e._v("\n        数据最近更新时间："+e._s(e.GensetMchInfo&&e.GensetMchInfo.CollectorTime)+"\n      ")]),e._v(" "),a("i",{staticClass:"genset-info-item el-icon-refresh",attrs:{title:"点击刷新页面"},on:{click:function(t){return e.handleRefresh()}}}),e._v(" "),a("i",{staticClass:"genset-info-item el-icon-time",attrs:{title:"机组浏览足迹"},on:{click:function(t){return e.toggleIsExpandClick(!0)}}})])],1),e._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticClass:"genset-info-items genset-info-more"},[a("span",[e._v("机组编号："+e._s(e.selectCrew.CollectorToken))]),e._v(" "),a("span",[e._v("发动机型号："+e._s(e.GensetInfo&&e.GensetInfo.EngineModel||"-"))]),e._v(" "),a("span",[e._v("功率(KW)："+e._s(e.GensetInfo&&e.GensetInfo.RatedPower||"-"))]),e._v(" "),a("span",[e._v("累计运行时长："+e._s(e.GensetInfo&&e.GensetInfo.TotalRunTime||"-"))]),e._v(" "),a("span",[e._v("当前位置："+e._s(e.GensetInfo&&e.GensetInfo.InstallationSite||"-"))])])],1),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"维保监控",name:"1"}})],1),e._v(" "),a("el-drawer",{attrs:{title:"",visible:e.isShowDrawer,direction:e.direction,"with-header":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.isShowDrawer=t}}},[a("div",{staticClass:"toggle-crew-list"},[a("p",{staticClass:"content-title"},[a("span",[e._v("机组浏览足迹\n          "),a("i",{staticClass:"genset-info-item el-icon-question",attrs:{title:"若退出账号或清理浏览器缓存，浏览足迹将被清空"}})]),e._v(" "),a("i",{staticClass:"el-icon-close",on:{click:function(t){return e.toggleIsExpandClick(!1)}}})]),e._v(" "),a("div",{staticClass:"genset-container"},[e.GensetBrowseRecords&&e.GensetBrowseRecords.length>0?a("div",{staticClass:"genset-list"},e._l(e.GensetBrowseRecords,function(t,n){return a("el-row",{key:n,staticClass:"item-box",class:{active:t.ID===e.selectCrew.ID},nativeOn:{click:function(a){return e.toggleCrew(t)}}},[a("div",[a("div",{staticClass:"color_type"},[a("span",{style:{background:e.showByCrewStatus(t.Status).color}})]),e._v(" "),a("div",{staticClass:"name-text SingleLineHiding",attrs:{title:t.DisplayName}},[e._v("\n                "+e._s(t.DisplayName)+"\n              ")]),e._v(" "),0!=t.Status?a("div",[2==t.NetworkType?a("el-image",{staticStyle:{width:"20px",height:"20px"},attrs:{src:e.url}}):1==t.NetworkType?a("el-image",{staticStyle:{width:"20px",height:"20px"},attrs:{src:e.getUrl(""+t.NetworkValue)}}):e._e()],1):e._e()]),e._v(" "),a("div",[a("span",{staticClass:"status-text"},[e._v("\n                "+e._s(e.showByCrewStatus(t.Status).text)+"\n              ")]),e._v(" "),a("span",{staticClass:"address-text SingleLineHiding",attrs:{title:t.InstallationSite}},[e._v("\n                "+e._s(t.InstallationSite)+"\n              ")])])])}),1):a("p",{staticClass:"no-data"},[e._v("暂无记录！")])])])])],1)},staticRenderFns:[]};var m=a("VU/8")(d,p,!1,function(e){a("bXqF")},"data-v-a0fd288e",null).exports,f=a("5w7s"),h=[{prop:"date",label:"日期",width:"150"},{prop:"name",label:"姓名",width:"150"},{prop:"sex",label:"年龄",width:"150"},{prop:"province",label:"省份",width:""},{prop:"city",label:"城市",width:"150"},{prop:"address",label:"地址",width:"150"}],v=[{date:"2022-3-14",name:"爱新觉罗",province:"上海",city:"普陀区",address:"上海市普陀区金沙江路 1518 弄",zip:200333,sex:18},{date:"2022-3-14",sex:18,name:"爱新觉罗",province:"上海",city:"普陀区",address:"上海市普陀区金沙江路 1518 弄",zip:200333},{date:"2022-3-14",name:"爱新觉罗",sex:18,province:"上海",city:"普陀区",address:"上海市普陀区金沙江路 1518 弄",zip:200333}],_=a("M4fF"),g=a.n(_),y={data:function(){return{new_date_json:{},multipleSelection:[],is_edit:!0,is_delete:!0,selection:!1,radio:!0,space_color:!1,table_data:[]}},props:{labelText:{type:Object,default:function(e){return{add:"添加项目",edit:"编辑",save:"确定",delete:"删除"}}},table_columns:{type:Array,default:function(e){return h}},dataArray:{type:Array,default:function(e){return v}}},watch:{space_color:function(){this.$nextTick(function(){this.tableRowClassName()})},table_data:{handler:function(e,t){var a=this;console.log(e,t),this.$emit("dataChange",{data:e}),this.$nextTick(function(){a.tableRowClassName()})},deep:!0}},methods:{tableRowClassName:function(){var e=this.$refs.myTable.$el.getElementsByTagName("tbody")[0].getElementsByTagName("tr");for(var t in e)t%2==0&&(this.space_color?e[t].style.backgroundColor="#f0f9eb":e[t].style.backgroundColor="")},handleSelectionChange:function(e){this.multipleSelection=e},handleEdit:function(e,t){t.edit=!0},handleDelete:function(e,t){var a=this;console.log(e,t);var n=this.table_data.findIndex(function(e){return e==t});t.add?this.table_data.splice(n,1):this.$confirm("","",{message:'是否确定<span style="color:red;font-weight:bold">删除</span>该项目？',dangerouslyUseHTMLString:!0}).then(function(e){var i=r()({},t,{MaintenanceItemId:-1});a.table_data.splice(n,1,i)}).catch(function(){return!1})},handleSave:function(e,t){t.edit=!1,delete this.table_data[e].add,this.$message({message:"操作成功！",type:"success"})},handleAdd:function(){var e=this,t={};for(var a in this.new_date_json)"edit"===a?delete t[a]:"add"===a?delete t[a]:t[a]=null;t.edit=!0,t.add=!0,console.log("handleAdd",t),this.table_data.push(t),this.$nextTick(function(){e.$emit("addDataItem")})},initEditAttribute:function(){this.edit;var e=g.a.cloneDeep(this.dataArray);if(e.length>0){for(var t in e)e[t].edit=!0,this.table_data.push(e[t]);0===i()(this.new_date_json).length&&this.initAddDataJson(e[0])}},initAddDataJson:function(e){var t=e,a={};for(var n in t)a[n]="edit"===n?"true":"";a.add=!0,this.new_date_json=a}},created:function(){},mounted:function(){this.initEditAttribute(),this.$nextTick(function(){this.tableRowClassName()})}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{ref:"myTable",staticStyle:{width:"100%"},attrs:{data:e.table_data.filter(function(e){return-1!==e.MaintenanceItemId})},on:{"selection-change":e.handleSelectionChange}},[e.radio?a("el-table-column",{attrs:{type:"index",width:"50"}}):e._e(),e._v(" "),e.selection?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),e._l(e.table_columns,function(t,n,i){return a("el-table-column",{key:i,attrs:{align:"center",item:t,index:n,label:t.label},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.edit&&"ItemContent"===t.prop?a("el-input",{attrs:{size:"small",placeholder:"请输入"+t.label},model:{value:n.row[t.prop],callback:function(a){e.$set(n.row,t.prop,a)},expression:"scope.row[item.prop]"}}):e._e(),e._v(" "),n.row.edit&&"ItemContent"!==t.prop?a("el-input-number",{attrs:{min:0,"controls-position":"right",placeholder:"请输入"+t.label},model:{value:n.row[t.prop],callback:function(a){e.$set(n.row,t.prop,a)},expression:"scope.row[item.prop]"}}):e._e(),e._v(" "),n.row.edit?e._e():a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.is_delete?a("el-button",{attrs:{size:"mini",plain:!0,type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v(e._s(e.labelText.delete))]):e._e()]}}])})],2)],1)},staticRenderFns:[]};var C=a("VU/8")(y,b,!1,function(e){a("lqwT")},"data-v-4e4930ff",null).exports,D=a("I4G/"),w=[{prop:"fpie_006_12",name:"燃油油水比重-%"},{prop:"fpie_006_02",name:"进油管空气分离器-%"},{prop:"fpie_006_22",name:"底座燃油箱液位-%"},{prop:"fpie_006_23",name:"底座燃油箱液位-L"},{prop:"fpie_006_32",name:"油底壳机油液位-%"},{prop:"fpie_006_42",name:"补机油箱液位-%"},{prop:"fpie_006_43",name:"补机油箱液位-L"},{prop:"fpie_006_92",name:"待滤箱液位-%"},{prop:"fpie_006_93",name:"待滤箱液位-L"},{prop:"fpie_006_62",name:"废液箱液位-%"},{prop:"fpie_006_63",name:"废液箱液位-L"},{prop:"fpie_006_51",name:"冷却水箱状态"},{prop:"fpie_007_02",name:"冷却水温度"},{prop:"fpie_007_03",name:"A相电流"},{prop:"fpie_007_04",name:"B相电流"},{prop:"fpie_007_05",name:"C相电流"},{prop:"fpie_007_06",name:"AC相电压"}],k=[{key:"1",name:"机组视频",tip:"视频开关",props:"fpie_007_11",openCode:"41",closeCode:"42"},{key:"2",name:"排水电磁阀",tip:"燃油排水",props:"fpie_006_15",openCode:"47",closeCode:"48"},{key:"3",name:"燃油排气泵",tip:"燃油排气",props:"fpie_006_04",openCode:"45",closeCode:"46"},{key:"4",name:"燃油加热器",tip:"燃油加热",props:"fpie_006_16",openCode:"39",closeCode:"40"},{key:"5",name:"水套加热器",tip:"水套加热",props:"fpie_007_01",openCode:"37",closeCode:"38"},{key:"6",name:"补机油补油泵",tip:"油底壳补油",props:"fpie_006_45",openCode:"33",closeCode:"34"},{key:"7",name:"待滤油箱抽油泵",tip:"油底壳抽油",props:"fpie_006_95",openCode:"31",closeCode:"32"}],T=[{prop:"ItemContent",label:"维保事项",width:"100"},{prop:"DefaultHourSetting",label:"运行时间(h)",width:"100"},{prop:"DefaultDaySetting",label:"绝对时间(天)",width:"100"}],x={name:"sensorMonitor",inject:["reload"],components:{GensetInfo:m,ToggleCrew:f.a,EditTable:C,ControllerConfiguration:D.default},props:{isShow:{type:Boolean,default:!0}},data:function(){return{IsVideo:null,videoH5Url:null,switchStatus:{"1_flag":!1,"2_flag":!1,"3_flag":!1,"4_flag":!1,"5_flag":!1,"6_flag":!1,"7_flag":!1},resizefun:null,animation:null,myCharts:[],myLiquidfillCharts:[],colors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}],CollectorTime:"",realTimeData:{},GeneratorSetInfo:{},IsFirstRequst:!0,colLeft:9,colRight:15,echart_arr:[{id:"monitor-gauge-1",des:"燃油油水比重",key:"fpie_006_12",value:0,unit:"%",min:0,max:100,IsRender:!1,seriesType:"gauge",axisLineSetting:[[.2,"#228b22"],[.8,"#f59a23"],[1,"#d9001b"]]},{id:"monitor-gauge-2",des:"进油管空气分离器",key:"fpie_006_02",value:0,unit:"%",min:0,max:100,IsRender:!1,seriesType:"gauge",axisLineSetting:[[.2,"#228b22"],[.8,"#f59a23"],[1,"#d9001b"]]},{id:"monitor-liquidfill-1",des:"燃油箱余量",key:"fpie_006_22",realKey:"fpie_006_23",value:0,unit:"L",min:0,max:700,IsRender:!1,seriesType:"liquidFill"},{id:"monitor-gauge-3",des:"油底壳机油液位",key:"fpie_006_32",value:0,unit:"%",min:0,max:100,IsRender:!1,seriesType:"gauge",axisLineSetting:[[.2,"#d9001b"],[.8,"#f59a23"],[1,"#228b22"]]},{id:"monitor-liquidfill-2",des:"补机油箱液位",key:"fpie_006_42",realKey:"fpie_006_43",value:0,unit:"L",min:0,max:120,IsRender:!1,seriesType:"liquidFill"},{id:"monitor-liquidfill-3",des:"待滤油箱液位",key:"fpie_006_92",realKey:"fpie_006_93",value:0,unit:"L",min:0,max:120,IsRender:!1,seriesType:"liquidFill"},{id:"monitor-liquidfill-4",des:"废液箱液位",key:"fpie_006_62",realKey:"fpie_006_63",value:0,unit:"L",min:0,max:223,IsRender:!1,seriesType:"liquidFill"}],loading:!0,showStrategyItemList:null,editDialigVisible:!1,GensetSettingDetail:null,table_columns:T,StrategyItemList:null,matterListDialigVisible:!1,showDetailDialigVisible:!1,configData:null,showRecordsDialigVisible:!1,searchForm:{keyWord:"",searchTime:null},pickerTime:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}},dataSource:[{date:"2022-06-10",person:"姜波",tableData:[{name:"维保事项1",data:"运行：500h/480h    绝对：800/480h"},{name:"维保事项2",data:"运行：500h/480h    绝对：800/480h"}]},{date:"2022-06-12",person:"姜波",tableData:[{name:"维保事项1",data:"运行：500h/480h    绝对：800/480h"},{name:"维保事项2",data:"运行：500h/480h    绝对：800/480h"}]}]}},computed:r()({},Object(c.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.initData()},deep:!0},$route:{handler:function(e,t){t&&this.initData()},deep:!0,immediate:!0}},mounted:function(){var e=this;this.selectCrew.ID&&(this.initData(),this.resizefun=function(){e.myCharts.forEach(function(e){e.resize()})},window.addEventListener("resize",this.resizefun))},methods:{initData:function(){this.getGeneratorSet(),this.getPicVideo(),this.initInterval()},initInterval:function(){var e=this;this.getMchInfo(),this.animation&&(clearInterval(this.animation),this.animation=null),this.animation=setInterval(function(){e.getMchInfo()},3e3)},getGeneratorSet:function(){var e=this;this.$api.screenData.GetMaintenanceGensetSettingDetailV2({},{GensetId:this.selectCrew.ID}).then(function(t){1===t.Code&&(e.$set(e,"StrategyItemList",t.Data.Programs),e.$set(e,"showStrategyItemList",t.Data.Programs&&t.Data.Programs.slice(0,4)))})},getPicVideo:function(){var e=this;this.$api.screenData.FindGeneratorSetByMonitor({id:this.selectCrew.ID}).then(function(t){var a=t.Data;e.IsVideo=a.IsVideo,a.IsVideo&&(a&&(e.videoH5Url=a.VideoH5Url),e.$nextTick(function(){e.renderVideo()}))}).catch(function(e){console.error("设备管理-机组监控-机组监控-获取图片和视频接口 FindGeneratorSetByMonitor ，错误信息：\n",e)})},renderVideo:function(){var e=this;if(this.videoH5Url){var t=new o.a;t.attachMedia(this.$refs.myVideo),t.on(o.a.Events.MEDIA_ATTACHED,function(a){t.loadSource(e.videoH5Url),t.on(o.a.Events.MANIFEST_PARSED,function(){this.$refs.myVideo.play()})}),t.on(o.a.Events.ERROR,function(e,a){if(a.fatal)switch(a.type){case o.a.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered, try to recover"),t.startLoad();break;case o.a.ErrorTypes.MEDIA_ERROR:console.error("fatal media error encountered, try to recover"),t.recoverMediaError();break;default:t.destroy()}})}},getMchInfo:function(){var e=this;this.$api.screenData.getsingleMchInfoRealtime({id:this.selectCrew.ID}).then(function(t){if(1===t.Code){var a=t.Data;e.CollectorTime=Object(u.c)(a.CollectorTime).format("yyyy-MM-DD HH:mm:ss"),e.$set(e.GeneratorSetInfo,"CollectorTime",e.CollectorTime);var n=a.NowData;if(i()(n).includes("fpie_001_03")){var s=n.fpie_001_03.Value?"####"!==n.fpie_001_03.Value?n.fpie_001_03.Value+n.fpie_001_03.Unit:"-":"";e.$set(e.GeneratorSetInfo,"Temperature",s)}else e.$set(e.GeneratorSetInfo,"Temperature","");if(i()(n).includes("fpie_006_74")){var r=n.fpie_006_74.Value?"####"!==n.fpie_006_74.Value?n.fpie_006_74.Value+n.fpie_006_74.Unit:"-":"";e.$set(e.GeneratorSetInfo,"Windage",r)}else e.$set(e.GeneratorSetInfo,"Windage","");e.$nextTick(function(){e.$emit("changeGeneratorSetInfo",e.GeneratorSetInfo)});var l={};w.forEach(function(e){n[e.prop]?l[e.prop]="####"!=n[e.prop].Value?n[e.prop]:{Value:"-",Unit:""}:l[e.prop]={Value:"-",Unit:""}}),e.$set(e,"realTimeData",l),k.forEach(function(t){n[t.props]&&e.$set(e.switchStatus,t.key+"_flag",1==n[t.props].Value)}),e.$nextTick(function(){if(e.IsFirstRequst){e.IsFirstRequst=!1;var t=i()(e.realTimeData);return e.echart_arr.forEach(function(e,a){t.includes(e.key)?e.IsRender=!0:e.IsRender=!1}),void e.$nextTick(function(){e.init(),e.loading=!1})}e.refreshData(),e.loading=!1})}}).catch(function(e){console.log(e)})},init:function(){var e=this;this.echart_arr.forEach(function(t){if(t.IsRender){var a=document.getElementById(t.id),n=e.$echarts.init(a),i=null;"gauge"===t.seriesType&&(i=e.getGaugeOption(t)),"liquidFill"===t.seriesType&&(i=e.getLiquidFillOption(t)),n.setOption(i),e.myCharts.push(n)}})},refreshData:function(){var e=this;this.echart_arr.forEach(function(t,a){if(t.IsRender){var n=null;"gauge"===t.seriesType&&(n=e.getGaugeOption(t)),"liquidFill"===t.seriesType&&(n=e.getLiquidFillOption(t)),e.myCharts[a]&&e.myCharts[a].setOption(n)}})},getGaugeOption:function(e){var t=this.realTimeData[e.key].Value;return{series:[{type:"gauge",radius:"85%",min:e.min,max:e.max,splitNumber:4,axisLine:{lineStyle:{width:6,color:e.axisLineSetting||[[.05,"#555555"],[.1,"#d9001b"],[.6,"#f59a23"],[1,"#228b22"]]}},pointer:{icon:"path://M2090.36389,615.30999 L2090.36389,615.30999 C2091.48372,615.30999 2092.40383,616.194028 2092.44859,617.312956 L2096.90698,728.755929 C2097.05155,732.369577 2094.2393,735.416212 2090.62566,735.56078 C2090.53845,735.564269 2090.45117,735.566014 2090.36389,735.566014 L2090.36389,735.566014 C2086.74736,735.566014 2083.81557,732.63423 2083.81557,729.017692 C2083.81557,728.930412 2083.81732,728.84314 2083.82081,728.755929 L2088.2792,617.312956 C2088.32396,616.194028 2089.24407,615.30999 2090.36389,615.30999 Z",length:"75%",width:6,offsetCenter:[0,"5%"],itemStyle:{color:"-"==t?"#808080":"auto"}},axisTick:{show:!1},splitLine:{distance:-4,length:12,lineStyle:{color:"auto",width:1}},axisLabel:{color:"#0099FF",distance:10,fontSize:12,formatter:function(e){return e.toFixed(0)}},detail:{show:!1},data:[{value:t||e.value}]}]}},getLiquidFillOption:function(e,t){var a=this.realTimeData[e.key].Value+" "+this.realTimeData[e.key].Unit,n=this.realTimeData[e.key].Value/100,i=this.realTimeData[e.realKey];return{series:[{type:"liquidFill",radius:"80%",data:[n],amplitude:"3%",waveLength:"25%",outline:{show:!0,borderDistance:2,itemStyle:{color:"none",borderColor:"#294D99",borderWidth:2,shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.25)"}},label:{formatter:(i.Value+" "+i.Unit||e.value)+" \n\n "+a,fontSize:12}}]}},handleInput:function(e,t){this.switchStatus[e+"_flag"]=!t},handleClickSwitch:function(e,t){var a=this,n=k.find(function(t){return t.key==e}),i=this.switchStatus[e+"_flag"]?"关闭":"开启",s=""+i+n.name,r="确定"+i+n.name+"吗？",l=this.$createElement;this.$confirm("操作提示",{title:s,message:l("div",[l("p",[l("span",r)])]),confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=a.switchStatus[e+"_flag"]?n.closeCode:n.openCode;a.changeSwitchStatus(e,t)}).catch(function(){a.$message({type:"info",message:"已取消"})})},changeSwitchStatus:function(e,t){var a=this,n={id:this.selectCrew.ID,key:t};this.$api.operation.control({},n).then(function(t){a.$message.success(t.Message),a.switchStatus[e+"_flag"]=!a.switchStatus[e+"_flag"],clearInterval(a.animation),a.initInterval()}).catch(function(e){a.$message.error(e)})},formatDate:function(e){return Object(u.c)(e).format("yyyy-MM-DD")},handleShowDetail:function(){this.configData={activeTab:14,gensetId:this.selectCrew.ID,type:1,runStatus:!0},this.showDetailDialigVisible=!0},handleEditMaintenanceClick:function(){var e=this;this.$api.project.GetMaintenanceGensetSettingDetail({},{GensetId:this.selectCrew.ID}).then(function(t){1===t.Code?(e.$set(e,"GensetSettingDetail",t.Data),e.editDialigVisible=!0):e.$message({type:"error",message:"机组维保策略查询失败！"})})},handleAddClick:function(){this.$refs.editTable.handleAdd()},tableDataChange:function(e){this.$set(this.GensetSettingDetail,"ProgramList",e.data)},addDataItem:function(){var e=document.querySelector(".edit-maintenance-dialog .el-dialog__body"),t=(e.scrollTop,e.offsetHeight-39),a=e.scrollHeight-39;e.scrollTo(0,a-t)},handleSave:function(){var e=this;if(!this.GensetSettingDetail.ProgramList||this.GensetSettingDetail.ProgramList&&0==this.GensetSettingDetail.ProgramList.length)this.$message({type:"warning",message:"请添加维保事项!"});else{var t=this.GensetSettingDetail.ProgramList.map(function(e){return{MaintenanceProgramId:e.MaintenanceProgramId,MaintenanceItemId:e.MaintenanceItemId,ItemContent:e.ItemContent,DefaultHourSetting:e.DefaultHourSetting,DefaultDaySetting:e.DefaultDaySetting}}),a={StrategyId:this.GensetSettingDetail.StrategyId,ProgramList:t},n={GensetId:this.selectCrew.ID};this.$api.screenData.EditMaintenanceGensetSettingV2(a,n).then(function(t){1===t.Code&&(e.$message({type:"success",message:"编辑机组维保策略成功!"}),e.closeDialog("editDialigVisible",{refresh:!0}))})}},handleShowMoreClick:function(){this.matterListDialigVisible=!0},handleShowRecordsClick:function(){this.showRecordsDialigVisible=!0},reset:function(){this.$set(this,"searchForm",{searchTime:null,keyWord:""})},searchData:function(){console.log(this.searchForm)},closeDialog:function(e,t){this[e]=!1,t&&t.refresh&&this.initData()}},beforeDestroy:function(){clearInterval(this.animation),window.removeEventListener("resize",this.resizefun),this.resizefun=null}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"sensor-monitor"}},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"sensor-monitor-container",attrs:{type:"flex"}},[a("el-col",{staticClass:"maintenance-items",attrs:{span:8}},[a("div",{staticClass:"monitor-items-area maintenance-info"},[a("el-row",{staticClass:"area-top",attrs:{type:"flex"}},[a("el-col",{staticClass:"items-title"},[a("span",[e._v("维保信息")]),e._v(" "),a("i",{staticClass:"el-icon-question",attrs:{title:"按实际运行时长或绝对时长 减 策略运行时长或绝对时长的差值(取最大者)按大小降序排列"}})]),e._v(" "),a("el-col",{staticClass:"items-btns"})],1),e._v(" "),a("ul",{staticClass:"maintenance-matter"},[a("li",{staticClass:"title"},[a("div",[a("span",[e._v("维保事项")])]),e._v(" "),a("div",[a("span",[e._v("运行时长(实际/策略)")])]),e._v(" "),a("div",[a("span",[e._v("绝对时长(实际/策略)")])])]),e._v(" "),e.showStrategyItemList&&e.showStrategyItemList.length>0?e._l(e.showStrategyItemList,function(t,n){return a("li",{key:n},[a("div",[a("span",{staticClass:"SingleLineHiding",attrs:{title:t.ItemContent}},[e._v("\n                  "+e._s(t.ItemContent)+"\n                ")])]),e._v(" "),a("div",[a("span",[a("em",{class:{exceed:t.NextRemindHour>=t.DefaultHourSetting}},[e._v("\n                    "+e._s(t.NextRemindHour)+"h\n                  ")]),e._v("\n                  /\n                  "),a("em",[e._v(e._s(t.DefaultHourSetting)+"h")])])]),e._v(" "),a("div",[a("span",[a("em",{class:{exceed:t.NextRemindDate>=t.DefaultHourSetting}},[e._v("\n                    "+e._s(0)+"天\n                    ")]),e._v("\n                  /\n                  "),a("em",[e._v(e._s(t.DefaultDaySetting)+"天")])])])])}):a("li",{staticClass:"no-data"},[a("p",[e._v("暂无数据")])])],2),e._v(" "),a("div",{staticClass:"operate-btns"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleShowDetail()}}},[e._v("维保策略详情 ")])],1)],1),e._v(" "),a("div",{staticClass:"monitor-items-area vidio-container"},[a("el-row",{staticClass:"area-top",attrs:{type:"flex"}},[a("el-col",{staticClass:"items-title"},[a("span",[e._v("机组视频")])]),e._v(" "),e.IsVideo?a("el-col",{staticClass:"items-btns"},[a("el-switch",{staticClass:"maintenance-switch",on:{input:function(t){return e.handleInput("1",t)}},nativeOn:{click:function(t){return t.preventDefault(),e.handleClickSwitch("1")}},model:{value:e.switchStatus["1_flag"],callback:function(t){e.$set(e.switchStatus,"1_flag",t)},expression:"switchStatus['1_flag']"}})],1):e._e()],1),e._v(" "),a("div",{staticClass:"maintenance-items-container"},[e.IsVideo?a("video",{ref:"myVideo",attrs:{width:"100%",height:"100%",controls:"controls",autoplay:"autoplay",muted:"muted"},domProps:{muted:!0}}):a("p",[e._v("暂无摄像头")])])],1)]),e._v(" "),a("el-col",{staticClass:"maintenance-items",attrs:{span:8}},[a("div",{staticClass:"monitor-items-area fuel-unit"},[a("el-row",{staticClass:"area-top",attrs:{type:"flex"}},[a("el-col",{staticClass:"items-title"},[a("span",[e._v("燃油单元")])])],1),e._v(" "),a("div",{staticClass:"maintenance-items-container"},[e.realTimeData&&e.realTimeData.fpie_006_12?a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:e.colLeft}},[a("div",{staticClass:"monitor-item",attrs:{id:"monitor-gauge-1"}})]),e._v(" "),a("el-col",{attrs:{span:e.colRight}},[a("div",{class:"-"!==e.realTimeData.fpie_006_02.Value?e.realTimeData.fpie_006_12.Value<=20?"normalColor":e.realTimeData.fpie_006_12.Value<=80?"warningColor":"attentionColor":"nullColor"},[a("span",[e._v("\n                  油水比重\n                  "),a("em",[e._v("\n                    "+e._s(e.realTimeData.fpie_006_12.Value+e.realTimeData.fpie_006_12.Unit)+"\n                  ")])])]),e._v(" "),a("div",[a("span",{attrs:{title:"排水电磁阀"}},[e._v("燃油排水")]),e._v(" "),a("el-switch",{staticClass:"maintenance-switch",on:{input:function(t){return e.handleInput("2",t)}},nativeOn:{click:function(t){return t.preventDefault(),e.handleClickSwitch("2")}},model:{value:e.switchStatus["2_flag"],callback:function(t){e.$set(e.switchStatus,"2_flag",t)},expression:"switchStatus['2_flag']"}})],1)])],1):e._e(),e._v(" "),e.realTimeData&&e.realTimeData.fpie_006_02?a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:e.colLeft}},[a("div",{staticClass:"monitor-item",attrs:{id:"monitor-gauge-2"}})]),e._v(" "),a("el-col",{attrs:{span:e.colRight}},[a("div",{class:"-"!==e.realTimeData.fpie_006_02.Value?e.realTimeData.fpie_006_02.Value<=20?"normalColor":e.realTimeData.fpie_006_02.Value<=80?"warningColor":"attentionColor":"nullColor"},[a("span",[e._v("\n                  进油管空气分离器\n                  "),a("em",[e._v("\n                    "+e._s(e.realTimeData.fpie_006_02.Value+e.realTimeData.fpie_006_02.Unit)+"\n                  ")])])]),e._v(" "),a("div",[a("span",{attrs:{title:"燃油排气泵"}},[e._v("燃油排气")]),e._v(" "),a("el-switch",{staticClass:"maintenance-switch",on:{input:function(t){return e.handleInput("3",t)}},nativeOn:{click:function(t){return t.preventDefault(),e.handleClickSwitch("3")}},model:{value:e.switchStatus["3_flag"],callback:function(t){e.$set(e.switchStatus,"3_flag",t)},expression:"switchStatus['3_flag']"}})],1)])],1):e._e(),e._v(" "),e.realTimeData&&e.realTimeData.fpie_006_23?a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:e.colLeft}},[a("div",{staticClass:"monitor-item",attrs:{id:"monitor-liquidfill-1"}})]),e._v(" "),a("el-col",{attrs:{span:e.colRight}},[a("div",[a("span",[e._v("\n                  燃油箱余量\n                  "),a("em",[e._v("\n                    "+e._s(e.realTimeData.fpie_006_23.Value+e.realTimeData.fpie_006_23.Unit)+"\n                  ")])]),e._v(" "),a("span",[e._v("燃油耗尽百分比 "),a("em",[e._v("99.9%")])])]),e._v(" "),a("div",[a("span",{attrs:{title:"燃油加热器"}},[e._v("燃油加热")]),e._v(" "),a("el-switch",{staticClass:"maintenance-switch",on:{input:function(t){return e.handleInput("4",t)}},nativeOn:{click:function(t){return t.preventDefault(),e.handleClickSwitch("4")}},model:{value:e.switchStatus["4_flag"],callback:function(t){e.$set(e.switchStatus,"4_flag",t)},expression:"switchStatus['4_flag']"}})],1)])],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"monitor-items-area cooling-water"},[a("el-row",{staticClass:"area-top",attrs:{type:"flex"}},[a("el-col",{staticClass:"items-title"},[a("span",[e._v("冷却水")])])],1),e._v(" "),a("div",{staticClass:"maintenance-items-container"},[e.realTimeData&&e.realTimeData.fpie_006_51?a("el-row",[a("el-col",[a("div",{staticClass:"data-items"},[a("span",{class:"-"!==e.realTimeData.fpie_006_51.Value?0==e.realTimeData.fpie_006_51.Value?"normalColor":"warningColor":"nullColor"},[e._v("当前水量\n                  "),a("em",[e._v(e._s("-"!==e.realTimeData.fpie_006_51.Value?0==e.realTimeData.fpie_006_51.Value?"有水":"无水":"-"))])]),e._v(" "),a("span",[e._v("当前水温\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_007_02.Value+e.realTimeData.fpie_007_02.Unit))])]),e._v(" "),a("span",[e._v("A相电流\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_007_03.Value+e.realTimeData.fpie_007_03.Unit))])])]),e._v(" "),a("div",{staticClass:"data-items"},[a("span",[e._v("B相电流\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_007_04.Value+e.realTimeData.fpie_007_04.Unit))])]),e._v(" "),a("span",[e._v("C相电流\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_007_05.Value+e.realTimeData.fpie_007_05.Unit))])]),e._v(" "),a("span",[e._v("AC相电压\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_007_06.Value+e.realTimeData.fpie_007_06.Unit))])])]),e._v(" "),a("div",[a("span",{attrs:{title:"水套加热器"}},[e._v("水温加热")]),e._v(" "),a("el-switch",{staticClass:"maintenance-switch",on:{input:function(t){return e.handleInput("5",t)}},nativeOn:{click:function(t){return t.preventDefault(),e.handleClickSwitch("5")}},model:{value:e.switchStatus["5_flag"],callback:function(t){e.$set(e.switchStatus,"5_flag",t)},expression:"switchStatus['5_flag']"}})],1)])],1):e._e()],1)],1)]),e._v(" "),a("el-col",{staticClass:"maintenance-items",attrs:{span:8}},[a("div",{staticClass:"monitor-items-area engineoil-unit"},[a("el-row",{staticClass:"area-top",attrs:{type:"flex"}},[a("el-col",{staticClass:"items-title"},[a("span",[e._v("机油单元")])])],1),e._v(" "),a("div",{staticClass:"maintenance-items-container"},[e.realTimeData&&e.realTimeData.fpie_006_32?a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:e.colLeft}},[a("div",{staticClass:"monitor-item",attrs:{id:"monitor-gauge-3"}})]),e._v(" "),a("el-col",{attrs:{span:e.colRight}},[a("div",{class:"-"!==e.realTimeData.fpie_006_02.Value?e.realTimeData.fpie_006_32.Value<=20?"attentionColor":e.realTimeData.fpie_006_32.Value<=80?"warningColor":"normalColor":"nullColor"},[a("span",[e._v("\n                  机油油底壳\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_006_32.Value+e.realTimeData.fpie_006_32.Unit))])])])])],1):e._e(),e._v(" "),e.realTimeData&&e.realTimeData.fpie_006_43?a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:e.colLeft}},[a("div",{staticClass:"monitor-item",attrs:{id:"monitor-liquidfill-2"}})]),e._v(" "),a("el-col",{attrs:{span:e.colRight}},[a("div",[a("span",[e._v("\n                  补机油箱余量\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_006_43.Value+e.realTimeData.fpie_006_43.Unit))])])]),e._v(" "),a("div",[a("span",{attrs:{title:"补机油补油泵"}},[e._v("油底壳补油")]),e._v(" "),a("el-switch",{staticClass:"maintenance-switch",on:{input:function(t){return e.handleInput("6",t)}},nativeOn:{click:function(t){return t.preventDefault(),e.handleClickSwitch("6")}},model:{value:e.switchStatus["6_flag"],callback:function(t){e.$set(e.switchStatus,"6_flag",t)},expression:"switchStatus['6_flag']"}})],1)])],1):e._e(),e._v(" "),e.realTimeData&&e.realTimeData.fpie_006_93?a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:e.colLeft}},[a("div",{staticClass:"monitor-item",attrs:{id:"monitor-liquidfill-3"}})]),e._v(" "),a("el-col",{attrs:{span:e.colRight}},[a("div",[a("span",[e._v("\n                  待滤油箱余量\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_006_93.Value+e.realTimeData.fpie_006_93.Unit))])])]),e._v(" "),a("div",[a("span",{attrs:{title:"待滤油箱抽油泵"}},[e._v("油底壳抽油")]),e._v(" "),a("el-switch",{staticClass:"maintenance-switch",on:{input:function(t){return e.handleInput("7",t)}},nativeOn:{click:function(t){return t.preventDefault(),e.handleClickSwitch("7")}},model:{value:e.switchStatus["7_flag"],callback:function(t){e.$set(e.switchStatus,"7_flag",t)},expression:"switchStatus['7_flag']"}})],1)])],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"monitor-items-area waste-liquid-tank"},[a("el-row",{staticClass:"area-top",attrs:{type:"flex"}},[a("el-col",{staticClass:"items-title"},[a("span",[e._v("废液箱")])])],1),e._v(" "),a("div",{staticClass:"maintenance-items-container"},[e.realTimeData&&e.realTimeData.fpie_006_63?a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:e.colLeft}},[a("div",{staticClass:"monitor-item",attrs:{id:"monitor-liquidfill-4"}})]),e._v(" "),a("el-col",{attrs:{span:e.colRight}},[a("div",[a("span",[e._v("\n                  废液箱液位\n                  "),a("em",[e._v(e._s(e.realTimeData.fpie_006_63.Value+e.realTimeData.fpie_006_63.Unit))])])])])],1):e._e()],1)],1)])],1),e._v(" "),e.showDetailDialigVisible?a("el-dialog",{staticClass:"maintenance-detail-dialog",attrs:{title:"维保策略详情",width:"80%",visible:e.showDetailDialigVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.showDetailDialigVisible=t},close:function(){return e.closeDialog("showDetailDialigVisible",{refresh:!0})}}},[a("div",{staticClass:"dialog-content"},[a("ControllerConfiguration",{attrs:{configData:e.configData}})],1)]):e._e(),e._v(" "),e.editDialigVisible?a("el-dialog",{staticClass:"edit-maintenance-dialog",attrs:{title:"维保策略优化",width:"80%",visible:e.editDialigVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.editDialigVisible=t},close:function(){return e.closeDialog("editDialigVisible")}}},[a("div",{staticClass:"dialog-content"},[a("edit-table",{ref:"editTable",attrs:{table_columns:e.table_columns,dataArray:e.GensetSettingDetail.ProgramList},on:{dataChange:e.tableDataChange,addDataItem:e.addDataItem}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticClass:"add-item"},[a("el-button",{staticClass:"add-btn",attrs:{size:"mini"},on:{click:function(t){return e.handleAddClick()}}},[e._v(" 添加项目 ")])],1),e._v(" "),a("el-col",[a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(){return e.closeDialog("editDialigVisible")}}},[e._v("\n            取消\n          ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleSave()}}},[e._v(" 保存 ")])],1)],1)],1)]):e._e(),e._v(" "),e.matterListDialigVisible?a("el-dialog",{staticClass:"show-maintenance-dialog",attrs:{width:"600px",visible:e.matterListDialigVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.matterListDialigVisible=t},close:function(){return e.closeDialog("matterListDialigVisible")}}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v("全部维保事项")]),e._v(" "),a("i",{staticClass:"el-icon-question",attrs:{title:"按实际运行时长或绝对时长 减 策略运行时长或绝对时长的差值(取最大者)按大小降序排列"}})]),e._v(" "),a("div",{staticClass:"dialog-content show-maintenance-dialog-content"},[a("ul",{staticClass:"maintenance-matter"},[a("li",{staticClass:"title"},[a("div",[a("span",[e._v("维保事项")])]),e._v(" "),a("div",[a("span",[e._v("运行时长(实际/策略)")])]),e._v(" "),a("div",[a("span",[e._v("绝对时长(实际/策略)")])])]),e._v(" "),e.StrategyItemList&&e.StrategyItemList.length>0?e._l(e.StrategyItemList,function(t,n){return a("li",{key:n},[a("div",[a("span",{staticClass:"SingleLineHiding",attrs:{title:t.ItemContent}},[e._v("\n                "+e._s(t.ItemContent)+"\n              ")])]),e._v(" "),a("div",[a("span",[a("em",[e._v(e._s(t.NextRemindHour)+"h")]),e._v(" /\n                "),a("em",[e._v(e._s(t.DefaultHourSetting)+"h")])])]),e._v(" "),a("div",[a("span",[a("em",[e._v(e._s(0)+"天")]),e._v(" /\n                "),a("em",[e._v(e._s(t.DefaultDaySetting)+"天")])])])])}):a("li",{staticClass:"no-data"},[a("p",[e._v("暂无数据")])])],2)]),e._v(" "),a("div",{staticClass:"footer-center"},[e.StrategyItemList&&e.StrategyItemList.length>0?a("el-button",{on:{click:function(t){return e.handleEditMaintenanceClick()}}},[e._v("维保策略优化\n      ")]):e._e()],1)]):e._e(),e._v(" "),e.showRecordsDialigVisible?a("el-dialog",{staticClass:"maintenance-record-dialog",attrs:{title:"维保记录",width:"60%",visible:e.showRecordsDialigVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.showRecordsDialigVisible=t},close:function(){return e.closeDialog("showRecordsDialigVisible")}}},[a("div",{staticClass:"dialog-content"},[a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-item"},[a("el-input",{attrs:{placeholder:"支持名字或维保事项关键字搜索"},model:{value:e.searchForm.keyWord,callback:function(t){e.$set(e.searchForm,"keyWord",t)},expression:"searchForm.keyWord"}})],1),e._v(" "),a("div",{staticClass:"search-item date-type"},[a("span",[e._v("维保日期:")]),e._v(" "),a("el-date-picker",{staticClass:"input-with-select",attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerTime,placement:"bottom-start"},model:{value:e.searchForm.searchTime,callback:function(t){e.$set(e.searchForm,"searchTime",t)},expression:"searchForm['searchTime']"}})],1),e._v(" "),a("div",{staticClass:"search-btn-box"},[a("el-button",{staticClass:"reset-btn",attrs:{type:"text"},on:{click:function(t){return e.reset()}}},[e._v("清空筛选")]),e._v(" "),a("el-button",{staticClass:"query-btn",attrs:{type:"primary"},on:{click:function(t){return e.searchData()}}},[e._v("查 询")])],1)]),e._v(" "),a("el-timeline",e._l(e.dataSource,function(t,n){return a("el-timeline-item",{key:n,attrs:{timestamp:t.date+"  维保人:"+t.person,placement:"top"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"维保事项",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"data",label:"维保前数据",width:"180"}})],1)],1)}),1)],1)]):e._e()],1)},staticRenderFns:[]};var I=a("VU/8")(x,S,!1,function(e){a("lVJv")},"data-v-77fc325d",null);t.a=I.exports},"0jnT":function(e,t){},"0qjw":function(e,t){},"1ft7":function(e,t,a){"use strict";var n=a("eTTQ"),i=[{id:"SuddenAdditionCombination",label:"突加组合曲线",echartsItems:[{label:"突加负载电压",accuracy:10,type:"line",yIndex:1,data:[]},{label:"突加负载电压频率",accuracy:100,type:"line",yIndex:3,data:[]},{label:"突加负载转速",accuracy:1,type:"line",yIndex:0,data:[]},{label:"突加负载电流",accuracy:10,type:"line",yIndex:2,data:[]}],yAxisItems:[{label:"r/min",unit:"",min:1300,colorIndex:2},{label:"V",unit:"",colorIndex:0},{label:"A",unit:"",colorIndex:3},{label:"Hz",unit:"",colorIndex:1}]},{id:"SuddenUnloadingCombination",label:"突卸组合曲线",echartsItems:[{label:"突卸负载电压",accuracy:10,type:"line",yIndex:1,data:[]},{label:"突卸负载电压频率",accuracy:100,type:"line",yIndex:3,data:[]},{label:"突卸负载转速",accuracy:1,type:"line",yIndex:0,data:[]},{label:"突卸负载电流",accuracy:10,type:"line",yIndex:2,data:[]}],yAxisItems:[{label:"r/min",unit:"",min:1300,colorIndex:2},{label:"V",unit:"",colorIndex:0},{label:"A",unit:"",colorIndex:3},{label:"Hz",unit:"",colorIndex:1}]}],s=[{num:0,lable1:"0%稳态电压谐波分量（加载）",lable2:"0%稳态电压谐波THD（加载）",THD:"",THDArr:[]},{num:1,lable1:"25%稳态电压谐波分量（加载）",lable2:"25%稳态电压谐波THD（加载）",THD:"",THDArr:[]},{num:2,lable1:"50%稳态电压谐波分量（加载）",lable2:"50%稳态电压谐波THD（加载）",THD:"",THDArr:[]},{num:3,lable1:"75%稳态电压谐波分量（加载）",lable2:"75%稳态电压谐波THD（加载）",THD:"",THDArr:[]},{num:4,lable1:"100%稳态电压谐波分量（加载）",lable2:"100%稳态电压谐波THD（加载）",THD:"",THDArr:[]},{num:5,lable1:"110%稳态电压谐波分量（加载）",lable2:"110%稳态电压谐波THD（加载）",THD:"",THDArr:[]},{num:6,lable1:"100%稳态电压谐波分量（减载）",lable2:"100%稳态电压谐波THD（减载）",THD:"",THDArr:[]},{num:7,lable1:"75%稳态电压谐波分量（减载）",lable2:"75%稳态电压谐波THD（减载）",THD:"",THDArr:[]},{num:8,lable1:"50%稳态电压谐波分量（减载）",lable2:"50%稳态电压谐波THD（减载）",THD:"",THDArr:[]},{num:9,lable1:"25%稳态电压谐波分量（减载）",lable2:"25%稳态电压谐波THD（减载）",THD:"",THDArr:[]},{num:10,lable1:"0%稳态电压谐波分量（减载）",lable2:"0%稳态电压谐波THD（减载）",THD:"",THDArr:[]}],r=function(){for(var e=[],t=0;t<32;t++)e.push(t);return e}(),l={name:"DeliveryTestReportDetailCurve",components:{BaseEcharts:n.a},props:["data"],data:function(){return{Data:this.data,configList:s,toolboxCfg:{dataViewIsShow:!1,magicTypeIsShow:!1,restoreIsShow:!1,saveAsImageIsShow:!0},combinationArray:i,combinationFlag:!1,combinationGrid:{x:50,y:24,x2:150,y2:24,top:"15%"},combinationColors:["#cad400","#ef7b10","#56d43e","#bd2b0b"],combinationLegendData:[],combinationXAxisData:[],combinationYAxisData:[],combinationSeriesData:[],transientData:null,flag:!1,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"40",right:"60",top:"15%"},legendData:[],xAxisData:[{type:"category",name:"Time(s)",axisLabel:{interval:0,rotate:-45,align:"center",margin:14},axisTick:{alignWithLabel:!0},data:r}],yAxisData:[{type:"value",name:"%",max:100,axisLine:{show:!0},axisTick:{show:!0}}],seriesData:[]}},watch:{data:{handler:function(e,t){this.Data=e,this.transientDataInit(),this.combinationInit(),this.init()},deep:!0}},mounted:function(){this.transientDataInit(),this.combinationInit(),this.init()},methods:{transientDataInit:function(){this.Data&&(this.transientData={voltageDischargeRate:this.Data["电压突卸瞬态调节率"]/100+"%",voltageDischargeTime:this.Data["电压突卸稳定时间"]/10,frequencyDischargeRate:this.Data["频率突卸瞬态调节率"]/100+"%",frequencyDischargeTime:this.Data["频率突卸稳定时间"]/10,voltageAdditionRate:this.Data["电压突加瞬态调节率"]/100+"%",voltageAdditionTime:this.Data["电压突加稳定时间"]/10,frequencyAdditionRate:this.Data["频率突加瞬态调节率"]/100+"%",frequencyAdditionTime:this.Data["频率突加稳定时间"]/10})},getXData:function(){for(var e=[],t=0;t<=10;t++)for(var a=0;a<10;a++){if(10===t){e.push(t);break}var n=0===a?t:t+"."+a;e.push(n)}return e},combinationInit:function(){var e=this;this.combinationXAxisData=[{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{interval:4},splitLine:{show:!0,width:5,lineStyle:{type:"dotted",color:"#6E7079"}},boundaryGap:!1,data:this.getXData()}];var t=[],a=[],n=[];this.combinationArray.forEach(function(i){var s=[],r=[],l=[];i.echartsItems.forEach(function(t,a){s.push(t.label);var n={name:t.label,type:t.type,yAxisIndex:t.yIndex,data:null==e.Data[t.label]?[]:e.Data[t.label].split(",").map(function(e){return+e/t.accuracy}),showAllSymbol:!1};l.push(n)}),i.yAxisItems.forEach(function(t,a){var n={type:"value",name:t.label,min:t.min||0,position:0===a?"left":"right",offset:a>=2?50*(a-1):0,axisLine:{show:!0,lineStyle:{color:e.combinationColors[t.colorIndex]}},axisLabel:{formatter:"{value} "+(t.unit||"")},splitLine:{lineStyle:{type:"dotted",color:"#6E7079"}}};r.push(n)}),t.push(s),a.push(r),n.push(l)}),this.$set(this,"combinationLegendData",t),this.$set(this,"combinationYAxisData",a),this.$set(this,"combinationSeriesData",n),this.$nextTick(function(){e.combinationFlag=!0})},init:function(){var e=this,t=[],a=[];s.forEach(function(n,i){n.THD=null==e.Data[n.lable2]?"":e.Data[n.lable2]/100+"%";var s=null==e.Data[n.lable1]?[]:e.Data[n.lable1].split(",").map(function(e){return+e/100}).slice(0,32);n.THDArr=s.map(function(e){return e+"%"}),t.push([n.lable1]),a.push([{data:s,type:"bar",name:n.lable1}])}),this.$set(this,"legendData",t),this.$set(this,"seriesData",a),this.$nextTick(function(){e.flag=!0})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"curve-main"},[e._l(e.combinationArray,function(t,n){return[a("p",{key:"p_"+n,staticClass:"part-title"},[e._v(e._s(t.label))]),e._v(" "),e.combinationFlag?a("BaseEcharts",{key:"echarts_"+n,staticClass:"curve-box",attrs:{containerId:t.id,colors:e.combinationColors,grid:e.combinationGrid,legendData:e.combinationLegendData[n],xAxisData:e.combinationXAxisData,yAxisData:e.combinationYAxisData[n],seriesData:e.combinationSeriesData[n],toolboxCfg:e.toolboxCfg}}):e._e()]}),e._v(" "),a("p",{staticClass:"part-title text-left"},[e._v("负载突加突卸试验")]),e._v(" "),a("el-row",{staticClass:"part-content test_part test_part_3"},[a("el-col",{attrs:{span:2}},[a("p",{staticClass:"line3 text-center"},[a("span",[e._v("瞬态测试")])])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("p",{staticClass:"text-center"},[a("span",[e._v("电压(突卸)")])]),e._v(" "),a("el-row",{staticClass:"test_part__row"},[a("el-col",{attrs:{span:12}},[a("p",{staticClass:"text-center"},[a("span",[e._v("瞬态调节率")])]),e._v(" "),a("p",{staticClass:"text-center"},[a("span",[e._v(e._s(e.transientData&&e.transientData.voltageDischargeRate))])])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("p",{staticClass:"text-center"},[a("span",[e._v("稳定时间(s) ")])]),e._v(" "),a("p",{staticClass:"text-center"},[a("span",[e._v(e._s(e.transientData&&e.transientData.voltageDischargeTime))])])])],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("p",{staticClass:"text-center"},[a("span",[e._v("频率(突卸)")])]),e._v(" "),a("el-row",{staticClass:"test_part__row"},[a("el-col",{attrs:{span:12}},[a("p",{staticClass:"text-center"},[a("span",[e._v("瞬态调节率")])]),e._v(" "),a("p",{staticClass:"text-center"},[a("span",[e._v(e._s(e.transientData&&e.transientData.frequencyDischargeRate))])])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("p",{staticClass:"text-center"},[a("span",[e._v("稳定时间(s) ")])]),e._v(" "),a("p",{staticClass:"text-center"},[a("span",[e._v(e._s(e.transientData&&e.transientData.frequencyDischargeTime))])])])],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("p",{staticClass:"text-center"},[a("span",[e._v("电压(突加)")])]),e._v(" "),a("el-row",{staticClass:"test_part__row"},[a("el-col",{attrs:{span:12}},[a("p",{staticClass:"text-center"},[a("span",[e._v("瞬态调节率")])]),e._v(" "),a("p",{staticClass:"text-center"},[a("span",[e._v(e._s(e.transientData&&e.transientData.voltageAdditionRate))])])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("p",{staticClass:"text-center"},[a("span",[e._v("稳定时间(s) ")])]),e._v(" "),a("p",{staticClass:"text-center"},[a("span",[e._v(e._s(e.transientData&&e.transientData.voltageAdditionTime))])])])],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("p",{staticClass:"text-center"},[a("span",[e._v("频率(突加)")])]),e._v(" "),a("el-row",{staticClass:"test_part__row"},[a("el-col",{attrs:{span:12}},[a("p",{staticClass:"text-center"},[a("span",[e._v("瞬态调节率")])]),e._v(" "),a("p",{staticClass:"text-center"},[a("span",[e._v(e._s(e.transientData&&e.transientData.frequencyAdditionRate))])])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("p",{staticClass:"text-center"},[a("span",[e._v("稳定时间(s) ")])]),e._v(" "),a("p",{staticClass:"text-center"},[a("span",[e._v(e._s(e.transientData&&e.transientData.frequencyAdditionTime))])])])],1)],1)],1),e._v(" "),e._l(e.configList,function(t){return[a("div",{key:t.num,staticClass:"curve-box"},[a("el-row",{staticClass:"harmonic-content"},[a("el-col",{attrs:{span:16}},[e.flag?a("BaseEcharts",{key:t.num,attrs:{containerId:"VoltageHarmonicComponent_"+t.num,grid:e.grid,legendData:e.legendData[t.num],xAxisData:e.xAxisData,yAxisData:e.yAxisData,seriesData:e.seriesData[t.num],toolboxCfg:e.toolboxCfg,tooltip:e.tooltip}}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"THD-data-container"},[a("p",[e._v(e._s(t.lable2)+": "+e._s(t.THD))]),e._v(" "),a("ul",{staticClass:"data-list"},e._l(t.THDArr,function(t,n){return a("li",{key:n},[e._v(e._s(n)+": "+e._s(t))])}),0)])])],1)],1)]})],2)},staticRenderFns:[]};var c=a("VU/8")(l,o,!1,function(e){a("n1pD")},"data-v-7a6b6072",null);t.a=c.exports},"2pEH":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),i=a.n(n),s=a("Dd8w"),r=a.n(s),l=a("NYxO"),o=a("fALy"),c=a("5w7s"),u=a("EsGT"),d=a("vfJC"),p=function(e){return[{label:"查看曲线",method:function(t){e.handleShowCurve(t)}},{label:"删除",method:function(t){e.handleDelete(t)},setStyle:function(e){return"color: red;"}}]},m={name:"GensetAlarmCurveRecord",mixins:[o.a],components:{CurveReport:u.a,ToggleCrew:c.a,GensetInfo:d.a},data:function(){return{isShowBackBtn:!("0"!==this.$route.query.pageFlag),pageFlag:this.$route.query.pageFlag||"1",type:"3",columns:(e=this,[{label:"索引值",prop:"IdX",minWidth:"25%",formatter:function(e,t,a){return""+e.IdX}},{label:"试验类型",prop:"Trigger",minWidth:"25%"},{label:"创建时间",prop:"Time",minWidth:"50%",formatter:function(t,a,n){return t.Time?e.$moment(t.Time).format("yyyy-MM-DD HH:mm:ss"):""}}]),operates:p,dataSource:[],options:{index:!0,labelIndex:"序号",props:{width:248}},loading:!1};var e},computed:r()({},Object(l.c)(["selectCrew"])),watch:{$route:{handler:function(e,t){this.pageFlag=this.$route.query.pageFlag||1,"0"===this.$route.query.pageFlag?this.isShowBackBtn=!0:this.isShowBackBtn=!1},deep:!0},selectCrew:{handler:function(e){this.paginationCfg.currentPage=1,this.queryTableData()}}},mounted:function(){this.queryTableData()},methods:{handleRefresh:function(){this.$refs.gensetInfo.getGeneratorSet(),this.queryTableData()},queryTableData:function(){var e=this;this.loading=!0;var t={page:this.paginationCfg.currentPage,pageSize:this.paginationCfg.pageSize},a={Type:"报警记录",Trigger:"报警-",GeneratorId:this.selectCrew.ID};this.$api.equipment.GeneratorSetRecordingList(a,t).then(function(t){1===t.Code&&(e.dataTotal=t.Data.TotalItemCount,e.$set(e,"dataSource",t.Data.Data)),e.loading=!1}).catch(function(){e.loading=!1})},handleShowCurve:function(e){console.log("handleShowCurve",e);var t={IndexID:e.IdX,Type:e.Type,Trigger:e.Trigger,GeneratorSetId:e.GeneratorSetId},a=this.$router.resolve({path:"/equipment/data-record/alarm-curve-record",query:{pageFlag:0,record:i()(t)}});console.log(a),window.open(a.href,"_blank")},handleBackClick:function(){this.$router.push({path:"/equipment/data-record/alarm-curve-record",query:{pageFlag:1}})},handleDelete:function(e){var t=this,a=this.$createElement;this.$confirm("删除提示",{title:"删除提示",message:a("div",[a("p","此操作将导致数据无法恢复，请谨慎操作!"),a("p","是否确定删除数据?")]),confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:e.RecordingId};t.$api.equipment.DeleteGeneratorSetFullRecord(a).then(function(e){1===e.Code&&(t.$message({type:"success",message:"删除成功!"}),t.paginationCfg.currentPage=1,t.queryTableData())}).catch(function(){t.$message({type:"success",message:"删除失败!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleReRequest:function(e){var t=this;this.$confirm("是否需要重新获取数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"重新获取数据成功!"})}).catch(function(){t.$message({type:"info",message:"已取消"})})}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return"1"===e.pageFlag?a("div",[a("el-container",[a("el-main",[a("div",{staticClass:"genset-alarm-curve-record"},[a("genset-info",{ref:"gensetInfo",on:{handleRefresh:e.handleRefresh}}),e._v(" "),a("TableList",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{options:e.options,columns:e.columns,dataSource:e.dataSource,operates:e.operates(this),dataTotal:e.dataTotal,pagination:e.paginationCfg,border:""},on:{handleChangePage:e.handleChangePage,handleChangeSize:e.handleChangeSize}})],1)]),e._v(" "),a("toggle-crew")],1)],1):a("div",[a("BMainTopComponent",{attrs:{isShowBackBtn:e.isShowBackBtn,isHandleBackClick:!0},on:{handleBackClick:e.handleBackClick}}),e._v(" "),a("CurveReport",{attrs:{curveType:e.type}})],1)},staticRenderFns:[]};var h=a("VU/8")(m,f,!1,function(e){a("wooG")},"data-v-08375186",null);t.default=h.exports},"5ZdL":function(e,t){},"6WdS":function(e,t){},ElRT:function(e,t){},Em5h:function(e,t){},IHeG:function(e,t){},JblH:function(e,t,a){e.exports=a.p+"static/img/genset-preview.710efd6.png"},OFRJ:function(e,t){},S9ey:function(e,t){},UdMW:function(e,t){},WwEu:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__=__webpack_require__("Xxa5"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__=__webpack_require__("exGp"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends__=__webpack_require__("Dd8w"),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_3_vuex__=__webpack_require__("NYxO"),__WEBPACK_IMPORTED_MODULE_4__utils_util__=__webpack_require__("oFuF"),__WEBPACK_IMPORTED_MODULE_5__DeliveryTestReportDetailCurve__=__webpack_require__("1ft7"),descriptionsItems1=[{label:"发电机组型号",key:"发电机组型号",unit:"",size:""},{label:"原动力型号",key:"原动力型号",unit:"",size:""},{label:"发动机型号",key:"发动机型号",unit:"",size:""},{label:"电机型号",key:"电机型号",unit:"",size:""},{label:"控制器型号",key:"控制器型号",unit:"",size:""},{label:"发电机组序列号",key:"发电机组序列号",unit:"",size:""},{label:"执行器型号",key:"执行器型号",unit:"",size:""},{label:"发动机序列号",key:"发动机序列号",unit:"",size:""},{label:"电机序列号",key:"电机序列号",unit:"",size:""},{label:"AVR型号",key:"AVR型号",unit:"",size:""},{label:"视在功率",key:"发电机组视在功率",unit:"kVA",size:""},{label:"功率因数",key:"发电机组功率因数",unit:"",size:""},{label:"额定频率",key:"发电机组额定频率",unit:"Hz",size:""},{label:"额定转速",key:"发电机组额定转速",unit:"r/min",size:"2"},{label:"额定功率",key:"发电机组额定功率",unit:"kW",size:""},{label:"额定电压",key:"发电机组额定电压",unit:"V",size:""},{label:"额定电流",key:"发电机组额定电流",unit:"A",size:""},{label:"励磁方式",key:"",unit:"",size:"2"},{label:"相对湿度",key:"相对湿度",unit:"",size:""},{label:"环境温度",key:"环境温度",unit:"",size:"1.5"},{label:"大气压力",key:"大气压力",unit:"",size:""},{label:"海拔高度",key:"海拔",unit:"m",size:""}];__webpack_exports__.a={name:"DeliveryTestReportDetail",components:{DeliveryTestReportDetailCurve:__WEBPACK_IMPORTED_MODULE_5__DeliveryTestReportDetailCurve__.a},props:["recordInfo"],computed:__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default()({},Object(__WEBPACK_IMPORTED_MODULE_3_vuex__.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.handleBackClick()},deep:!0}},data:function(){return{descriptionsItems1:descriptionsItems1,dataSource:{},loadPercentageList:["0%","25%","50%","75%","100%","110%","100%","75%","50%","25%","0%"],tableData:null,voltageError:"",frequencyError:"",voltageVolatility:"",frequencyVolatility:"",testPerson:"",surveyor:"",testDate:"",testTime:""}},mounted:function(){this.getCurveData(),console.log("mounted----recordInfo",this.recordInfo)},methods:{getCurveData:function(){var e=this;return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function t(){var a,n,i,s,r,l,o,c;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e,a=__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default()({},e.recordInfo),n=null,t.next=5,e.$api.equipment.GetGenRecordCurves(a).then(function(e){if(1===e.Code)return e.Data});case 5:i=t.sent,console.log(i,n),e.$set(e,"dataSource",i),s=[],r=[],l=[],o=[],c=[],e.loadPercentageList.forEach(function(e,t){var a={loadPercentage:e,power:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-功率"]/10,voltageA:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-电压UA"]/10,voltageB:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-电压UB"]/10,voltageC:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-电压UC"]/10,currentA:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-电流IA"]/10,currentB:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-电流IB"]/10,currentC:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-电流IC"]/10,powerFactor:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-功率因数"]/1e3,frequency:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-频率"]/100,voltageError:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-电压稳态误差"]/100,frequencyError:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-频率稳态误差"]/100,voltageBMax:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-B相电压最大"]/10,voltageBMin:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-B相电压最小"]/10,currentBMax:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-B相频率最大"]/100,currentBMin:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-B相频率最小"]/100,voltageVolatility:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-电压波动率"]/100,frequencyVolatility:i["("+e+")稳态测量"+(t<=5?"":"(降)")+"-频率波动率"]/100};s.push(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default()({},a,{voltageVolatility:"±"+a.voltageVolatility,frequencyVolatility:"±"+a.frequencyVolatility})),r.push(a.voltageError),l.push(a.frequencyError),o.push(a.voltageVolatility),c.push(a.frequencyVolatility)}),console.log(s),e.$set(e,"tableData",s),e.voltageError=e.arrAverageNum2(r),e.frequencyError=e.arrAverageNum2(l),e.voltageVolatility="±"+e.arrMaxNum2(o),e.frequencyVolatility="±"+e.arrMaxNum2(c),e.testDate=i["测试日期"],e.testTime=i["测试时间"];case 18:case"end":return t.stop()}},t,e)}))()},arrMaxNum2:function(e){return Math.max.apply(null,e)},arrMinNum2:function(e){return Math.min.apply(null,e)},arrAverageNum2:function arrAverageNum2(arr){var sum=eval(arr.join("+"));return~~(sum/arr.length*100)/100},handleBackClick:function(){this.$router.push({path:"/equipment/crewreport-detail",query:{selectTab:this.$route.query.selectTab||0,pageFlag:1,active:8}})},downloadFile:function(){var e={title:"发电机组"+(this.recordInfo.Trigger||"试验")+"报告",contentId:"#descriptions-box"};Object(__WEBPACK_IMPORTED_MODULE_4__utils_util__.c)(e)}}}},XJft:function(e,t){},Xq9O:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("NYxO"),i=a("vfJC"),s=a("5w7s"),r=a("X2Oc"),l=a("Dd8w"),o=a.n(l),c={name:"pageIframe",components:{ToggleCrew:a("HVSh").a},props:["linkUrl"],data:function(){return{loading:!0,iframeWin:{},flag:!1,src:"",timeInterval:null}},computed:o()({},Object(n.c)(["selectCrew"])),mounted:function(){this.src=this.linkUrl+this.selectCrew.ID,this.setIframeHeight();var e=this;this.$refs.pageIframe.attachEvent?this.$refs.pageIframe.attachEvent("onload",function(){e.loading=!1}):this.$refs.pageIframe.onload=function(){e.loading=!1}},methods:{loaded:function(){},setIframeHeight:function(){this.iframeWin=this.$refs.pageIframe.contentWindow||this.$refs.pageIframe.contentDocument.parentWindow,this.iframeWin.document.body&&(this.$refs.pageIframe.height=Math.floor(this.iframeWin.document.documentElement.scrollHeight||this.iframeWin.document.body.scrollHeight)+1+"px")}},watch:{selectCrew:function(e,t){this.loading=!0,this.src=this.linkUrl+e.ID},linkUrl:function(e,t){this.loading=!0,this.src=this.linkUrl+e.ID}}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],staticClass:"frame"},[t("iframe",{ref:"pageIframe",attrs:{id:"pageIframe",src:this.src,marginwidth:"0",marginheight:"0",frameborder:"0"}})])},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("i2q6")},"data-v-13c71caa",null).exports,p={name:"crewinfoDetail",components:{},data:function(){return{loading:!1,data:null,dataList:[{title:"基本信息",options:[{type:"ul",options:[{key:"DisplayName",label:"机组名称"},{key:"CollectorToken",label:"云猫标识"},{key:"Longitude",label:"经度"},{key:"Latitude",label:"纬度"},{key:"InstallationSite",label:"安装地点",className:"w100"},{key:"IsCurve",label:"曲线"},{key:"IsOnduty",label:"有人值守"}]}]},{title:"机组信息",options:[{type:"ul",options:[{key:"Serial",label:"出厂编号"},{key:"Brand",label:"品牌"},{key:"Model",label:"型号"},{key:"Standard",label:"规格"},{key:"Manufacturer",label:"生产厂家"},{key:"ManufactureDate",label:"生产日期"},{key:"ReMark",label:"备注"}]},{type:"ul",options:[{key:"RatedSpeed",label:"额定转速(r/min)"},{key:"RatedFrequency",label:"额定频率(Hz)"},{key:"RatedCurrent",label:"额定电流(A)"},{key:"RatedPower",label:"额定功率(kW)"},{key:"RatedVoltage",label:"额定电压(V)"},{key:"ApparentPower",label:"视在功率(kVA)"},{key:"PowerFactor",label:"功率因数"}]},{type:"ul",options:[{key:"ImgUrl",label:"机组照片"}]}]},{title:"维保信息",options:[{type:"ul",options:[{key:"GeneratorSetClientNumber",label:"客户编号"},{key:"GeneratorSetClientName",label:"客户公司"},{key:"GensetCustomerName",label:"设备归属公司",className:"w100"},{key:"GensetUserName",label:"设备责任人"},{key:"GensetUserPhone",label:"责任人联系电话"},{key:"MaintenCustomerName",label:"维保公司",className:"w100"},{key:"MaintenUserName",label:"维保联系人"},{key:"MaintenUserPhone",label:"联系人电话"}]}]},{title:"控制器信息",options:[{type:"ul",options:[{key:"ControllerSerial",label:"出厂编号"},{key:"ControllerBrand",label:"品牌"},{key:"ControllerModel",label:"型号"},{key:"ControllerStandard",label:"规格"},{key:"ControllerManufacturer",label:"生产厂家"},{key:"ControllerManufactureDate",label:"生产日期"}]},{type:"ul",options:[{key:"ControllerType",label:"控制器类型"},{key:"IsControl",label:"是否可以控制"},{key:"VoltageType",label:"供电系统"}]},{type:"ol",options:[{key:"",label:"可编程传感器 1"},{key:"",label:"可编程传感器 2"},{key:"",label:"可编程传感器 3"}]}]},{title:"发动机信息",options:[{type:"ul",options:[{key:"EngineSerial",label:"出厂编号"},{key:"EngineBrand",label:"品牌"},{key:"EngineModel",label:"型号"},{key:"EngineStandard",label:"规格"},{key:"EngineManufacturer",label:"生产厂家"},{key:"EngineManufactureDate",label:"生产日期"}]}]},{title:"发电机信息",options:[{type:"ul",options:[{key:"GeneratorSerial",label:"出厂编号"},{key:"GeneratorBrand",label:"品牌"},{key:"GeneratorModel",label:"型号"},{key:"GeneratorStandard",label:"规格"},{key:"GeneratorManufacturer",label:"生产厂家"},{key:"GeneratorManufactureDate",label:"生产日期"}]}]},{title:"采集器信息",options:[{type:"ul",options:[{key:"CollectorSerial",label:"出厂编号"},{key:"CollectorBrand",label:"品牌"},{key:"CollectorModel",label:"型号"},{key:"CollectorStandard",label:"规格"},{key:"CollectorManufacturer",label:"生产厂家"},{key:"CollectorManufactureDate",label:"生产日期"},{key:"Editstatus",label:"通讯协议状态"},{key:"CollectorTip",label:"通讯说明"}]}]},{title:"易耗配件材料统计",options:[{type:"ul",options:[{key:"InspectionCardNumber",label:"巡检卡号",className:"w100"},{key:"EngineOil",label:"防冻液容量"},{key:"EngineOilCapacityStr",label:"机油容量"},{key:"AirFilterModel",label:"空气滤清器型号"},{key:"AirFilterQuantityStr",label:"个数"},{key:"OilFilterModel",label:"机油滤清器型号"},{key:"OilFilterQuantityStr",label:"个数"},{key:"OilFilterSideModel",label:"机油旁滤清器型号"},{key:"OilFilterSideQuantityStr",label:"个数"},{key:"DieselFilterModel",label:"柴油滤清器型号"},{key:"DieselFilterQuantityStr",label:"个数"}]}]},{title:"基站信息",options:[{type:"ul",options:[{key:"BaseStationName",label:"基站名称"},{key:"BaseStationNumber",label:"基站编号"},{key:"BaseStationAddress",label:"基站地点"}]}]}]}},computed:o()({},Object(n.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.getsingleMchInfo()},deep:!0}},mounted:function(){this.getsingleMchInfo()},methods:{getsingleMchInfo:function(){var e=this;this.loading=!0,this.$api.operation.FindGeneratorSet({id:this.selectCrew.ID}).then(function(t){if(console.log(t),t.IsSuccess){var a=t.Data;a.IsCurve=a.IsCurve?"是":"否",a.IsOnduty=a.IsOnduty?"是":"否",a.ControllerType=0===a.ControllerType?"AMF模块":"未知",a.IsControl=a.IsControl?"是":"否",a.VoltageType=1===a.VoltageType?"1P2W":3===a.VoltageType?"3P3W":"未知",a.Editstatus=0===a.Editstatus?"已完成":0===a.status?"待下发":"下发中",a.CollectorTip=a.CollectorTip||"通讯正常",a.ManufactureDate=a.ManufactureDate?e.$moment(a.ManufactureDate).format("yyyy-MM-DD"):"",a.ControllerManufactureDate=a.ControllerManufactureDate?e.$moment(a.ControllerManufactureDate).format("yyyy-MM-DD"):"",a.EngineManufactureDate=a.EngineManufactureDate?e.$moment(a.EngineManufactureDate).format("yyyy-MM-DD"):"",a.GeneratorManufactureDate=a.GeneratorManufactureDate?e.$moment(a.GeneratorManufactureDate).format("yyyy-MM-DD"):"",a.CollectorManufactureDate=a.CollectorManufactureDate?e.$moment(a.CollectorManufactureDate).format("yyyy-MM-DD"):"",e.data=a}e.loading=!1}).catch(function(){e.loading=!1})},imgUrl:function(e){return Object(r.f)(e,"old")}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"crewinfo-box"}},[e.data?e._l(e.dataList,function(t,n){return a("div",{key:n,staticClass:"crewinfo-card"},[a("div",{staticClass:"crewinfo-card-header"},[e._v(e._s(t.title))]),e._v(" "),a("div",{staticClass:"crewinfo-card-content"},e._l(t.options,function(t,n){return a("div",{key:n,staticClass:"crewinfo-card-content__item"},["ul"==t.type?a("ul",e._l(t.options,function(t,n){return a("li",{key:n,class:t.className},[a("span",[e._v(e._s(t.label))]),e._v(" "),"ImgUrl"===t.key?[e.data&&e.data[t.key]?a("el-image",{style:{height:"100%",width:"220px"},attrs:{fit:"contain",src:e.imgUrl(e.data[t.key])}}):a("em",[e._v(e._s(e.data[t.key]||"未知"))])]:a("em",[e._v(e._s(e.data[t.key]||"未知"))])],2)}),0):a("ol",[e._m(0,!0),e._v(" "),e._m(1,!0),e._v(" "),e._m(2,!0)])])}),0)])}):e._e()],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("span",[this._v("可编程传感器 1")]),t("span",[this._v("显示名:")]),t("em",[this._v("温度")]),t("span",[this._v("单位:")]),t("em",[this._v("℃")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("span",[this._v("可编程传感器 2")]),t("span",[this._v("显示名:")]),t("em",[this._v("油压")]),t("span",[this._v("单位:")]),t("em",[this._v("kPa")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("span",[this._v("可编程传感器 3")]),t("span",[this._v("显示名:")]),t("em",[this._v("液位")]),t("span",[this._v("单位:")]),t("em",[this._v("%")])])}]};var f=a("VU/8")(p,m,!1,function(e){a("S9ey")},"data-v-15c76164",null).exports,h=a("oFuF"),v=a("fALy"),_={name:"crewHistory",mixins:[v.a],data:function(){return{loading:!1,tableData:[],paginationCfg:{pageSizes:[20],pageSize:20},operateType:null,dialigVisible:!1,formLabelWidth:"100px",form:{describe:"",fileList:[]},rules:{describe:[{required:!0,message:"描述",trigger:"change"}],fileList:[{required:!0,message:"请选择文件",trigger:"change"}]},limit:1}},computed:o()({},Object(n.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.currentPage=1,this.queryTableData()},deep:!0}},mounted:function(){this.queryTableData()},methods:{queryTableData:function(){var e=this,t={page:this.paginationCfg.currentPage,pageSize:this.paginationCfg.pageSize},a={GeneratorSetId:this.selectCrew.ID};this.loading=!0,this.$api.equipment.findGenSetInfoResumeByPage(a,t).then(function(t){if(console.log(t),t.IsSuccess){var a=t.Data;e.tableData=a.Data,e.dataTotal=a.TotalItemCount,e.loading=!1}}).catch(function(){e.loading=!1})},handleAddHistory:function(){this.operateType="add",this.dialigVisible=!0},exceedLimit:function(e,t){console.log(e,t),this.$message.error("上传文件个数不能超过"+this.limit+"个")},getValChange:function(e,t){console.log("getValChange",e.type,t,this.limit);var a=e.raw.type,n=["image/jpeg","image/png","image/bmp","image/gif","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/pdf","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/msword","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint"].includes(a),i=e.size/1024<=30720;return n?i?void this.$set(this.form,"fileList",t):(t.splice(t.indexOf(e),1),this.$message.warning("上传文件大小不能超过 30MB!"),!1):(t.splice(t.indexOf(e),1),this.$message.warning("上传文件格式有误!"),!1)},handleRemove:function(e,t){this.$set(this.form,"fileList",t)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;console.log(t.form);var a=new FormData;t.form.fileList.forEach(function(e){a.append("file",e.raw)}),a.append("GeneratorSetId",t.selectCrew.ID),a.append("Content",t.form.describe),t.$api.equipment.AddGensetInfoResume(a).then(function(e){1===e.Code?(t.$message({type:"success",message:"文件上传成功!"}),t.dialigVisible=!1,t.queryTableData()):t.$message({type:"error",message:"文件上传失败，请重新提交!"})}).catch(function(e){t.$message.error(e)})})},resetForm:function(e){this.$refs[e].resetFields(),this.close()},close:function(){this.dialigVisible=!1},handleDownLoad:function(e){var t=this,a={Id:e.ResumeId};this.$api.equipment.DoDownloadGensetInfoResumeFile(a).then(function(e){console.log(e),Object(h.a)(e)}).catch(function(e){t.$message.error(e)})},handleDelete:function(e){var t=this,a=this.$createElement;this.$confirm("操作提示",{title:"移除机组",message:a("div",[a("p",[a("span","确定移除当前机组吗？")])]),confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={Id:e.ResumeId};t.$api.equipment.EnableOrDisableGensetInfoResume(a).then(function(e){console.log(e),1==e.Code?(t.$message({type:"success",message:"删除成功!"}),t.queryTableData()):t.$message({type:"error",message:"删除失败，请重新尝试!"})}).catch(function(e){t.$message.error(e)})}).catch(function(){t.$message({type:"info",message:"已取消"})})}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crew-history"},[a("div",{staticClass:"crewinfo-card"},[a("div",{staticClass:"operate-btns"},[a("el-button",{staticClass:"addHistoryBtn",attrs:{type:"primary"},on:{click:function(t){return e.handleAddHistory()}}},[e._v("\n        添加\n      ")])],1),e._v(" "),a("div",{staticClass:"crewinfo-card-content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"mainTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","tooltip-effect":"light"}},[a("template",{slot:"empty"},[a("el-empty",{attrs:{image:"/static/img/nodata.png","image-size":80}})],1),e._v(" "),a("el-table-column",{attrs:{type:"index",index:e.handleChangeIndex,label:"序号",align:"center",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"GeneratorSetName",label:"机组名称","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.GeneratorSetName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Content",label:"描述","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.Content))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"CreateTime",label:"时间","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.$moment(t.row.CreateTime).format("yyyy-MM-DD HH:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-hover-show-btn"},[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDownLoad(t.row)}}},[e._v("下载")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])],1)]}}])})],2),e._v(" "),a("div",{staticClass:"pagination-box mt15 mb24"},[a("el-pagination",{attrs:{align:"center","current-page":e.paginationCfg.currentPage,"page-sizes":e.paginationCfg.pageSizes,"page-size":e.paginationCfg.pageSize,layout:e.paginationCfg.layout,total:e.dataTotal},on:{"size-change":e.handleChangeSize,"current-change":e.handleChangePage}})],1)],1)]),e._v(" "),a("el-dialog",{staticClass:"history-addedit-dialog",attrs:{title:"add"==e.operateType?"添加机组履历":"编辑机组履历",width:"50%",visible:e.dialigVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialigVisible=t},close:function(t){return e.close()}}},[a("el-form",{ref:"historyForm",attrs:{model:e.form,rules:e.rules,"label-width":e.formLabelWidth}},[a("el-form-item",{attrs:{label:"描述",prop:"describe"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.form.describe,callback:function(t){e.$set(e.form,"describe",t)},expression:"form.describe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文件上传",prop:"fileList"}},[a("el-upload",{ref:"upload",staticClass:"upload-file",attrs:{action:"#","file-list":e.form.fileList,"auto-upload":!1,"on-change":e.getValChange,"on-exceed":e.exceedLimit,"on-remove":e.handleRemove,limit:e.limit,multiple:""}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.resetForm("historyForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("historyForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var y=a("VU/8")(_,g,!1,function(e){a("wQgC")},"data-v-09bed46b",null).exports,b={name:"crewHistory",mixins:[v.a],data:function(){return{loading:!1,tableData:[],dialigVisible:!1,editTableData:[]}},computed:o()({},Object(n.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.paginationCfg.currentPage=1,this.queryTableData()},deep:!0}},mounted:function(){this.queryTableData()},methods:{queryTableData:function(){var e=this,t={Id:this.selectCrew.ID};this.loading=!0,this.$api.equipment.findGetGensetInfoBOMList(t,{}).then(function(t){console.log(t),t.IsSuccess&&(e.tableData=t.Data,e.loading=!1)}).catch(function(){e.loading=!1})},handleAddKeyParts:function(){var e=this,t={Id:this.selectCrew.ID};this.$api.equipment.GetAllGensetInfoBOMFoUpdate(t,{}).then(function(t){t.IsSuccess?(e.editTableData=t.Data,e.dialigVisible=!0):e.$message({type:"error",message:t.Message})}).catch(function(t){e.$message.error(t)})},submitForm:function(){var e=this,t={GeneratorsetId:this.selectCrew.ID,GensetInfoBOMList:this.editTableData};this.$api.equipment.AddGensetInfoBOMList(t).then(function(t){t.IsSuccess?(e.$message({type:"success",message:t.Message}),e.dialigVisible=!1,e.queryTableData()):e.$message({type:"error",message:t.Message})}).catch(function(t){e.$message.error(t)})},close:function(){this.dialigVisible=!1}}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crew-key-parts"},[a("div",{staticClass:"crewinfo-card"},[a("div",{staticClass:"operate-btns"},[a("el-button",{staticClass:"addHistoryBtn",attrs:{type:"primary"},on:{click:function(t){return e.handleAddKeyParts()}}},[e._v("\n        添加\n      ")])],1),e._v(" "),a("div",{staticClass:"crewinfo-card-content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"mainTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","tooltip-effect":"light"}},[a("template",{slot:"empty"},[a("el-empty",{attrs:{image:"/static/img/nodata.png","image-size":80}})],1),e._v(" "),a("el-table-column",{attrs:{type:"index",index:e.handleChangeIndex,label:"序号",align:"center",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"PartNameKey",label:"关重件","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.PartNameKey))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"PartSerialNumber",label:"出厂编号","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.PartSerialNumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"PartBrandName",label:"品牌","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.PartBrandName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"PartModelName",label:"型号","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.PartModelName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"PartStandardName",label:"规格","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.PartStandardName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"PartFactory",label:"厂商","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.PartFactory))])]}}])})],2)],1)]),e._v(" "),a("el-dialog",{staticClass:"keyparts-add-dialog",attrs:{title:"添加机组关重件",width:"80%",visible:e.dialigVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialigVisible=t},close:function(t){return e.close()}}},[a("div",{staticClass:"edit-table"},[a("el-table",{ref:"editTable",staticStyle:{width:"100%"},attrs:{data:e.editTableData,border:"","tooltip-effect":"light"}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"PartNameKey",label:"关重件","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.PartNameKey))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"PartSerialNumber",label:"出厂编号","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"出厂编号"},model:{value:t.row.PartSerialNumber,callback:function(a){e.$set(t.row,"PartSerialNumber",a)},expression:"scope.row['PartSerialNumber']"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"PartBrandName",label:"品牌","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"品牌"},model:{value:t.row.PartBrandName,callback:function(a){e.$set(t.row,"PartBrandName",a)},expression:"scope.row['PartBrandName']"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"PartModelName",label:"型号","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"型号"},model:{value:t.row.PartModelName,callback:function(a){e.$set(t.row,"PartModelName",a)},expression:"scope.row['PartModelName']"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"PartStandardName",label:"规格","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"规格"},model:{value:t.row.PartStandardName,callback:function(a){e.$set(t.row,"PartStandardName",a)},expression:"scope.row['PartStandardName']"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"PartFactory",label:"厂商","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"厂商"},model:{value:t.row.PartFactory,callback:function(a){e.$set(t.row,"PartFactory",a)},expression:"scope.row['PartFactory']"}})]}}])})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.close()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var D=a("VU/8")(b,C,!1,function(e){a("6WdS")},"data-v-07e5eef8",null).exports,w={name:"crewinfoDetail",components:{ToggleCrew:s.a,IframeComponent:d,CrewInfo:f,CrewHistory:y,CrewKeyParts:D},data:function(){return{tabs:[{label:"机组信息",value:0,linkUrl:"http://www.fortrustyun.com:8022/Genset/Info?condition=&mpage=0&ishow=0&gid="},{label:"机组履历",value:1,linkUrl:"http://www.fortrustyun.com:8022/Genset/InfoResume?condition=&mpage=0&ishow=0&gid="},{label:"机组关重件",value:2,linkUrl:"http://www.fortrustyun.com:8022/Genset/InfoBom?condition=&mpage=0&ishow=0&gid="}],selectTab:0}},computed:o()({},Object(n.c)(["selectCrew"]),{linkUrl:function(){var e=this;return this.tabs.filter(function(t){return t.value===e.selectTab})[0].linkUrl}}),methods:{initData:function(){0==this.selectTab?this.$refs.crewInfo.getsingleMchInfo():1==this.selectTab?this.$refs.crewHistory.queryTableData():this.$refs.crewKeyParts.queryTableData()},changeTab:function(e){this.selectTab=e}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-main",[a("div",{attrs:{id:"crewinfo-detail"}},[a("div",{staticClass:"creat-info-box"},[a("div",{staticClass:"tab-box"},e._l(e.tabs,function(t){return a("el-button",{key:t.value,class:["status-tab",{"select-tab":e.selectTab==t.value}],on:{click:function(a){return e.changeTab(t.value)}}},[e._v(e._s(t.label))])}),1),e._v(" "),0==e.selectTab?a("crew-info",{ref:"crewInfo"}):1==e.selectTab?a("crew-history",{ref:"crewHistory"}):a("crew-key-parts",{ref:"crewKeyParts"})],1)])])],1)],1)},staticRenderFns:[]};var T=a("VU/8")(w,k,!1,function(e){a("0qjw")},"data-v-ba0161c8",null).exports,x=a("KfOh"),S=a("jbYz"),I=a("mrEM"),R=a("N9LT"),$=x.a.ProjectTypeEnum,G=x.a.ProjectStatusEnum,M=[{label:"项目名称",prop:"ProjectName"},{label:"项目编号",prop:"ProjectNumber"},{label:"功率需求",prop:"TotalPower",unit:"Kw"},{label:"机组数量",prop:"Quantity",unit:"台"},{label:"项目开始时间",prop:"StartDate"},{label:"项目状态",prop:"Status"},{label:"项目结束时间",prop:"EndDate"},{label:"到期剩余时间",prop:"EndDateLast"},{label:"项目地址",prop:"ProjectArea",width:"100%"}],E=[{label:"机组名称",prop:"DisplayName"},{label:"标识",prop:"CollectorToken"},{label:"发动机型号",prop:"EngineModel"},{label:"功率",prop:"RatedPower",unit:"Kw"},{label:"运行时间",prop:"RunHourTotal",unit:"h"},{label:"是否并机",prop:"IsParallel"},{label:"电子围栏开启情况",prop:"IsFenceOpen"},{label:"维保策略录入情况",prop:"IsStrategy"},{label:"机组位置",prop:"InstallationSite",width:"100%"}],L=[{IsOpr:!1,Type:11,TypeName:"限功标定",TypeList:[],subType:1101},{IsOpr:!1,Type:12,TypeName:"权重标定",TypeList:[],subType:1102},{IsOpr:!1,Type:13,TypeName:"其他标定",TypeList:[],subType:1103},{IsOpr:!1,Type:14,TypeName:"维保配置",TypeList:[],subType:1104},{IsOpr:!1,Type:15,TypeName:"数据重置",TypeList:[],subType:1105}],F={name:"ControllerConfiguration",components:{ConfigForm:S.a,PowerLimitForm:I.a,StrategyConfigForm:R.a},computed:o()({},Object(n.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.GensetId=e.ID,this.GetGensetConfigureSetting()},deep:!0},$route:{handler:function(e,t){this.GensetId=this.selectCrew.ID,this.GetGensetConfigureSetting()},deep:!0}},data:function(){return{GensetId:null,SettingType:102,ProjectTypeEnum:$,ProjectStatusEnum:G,options:{index:!1,labelIndex:"序号"},projectInfoColumns:M,projectInfoData:{},loading_1:!1,gensetInfoColumns:E,gensetInfoData:{},loading_2:!1,GensetConfigureSetting:{IsGensetConfigure:!1,ConfigureId:null,configList:[]},configList:L,activeConfig:null,activeNum:11,isEdit:!0,formData:null}},mounted:function(){var e=this;this.GensetId=this.selectCrew.ID,this.activeConfig=L.find(function(t){return t.Type==e.activeNum}),this.GetGensetConfigureSetting()},methods:{initData:function(){this.GetGensetConfigureSetting(),14===this.activeNum?(this.$refs.strategyConfigForm.getGensetSettingDetail(),this.$refs.strategyConfigForm.isEditBase=!1,this.$refs.strategyConfigForm.isEdit=!1):11==this.activeNum?this.$refs.powerLimitForm.isEdit=!1:this.isEdit=!1},handleBackClick:function(){this.$router.push({path:"/project/project-detail",query:{active:2}})},GetGensetConfigureSetting:function(){var e=this,t={GensetId:this.GensetId,SettingType:this.SettingType};this.$api.project.GetGensetConfigureSetting(t).then(function(t){if(1===t.Code){var a=t.Data.GensetConfigureProcTypeList;e.$set(e.GensetConfigureSetting,"IsGensetConfigure",t.Data.IsGensetConfigure),e.$set(e.GensetConfigureSetting,"ConfigureId",t.Data.ConfigureId),e.$set(e.GensetConfigureSetting,"configList",a),t.Data.IsGensetConfigure?e.GetGensetConfigureDetails(e.activeNum):e.$set(e,"formData",{})}})},GetGensetConfigureDetails:function(e){var t=this,a={GensetId:this.GensetId,SettingType:this.SettingType,Type:e,ConfigureId:this.GensetConfigureSetting.ConfigureId};this.$api.project.GetGensetConfigureDetails(a).then(function(e){if(1===e.Code){var a=e.Data&&e.Data.length>0?e.Data[0]:{};a&&a.DetailList&&a.DetailList.length>0&&(a.DetailList=a.DetailList.map(function(e){return o()({},e,{Value:e.Value||0===e.Value?e.Value:void 0})})),t.$set(t,"formData",a)}})},handleInput:function(e,t){this.GensetConfigureSetting.IsGensetConfigure=!t},handleClickSwitch:function(e,t){var a=this,n=AllControlSwitchData.find(function(t){return t.key==e}),i=this.switchStatus[e+"_flag"]?"关闭":"开启",s=""+i+n.name,r="确定"+i+n.name+"吗？",l=this.$createElement;this.$confirm("操作提示",{title:s,message:l("div",[l("p",[l("span",r)])]),confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=a.switchStatus[e+"_flag"]?n.closeCode:n.openCode;a.changeSwitchStatus(e,t)}).catch(function(){a.$message({type:"info",message:"已取消"})})},changeActive:function(e){this.isEdit=!1,this.activeConfig=e,this.activeNum=e.Type,this.GetGensetConfigureDetails(this.activeNum)},handleReadClick:function(){var e=this,t={GensetId:this.GensetId,SettingType:this.SettingType,Type:this.formData.Type};this.$api.project.GensetConfigureRead(t).then(function(t){1===t.Code&&e.GetGensetConfigureDetails(e.activeNum)})},handleSaveClick:function(){var e=this;this.$refs.ConfigForm.getFormData().then(function(t){var a={GensetId:e.GensetId,SettingType:e.SettingType,Type:e.formData.Type,WriteList:t};e.$api.project.GensetConfigureSave(a).then(function(t){1===t.Code&&e.GetGensetConfigureDetails(e.activeNum)})})},handleSave:function(e){var t=this,a={GensetId:this.GensetId,SettingType:this.SettingType,Type:this.formData.Type,WriteList:e};this.$api.project.GensetConfigureSave(a).then(function(e){1===e.Code&&(t.$message({type:"success",message:e.Message}),t.GetGensetConfigureDetails(t.activeNum))})},handleRefreshClick:function(){this.GetGensetConfigureDetails(this.activeNum)},handleEditClick:function(){this.isEdit=!0},handleCancelClick:function(){this.isEdit=!1,this.GetGensetConfigureDetails(this.activeNum)},handleReset:function(){var e=this,t=this.$createElement;this.$confirm("操作提示",{title:title,message:t("div",[t("p",[t("span","确定立即重置当前机组数据吗？")])]),confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:e.GensetId,key:105};e.$api.operation.control({},t).then(function(t){e.$message.success(t.Message)}).catch(function(t){e.$message.error(t)})}).catch(function(){e.$message({type:"info",message:"已取消"})})}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"controller-configuration"},[a("div",{staticClass:"config-container"},[a("div",{staticClass:"config-container__left"},[a("ul",[a("li",[e._v("控制器配置")]),e._v(" "),e._l(e.configList,function(t,n){return[t.IsOpr?a("el-collapse",{key:n},[a("el-collapse-item",{attrs:{name:n}},[a("template",{slot:"title"},[a("span",[e._v(" "+e._s(n+1)+". "+e._s(t.TypeName))])]),e._v(" "),a("ol",[e._l(t.TypeList,function(t,n){return[a("li",{key:n,class:{active:t.Type==e.activeNum},on:{click:function(a){return e.changeActive(t)}}},[e._v("\n                    "+e._s(t.TypeName)+"\n                  ")])]})],2)],2)],1):a("li",{key:n,class:{active:t.Type==e.activeNum},on:{click:function(a){return e.changeActive(t)}}},[a("span",[e._v(e._s(n+1)+". "+e._s(t.TypeName))])])]})],2)]),e._v(" "),a("div",{staticClass:"config-container__right"},[11==e.activeNum?a("power-limit-form",{ref:"powerLimitForm",attrs:{formData:e.formData},on:{handleSave:e.handleSave,handleRefreshClick:e.handleRefreshClick,handleReadClick:e.handleReadClick}}):14==e.activeNum?a("strategy-config-form",{ref:"strategyConfigForm",attrs:{formData:e.formData,gensetId:e.GensetId},on:{handleSave:e.handleSave,handleRefreshClick:e.handleRefreshClick,handleReadClick:e.handleReadClick}}):15==e.activeNum?a("div",{staticClass:"data-config-container"},[a("div",[a("config-form",{ref:"ConfigForm",attrs:{isEdit:e.isEdit,formData:e.formData}}),e._v(" "),a("div",{staticClass:"btn-container"},[e.isEdit?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.handleRefreshClick}},[e._v("刷新")]),e._v(" "),e.isEdit?e._e():a("el-button",{attrs:{type:"primary",disabled:e.formData.IsReadIng},on:{click:e.handleReadClick}},[e._v("读取")]),e._v(" "),!e.formData||e.formData.IsReadIng||e.formData.IsWriteIng?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.handleReset}},[e._v("立即重置")])],1)],1)]):a("div",[a("config-form",{ref:"ConfigForm",attrs:{isEdit:e.isEdit,formData:e.formData}}),e._v(" "),e.formData&&e.formData.DetailList&&e.formData.DetailList.length>0?a("div",{staticClass:"btn-container"},[e.isEdit?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.handleRefreshClick}},[e._v("刷新")]),e._v(" "),e.isEdit?e._e():a("el-button",{attrs:{type:"primary",disabled:e.formData.IsReadIng},on:{click:e.handleReadClick}},[e._v("读取")]),e._v(" "),e.formData.IsReadIng||e.formData.IsWriteIng?e._e():[e.isEdit?a("span",[a("el-button",{on:{click:e.handleCancelClick}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSaveClick}},[e._v("保存")])],1):a("el-button",{attrs:{type:"primary"},on:{click:e.handleEditClick}},[e._v("编辑 ")])]],2):e._e()],1)],1)])])},staticRenderFns:[]};var V=a("VU/8")(F,A,!1,function(e){a("oKgG")},"data-v-42beb24a",null).exports,N=a("A1gM"),P=a("0/jW"),q=a("lHA8"),O=a.n(q),z=a("bOdI"),B=a.n(z),H=a("M4fF"),U=a.n(H),W=a("oqQY"),j=a.n(W),Y={name:"Curve",components:{},data:function(){return{quick:0,quickFlag:!0,dateRange:[j()().add(-2,"M"),j()().add(1,"d")],curveData:{},curveOption:{},eChartInstance:null}},props:["api","id","tab"],computed:o()({},Object(n.c)(["theme","selectCrew"])),watch:{quick:function(e){switch(this.quickFlag=!0,e){case 1:this.dateRange=[j()(),j()()];break;case 2:this.dateRange=[j()().startOf("w").add(1,"d"),j()().endOf("w").add(1,"d")];break;case 3:this.dateRange=[j()().startOf("M"),j()().endOf("M")];break;case 4:this.dateRange=[j()().startOf("y"),j()().endOf("y")]}},theme:function(){this.getCurveData()},selectCrew:function(){this.getCurveData()},dateRange:{handler:function(){this.quickFlag||(this.quick=0),this.getCurveData(),this.quickFlag=!1},immediate:!0},tab:function(){this.getCurveData()}},methods:{getCurveData:function(){var e=this,t=j()(this.dateRange[0]).format("YYYY-MM-DD"),a=j()(this.dateRange[1]).format("YYYY-MM-DD");this.tab.toString()===this.id.toString()&&this.$api.operation[this.api]({GeneratorSetId:this.selectCrew.ID,DateStart:t,DateEnd:a}).then(function(t){console.log(e.api,t);var a=t.Data;if(a){var n,i=e.handleCurveData(a),s={type:"line",smooth:!0,symbol:"circle",showSymbol:!1,symbolSize:8};e.curveOption={xAxis:{type:"time",axisLine:{lineStyle:{color:"dark"===e.theme?"white":"gray"}}},yAxis:{type:"value",axisLine:{show:!0,lineStyle:{color:"dark"===e.theme?"white":"gray"}},splitLine:{lineStyle:{color:"#ced6e088"}}},tooltip:{trigger:"axis",axisPointer:{lineStyle:{width:2,type:"line"}},position:function(e){return[e[0],"5%"]}},dataZoom:[(n={type:"inside",start:0},B()(n,"start",0),B()(n,"end",100),B()(n,"minSpan",10),B()(n,"backgroundColor","rgba(47,69,84,0)"),n),{start:0,end:100,minSpan:10,dataBackground:{lineStyle:{opacity:0},areaStyle:{opacity:0}},selectedDataBackground:{lineStyle:{opacity:0},areaStyle:{opacity:0}}}],series:[o()({name:"诊断指标",data:i.data_FNor},s,{markLine:{symbol:"none",data:[{yAxis:5,lineStyle:{color:"#e5b523",width:"2",type:"dotted"},label:{show:!0,formatter:"劣化指标：5",color:"#e5b523"}},{yAxis:2.576,lineStyle:{color:"#b34c52",width:"2",type:"dotted"},label:{show:!0,formatter:"诊断指标：2.576",color:"#b34c52"}}]}}),o()({name:"劣化指标",data:i.data_FTmp,type:"line"},s)]},e.eChartInstance||(e.eChartInstance=e.$echarts.init(document.getElementById("curve-"+e.id))),e.eChartInstance.setOption(e.curveOption),e.eChartInstance.resize()}})},handleCurveData:function(e){var t=[],a=[],n=new O.a;return e.forEach(function(e){if(!n.has(e.OperateDate)){var i=Object(r.d)(e.OperateDate).format("YYYY-MM-DD HH:mm:ss");t.push([i,Number(e.FNor)]),a.push([i,Number(e.FTmp)]),n.add(e.OperateDate)}}),{data_FNor:t,data_FTmp:a}},handleEChartResize:U.a.debounce(function(){this.eChartInstance.resize()},300)},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){window.addEventListener("resize",this.handleEChartResize)},beforeUpdated:function(){},updated:function(){},beforeDestroy:function(){window.removeEventListener("resize",this.handleEChartResize)},destroyed:function(){}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"curve-container",attrs:{id:"curve-container"+e.id}},[a("el-row",{staticClass:"curve-container-query",attrs:{type:"flex",justify:"end"}},[a("el-button",{class:{active:1===e.quick},attrs:{type:"text"},on:{click:function(t){e.quick=1}}},[e._v("今日")]),e._v(" \n    "),a("el-button",{class:{active:2===e.quick},attrs:{type:"text"},on:{click:function(t){e.quick=2}}},[e._v("本周")]),e._v(" \n    "),a("el-button",{class:{active:3===e.quick},attrs:{type:"text"},on:{click:function(t){e.quick=3}}},[e._v("本月")]),e._v(" \n    "),a("el-button",{class:{active:4===e.quick},attrs:{type:"text"},on:{click:function(t){e.quick=4}}},[e._v("本年")]),e._v("    \n    "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",placement:"bottom-start"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),e._v(" "),a("el-row",{staticClass:"curve-container-curve",attrs:{id:"curve-"+e.id}})],1)},staticRenderFns:[]};var X={name:"DeteriorationAnalysis",components:{Curve:a("VU/8")(Y,K,!1,function(e){a("mKGV")},"data-v-5df1a6ef",null).exports,ToggleCrew:s.a},data:function(){return{activeName:"water"}},props:[""],computed:{},watch:{$route:{handler:function(e,t){t&&this.initData()},deep:!0,immediate:!0}},methods:{initData:function(){switch(this.activeName){case"water":this.$refs.waterCurve.getCurveData();break;case"oil":this.$refs.oilCurve.getCurveData();break;case"battery":this.$refs.batteryCurve.getCurveData()}}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){},beforeUpdated:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},J={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-main",[a("div",{staticClass:"deterioration-analysis"},[a("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"水箱劣化分析",name:"water"}},[a("curve",{ref:"waterCurve",attrs:{tab:e.activeName,id:"water",api:"getGenLieHuaSxData"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"机油滤清器劣化分析",name:"oil"}},[a("curve",{ref:"oilCurve",attrs:{tab:e.activeName,id:"oil",api:"getGenLieHuaJyData"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"电瓶劣化分析",name:"battery"}},[a("curve",{ref:"batteryCurve",attrs:{tab:e.activeName,id:"battery",api:"getGenLieHuaDpData"}})],1)],1)],1)])],1)],1)},staticRenderFns:[]};var Q=a("VU/8")(X,J,!1,function(e){a("XJft")},"data-v-7579cdfb",null).exports,Z=[{value:12,label:"锁机"},{value:13,label:"解机"}],ee={GensetLockTypeEnum:Z,leaseGensetColumns:function(e){return[{label:"设备名称",prop:"GeneratorName",minWidth:"30%"},{label:"类型",prop:"Type",minWidth:"15%",formatter:function(e,t,a){return Z.find(function(t){return t.value==e.Type}).label}},{label:"操作时间",prop:"Creare_Time",minWidth:"20%",formatter:function(t,a,n){return t.Creare_Time?e.$moment(t.Creare_Time).format("yyyy-MM-DD HH:mm:ss"):""}},{label:"操作人",prop:"UserName",minWidth:"20%"},{label:"内容",prop:"Content",minWidth:"25%",render:function(e,t){return e("span",{class:"text-overflow-ellipsis MulLineHiding",attrs:{title:t.row.Content||""}},t.row.Content)}}]}},te=ee.GensetLockTypeEnum,ae=[{label:"机组名称",key:"DisplayName"},{label:"云猫标识",key:"CollectorToken"},{label:"发动机型号",key:"EngineModel"},{label:"电机型号",key:"GeneratorModel"},{label:"控制器品牌",key:"ControllerBrand"},{label:"控制器型号",key:"CollectorBrand"}],ne={name:"LeaseGenset",mixins:[v.a],components:{ToggleCrew:s.a},data:function(){return{loading:!1,IsGenLock:!1,LockStatus:null,LockType:null,GensetInfoList:ae,searchForm:{searchTime:null,type:"-1"},pickerTime:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}},GensetLockTypeEnum:te,columns:ee.leaseGensetColumns(this),dataSource:[],options:{index:!0,labelIndex:"序号",props:{width:126}},data:[],genset_url:a("JblH"),dialigVisible:!1,EditType:null,formLabelWidth:"100px",form:{Remark:""},animation:null}},computed:o()({},Object(n.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.FindGeneratorSet(),this.getLockStatus()},deep:!0},$route:{handler:function(e,t){t&&this.initData()},deep:!0,immediate:!0}},mounted:function(){var e=this;this.initData(),this.animation=setInterval(function(){e.getLockStatus()},1e4)},methods:{initData:function(){this.initSearchTime(),this.FindGeneratorSet(),this.getLockStatus()},initSearchTime:function(){var e=new Date,t=new Date(e.getTime()-6048e5),a=j()(e).format("YYYY-MM-DD"),n=j()(t).format("YYYY-MM-DD");this.searchForm.searchTime=[n,a]},FindGeneratorSet:function(){var e=this;this.loading=!0,this.$api.operation.FindGeneratorSet({id:this.selectCrew.ID}).then(function(t){if(1===t.Code){if(e.IsGenLock=t.Data.IsGenLock,!t.Data.IsGenLock)return void(e.loading=!1);e.queryTableData()}}).catch(function(){e.loading=!1})},getLockStatus:function(){var e=this;this.$api.operation.GetLockGenSetStatus({generatorId:this.selectCrew.ID}).then(function(t){1===t.Code&&(console.log(t),e.LockStatus=t.Data.status,e.LockType=t.Data.type)}).catch(function(){})},queryTableData:function(){var e=this;this.loading=!0;var t={Page:this.paginationCfg.currentPage,PageSize:this.paginationCfg.pageSize},a={GeneratorSetId:this.selectCrew.ID,Type:this.searchForm.type,DateStart:this.searchForm.searchTime&&this.searchForm.searchTime[0],DateEnd:this.searchForm.searchTime&&this.searchForm.searchTime[1]};this.$api.operation.GetLockRecords(a,t).then(function(t){if(1===t.Code){e.dataTotal=t.Data.TotalItemCount;var a=t.Data.Data;e.$set(e,"dataSource",a)}e.loading=!1}).catch(function(){e.loading=!1})},reset:function(){this.$set(this,"searchForm",{searchTime:null,type:"-1"})},handleEditLockType:function(e){this.EditType=e,this.form.Remark="",this.dialigVisible=!0},submitForm:function(){var e=this,t=o()({GeneratorSetId:this.selectCrew.ID,Type:this.EditType},this.form);this.$api.operation.RemoteLockGenSet(t).then(function(t){1===t.Code?e.$message({type:"success",message:t.Message}):e.$message({type:"error",message:t.Message}),e.closeDialog("dialigVisible",{refresh:!0})}).catch(function(){})},close:function(){this.closeDialog("dialigVisible")},closeDialog:function(e,t){this[e]=!1,t&&t.refresh&&this.queryTableData()}},beforeDestroy:function(){clearInterval(this.animation)}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-main",[e.IsGenLock?a("div",{staticClass:"lease-genset-manage"},[a("div",{staticClass:"genset-info-container"},[a("div",{staticClass:"genset-info"},[a("p",{staticClass:"content-title"},[e._v("机组信息")]),e._v(" "),a("ul",e._l(e.GensetInfoList,function(t,n){return a("li",{key:n},[a("p",[e._v(e._s(t.label))]),e._v(" "),a("p",[e._v(e._s(e.selectCrew[t.key]))])])}),0)]),e._v(" "),a("div",{staticClass:"genset-lock"},[a("p",{staticClass:"content-title"},[e._v("机组解锁机")]),e._v(" "),a("div",[a("el-image",{staticStyle:{width:"200px",height:"100px"},attrs:{src:e.genset_url}})],1),e._v(" "),a("el-row",{staticClass:"btn-container",attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("svg-icon",{attrs:{"icon-class":"Icon_lock_true",className:"lock-btn"},on:{click:function(t){return e.handleEditLockType(1)}}}),e._v(" "),a("p",{staticClass:"lock-text"},[a("span",[a("em",{class:0!=e.selectCrew.Status&&1==e.LockStatus&&1==e.LockType?"active":""}),e._v("\n                    锁机")])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("svg-icon",{attrs:{"icon-class":"Icon_lock_false",className:"lock-btn"},on:{click:function(t){return e.handleEditLockType(0)}}}),e._v(" "),a("p",{staticClass:"lock-text"},[a("span",[a("em",{class:0!=e.selectCrew.Status&&1==e.LockStatus&&0==e.LockType?"active":""}),e._v("\n                    解锁")])])],1)],1)],1)]),e._v(" "),a("p",{staticClass:"content-title"},[e._v("解锁机记录")]),e._v(" "),a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-item date-type"},[a("span",[e._v("筛选:")]),e._v(" "),a("el-date-picker",{staticClass:"input-with-select",attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerTime,placement:"bottom-start"},model:{value:e.searchForm.searchTime,callback:function(t){e.$set(e.searchForm,"searchTime",t)},expression:"searchForm['searchTime']"}})],1),e._v(" "),a("div",{staticClass:"search-item"},[a("span",[e._v("类型:")]),e._v(" "),a("el-select",{attrs:{"popper-append-to-body":!1,placeholder:"请选择类型"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm['type']"}},[a("el-option",{attrs:{label:"全部",value:"-1"}}),e._v(" "),e._l(e.GensetLockTypeEnum,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),a("div",{staticClass:"search-btn-box"},[a("el-button",{staticClass:"reset-btn",attrs:{type:"text"},on:{click:function(t){return e.reset()}}},[e._v("清空筛选")]),e._v(" "),a("el-button",{staticClass:"query-btn",attrs:{type:"primary"},on:{click:function(t){return e.resetCurrentParams()}}},[e._v("查 询")])],1)]),e._v(" "),a("TableList",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{styleList:{height:"100%"},options:e.options,columns:e.columns,dataSource:e.dataSource,dataTotal:e.dataTotal,pagination:e.paginationCfg,border:""},on:{handleChangePage:e.handleChangePage,handleChangeSize:e.handleChangeSize}})],1):a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"no-gen-lock"},[e._v("当前控制器暂未支持远程解锁机")])])])],1),e._v(" "),e.dialigVisible?a("el-dialog",{staticClass:"edit-lock-dialog",attrs:{title:"提示",width:"600px",visible:e.dialigVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialigVisible=t},close:function(t){return e.close()}}},[a("div",{staticClass:"dialog-content"},[a("h3",[e._v(e._s(0==e.EditType?"您确定要远程解锁吗？":"您确定要远程锁机吗？"))]),e._v(" "),e.EditType?a("p",[e._v("执行远程锁机操作后，机组将无法再次启动。请谨慎操作。")]):e._e(),e._v(" "),a("el-form",{ref:"lockForm",attrs:{model:e.form,"label-position":"top","label-width":e.formLabelWidth}},[a("el-form-item",{attrs:{label:0==e.EditType?"":"锁机原因",prop:"ProjectNumber"}},[a("el-input",{staticClass:"content-textarea",attrs:{type:"textarea",placeholder:"字符长度不超过200",maxlength:"200"},model:{value:e.form.Remark,callback:function(t){e.$set(e.form,"Remark",t)},expression:"form.Remark"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.close()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("确 定")])],1)]):e._e()],1)},staticRenderFns:[]};var se=a("VU/8")(ne,ie,!1,function(e){a("ElRT")},"data-v-072cbd2c",null).exports,re=[{value:1,label:"推送消息"},{value:0,label:"清除消息"}],le={GensetCloudMessageTypeEnum:re,GensetCloudMessageMoulds:[{value:0,label:"业务咨询：本机使用维护、技术业务咨询请联系xxx。"},{value:1,label:"验收催款：本机已完成交付验收，按合同需支付验收款，请联系xxx。"},{value:2,label:"质保催款：本机一年（/1500小时）质保期已到，按合同需缴纳质保金，请联系xxx。"},{value:3,label:"催款警告：本机欠款，有停机风险，请联系xxx。"},{value:4,label:"可靠性提醒：本机**部件有故障风险，请及时保养或更换。"},{value:5,label:"租赁催款：按合同本机需支付租赁款，请联系xxx。"},{value:6,label:"维保提醒：本机维保还有**小时到期，请及时保养或联系xxx。"},{value:7,label:"正品备件采购请联系xxx。"},{value:8,label:"专业油品采购请联系xxx。"},{value:9,label:"正品三滤采购请联系xxx。"},{value:10,label:"天气寒冷，请注意添加防冻液。"},{value:11,label:"冷却水温偏高，请注意加注冷却水。"},{value:12,label:"机油压力偏高，请更换机油、滤清器。"},{value:13,label:"机油压力偏低，请注意添加机油。"},{value:14,label:"本机起动困难，请保养起动电池。"},{value:15,label:"其它。"}],leaseGensetColumns:function(e){return[{label:"设备名称",prop:"GenDisplayName",minWidth:"20%"},{label:"轮播内容",prop:"Values",minWidth:"30%"},{label:"轮播时长",prop:"SaveTimes",minWidth:"15%",unit:"h",formatter:function(e,t,a){return e.SaveTimes||0}},{label:"推送时间",prop:"Create_date",minWidth:"25%",formatter:function(t,a,n){return t.Create_date?e.$moment(t.Create_date).format("yyyy-MM-DD HH:mm:ss"):""}},{label:"类型",prop:"Type",minWidth:"15%",formatter:function(e,t,a){return re.find(function(t){return t.value==e.Type}).label}}]}},oe=le.GensetCloudMessageTypeEnum,ce=le.GensetCloudMessageMoulds,ue={name:"AddCrewDialog",props:{},data:function(){return{loading:!1,dialigVisible:!0,GensetCloudMessageTypeEnum:oe,GensetCloudMessageMoulds:ce,formLabelWidth:"120px",form:{DisplayName:"",CollectorToken:"",type:null,mould:null,content:null,hour:"",minute:"",second:""},rules:{type:[{required:!0,message:"请选择类型",trigger:"change"}],mould:[{required:!0,message:"请选择模板",trigger:"change"}],content:[{required:!0,message:"请输入轮播内容",trigger:"blur"}]}}},computed:o()({},Object(n.c)(["selectCrew"])),mounted:function(){console.log(this.selectCrew),this.form.DisplayName=this.selectCrew.DisplayName,this.form.CollectorToken=this.selectCrew.CollectorToken},methods:{handleChangeSelType:function(e){console.log(e),this.form.mould=null},handleChangeSelMould:function(e){console.log(e,this.form.mould);var t=this.GensetCloudMessageMoulds.find(function(t){return t.value==e}).label;t=t.replace("**","____").replace("xxx","____"),this.$set(this.form,"content",t)},handleChangeHour:function(){},handleChangeMinute:function(){},handleChangeSecond:function(){},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){console.log(t.form);var a=(void 0==t.form.hour?0:3600*parseInt(t.form.hour))+(void 0==t.form.minute?0:60*parseInt(t.form.minute))+(void 0==t.form.second?0:parseInt(t.form.second)),n={GeneratorSetId:t.selectCrew.ID,Type:t.form.type,Values:t.form.content,SaveTimes:a};t.$api.operation.AddMessagePush(n).then(function(e){1===e.Code&&(console.log(e),t.$message({type:"success",message:e.Message}),t.$emit("closeDialog",{refresh:!0}))}).catch(function(){})}})},resetForm:function(e){this.$refs[e].resetFields(),this.close()},close:function(){this.$emit("closeDialog")}}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"add-message-dialog",attrs:{title:"添加推送消息",width:"50%",visible:e.dialigVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialigVisible=t},close:function(t){return e.close()}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":e.formLabelWidth}},[a("el-form-item",{attrs:{label:"机组名称",prop:"DisplayName"}},[a("p",[e._v(e._s(e.form.DisplayName))])]),e._v(" "),a("el-form-item",{attrs:{label:"云猫标识",prop:"CollectorToken"}},[a("p",[e._v(e._s(e.form.CollectorToken))])]),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择租赁类型"},on:{change:e.handleChangeSelType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.GensetCloudMessageTypeEnum,function(e,t){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),0!==e.form.type?a("el-form-item",{attrs:{label:"选择模板",prop:"mould"}},[a("el-select",{attrs:{placeholder:"请选择模板"},on:{change:e.handleChangeSelMould},model:{value:e.form.mould,callback:function(t){e.$set(e.form,"mould",t)},expression:"form.mould"}},e._l(e.GensetCloudMessageMoulds,function(e,t){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1):e._e(),e._v(" "),0!==e.form.type?a("el-form-item",{attrs:{label:"轮播内容",prop:"content"}},[a("el-input",{staticClass:"content-textarea",attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"50","show-word-limit":"",disabled:0===e.form.type},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}}),e._v(" "),a("span",{staticClass:"form-item-tip"},[e._v("注意替换模板中的“___”")])],1):e._e(),e._v(" "),0!==e.form.type?a("el-form-item",{attrs:{label:"轮播时长"}},[a("div",{staticClass:"input-group"},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:999,disabled:0===e.form.type},on:{change:e.handleChangeHour},model:{value:e.form.hour,callback:function(t){e.$set(e.form,"hour",t)},expression:"form.hour"}}),e._v(" "),a("span",[e._v("小时")]),e._v(" "),a("el-input-number",{attrs:{"controls-position":"right",min:0,max:59,disabled:0===e.form.type},on:{change:e.handleChangeMinute},model:{value:e.form.minute,callback:function(t){e.$set(e.form,"minute",t)},expression:"form.minute"}}),e._v(" "),a("span",[e._v("分钟")]),e._v(" "),a("el-input-number",{attrs:{"controls-position":"right",min:0,max:59,disabled:0===e.form.type},on:{change:e.handleChangeSecond},model:{value:e.form.second,callback:function(t){e.$set(e.form,"second",t)},expression:"form.second"}}),e._v(" "),a("span",[e._v("秒")])],1),e._v(" "),a("span",{staticClass:"form-item-tip"},[e._v("若轮播时长设置为0或不填写，则代表永久轮播。")])]):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var pe=a("VU/8")(ue,de,!1,function(e){a("bVtG")},"data-v-3633a5d3",null).exports,me=le.GensetCloudMessageTypeEnum,fe={name:"LeaseGenset",mixins:[v.a],components:{ToggleCrew:s.a,AddLeaseGensetDialog:pe},data:function(){return{loading:!1,IsGenMsgPush:!1,searchForm:{Type:"-1"},GensetCloudMessageTypeEnum:me,columns:le.leaseGensetColumns(this),dataSource:[],options:{index:!0,labelIndex:"序号",props:{width:86}},data:[],crewManageVisible:!1,recordInfo:null}},computed:o()({},Object(n.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.paginationCfg.currentPage=1,this.FindGeneratorSet()},deep:!0},$route:{handler:function(e,t){t&&this.FindGeneratorSet()},deep:!0,immediate:!0}},mounted:function(){this.FindGeneratorSet()},methods:{initData:function(){this.FindGeneratorSet()},FindGeneratorSet:function(){var e=this;this.loading=!0,this.$api.operation.FindGeneratorSet({id:this.selectCrew.ID}).then(function(t){if(1===t.Code){if(e.IsGenMsgPush=t.Data.IsGenMsgPush,!t.Data.IsGenMsgPush)return void(e.loading=!1);e.queryTableData()}}).catch(function(){e.loading=!1})},queryTableData:function(){var e=this;this.loading=!0;var t={Page:this.paginationCfg.currentPage,PageSize:this.paginationCfg.pageSize},a=o()({GeneratorSetId:this.selectCrew.ID},this.searchForm);this.$api.operation.GetMessageList(a,t).then(function(t){if(1===t.Code){console.log(t),e.dataTotal=t.Data.TotalItemCount;var a=t.Data.Data;e.$set(e,"dataSource",a)}e.loading=!1}).catch(function(){e.loading=!1})},reset:function(){this.$set(this,"searchForm",{Type:"-1"})},handleAddLeaseGenset:function(){this.crewManageVisible=!0},handleDelete:function(e){var t=this;this.$api.operation.DeleteMessagePush({id:e.GeneratorSetId}).then(function(e){1===e.Code&&(t.queryTableData(),t.$message({type:"success",message:e.Message}))}).catch(function(){})},closeDialog:function(e,t){this[e]=!1,t&&t.refresh&&this.queryTableData()}}},he={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-main",[e.IsGenMsgPush?a("div",{staticClass:"lease-genset-manage"},[a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-item"},[a("span",[e._v("筛选:")]),e._v(" "),a("el-select",{attrs:{"popper-append-to-body":!1,placeholder:"请选择类型"},model:{value:e.searchForm.Type,callback:function(t){e.$set(e.searchForm,"Type",t)},expression:"searchForm.Type"}},[a("el-option",{attrs:{label:"全部",value:"-1"}}),e._v(" "),e._l(e.GensetCloudMessageTypeEnum,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),a("div",{staticClass:"search-btn-box"},[a("el-button",{staticClass:"reset-btn",attrs:{type:"text"},on:{click:function(t){return e.reset()}}},[e._v("清空筛选")]),e._v(" "),a("el-button",{staticClass:"query-btn",attrs:{type:"primary"},on:{click:function(t){return e.resetCurrentParams()}}},[e._v("查 询")])],1)]),e._v(" "),a("div",{staticClass:"operation-box"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAddLeaseGenset()}}},[e._v(" 添加推送消息 ")])],1),e._v(" "),a("TableList",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{styleList:{height:"100%"},options:e.options,columns:e.columns,dataSource:e.dataSource,dataTotal:e.dataTotal,pagination:e.paginationCfg,border:""},on:{handleChangePage:e.handleChangePage,handleChangeSize:e.handleChangeSize}},[a("el-table-column",e._b({attrs:{slot:"operation",label:"操作",align:"center"},slot:"operation",scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"operate-group"},[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v(" 移除 ")])],1)]}}],null,!1,2529364352)},"el-table-column",e.options&&e.options.props,!1))],1)],1):a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"no-genmsg-push"},[e._v("当前控制器暂未支持云消息推送")])])])],1),e._v(" "),e.crewManageVisible?a("AddLeaseGensetDialog",{on:{closeDialog:function(t){return e.closeDialog("crewManageVisible",t)}}}):e._e()],1)},staticRenderFns:[]};var ve=a("VU/8")(fe,he,!1,function(e){a("5ZdL")},"data-v-0a881374",null).exports,_e=a("pFYg"),ge=a.n(_e),ye=a("mvHQ"),be=a.n(ye),Ce=function(e){return[{label:"查看报告",method:function(t){e.handleShowReport(t)}},{label:"删除",method:function(t){e.handleDelete(t)},setStyle:function(e){return"color: red;"}}]},De={name:"DeliveryTestReport",mixins:[v.a],data:function(){return{loading:!1,columns:(e=this,[{label:"索引值",prop:"IdX"},{label:"试验类型",prop:"Trigger"},{label:"创建时间",prop:"Time",formatter:function(t,a,n){return t.Time?e.$moment(t.Time).format("yyyy-MM-DD HH:mm:ss"):""}}]),operates:Ce,dataSource:[],options:{index:!0,labelIndex:"序号"}};var e},computed:o()({},Object(n.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.paginationCfg.currentPage=1,this.queryTableData()},deep:!0}},mounted:function(){this.queryTableData()},methods:{queryTableData:function(){var e=this;this.loading=!0;var t={page:this.paginationCfg.currentPage,pageSize:this.paginationCfg.pageSize},a={Type:"测试记录",Trigger:"出厂试验",GeneratorId:this.selectCrew.ID};this.$api.equipment.GeneratorSetRecordingList(a,t).then(function(t){1===t.Code&&(e.dataTotal=t.Data.TotalItemCount,e.$set(e,"dataSource",t.Data.Data)),e.loading=!1}).catch(function(){e.loading=!1})},handleShowReport:function(e){var t={IndexID:e.IdX,Type:e.Type,Trigger:e.Trigger,GeneratorSetId:e.GeneratorSetId};this.$router.resolve({path:"/equipment/crewreport-detail",query:{selectTab:0,pageFlag:0,record:be()(t)}});this.$emit("showReport",{record:t,selectTab:0,pageFlag:0})},handleDelete:function(e){var t=this,a=this.$createElement;this.$confirm("删除提示",{title:"删除提示",message:a("div",[a("p","此操作将导致数据无法恢复，请谨慎操作!"),a("p","是否确定删除数据?")]),confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:e.RecordingId};t.$api.equipment.DeleteGeneratorSetFullRecord(a).then(function(e){1===e.Code&&(t.$message({type:"success",message:"删除成功!"}),t.paginationCfg.currentPage=1,t.queryTableData())}).catch(function(){t.$message({type:"success",message:"删除失败!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleReRequest:function(e){var t=this;this.$confirm("是否需要重新获取数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"重新获取数据成功!"})}).catch(function(){t.$message({type:"info",message:"已取消"})})}}},we={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("TableList",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{options:e.options,columns:e.columns,dataSource:e.dataSource,operates:e.operates(this),dataTotal:e.dataTotal,pagination:e.paginationCfg},on:{handleChangePage:e.handleChangePage,handleChangeSize:e.handleChangeSize}})},staticRenderFns:[]};var ke=a("VU/8")(De,we,!1,function(e){a("Em5h")},"data-v-1da092e9",null).exports,Te=function(e){return[{label:"查看报告",method:function(t){e.handleShowReport(t)}},{label:"删除",method:function(t){e.handleDelete(t)},setStyle:function(e){return"color: red;"}}]},xe={name:"InteractionTestReport",mixins:[v.a],data:function(){return{loading:!1,columns:(e=this,[{label:"索引值",prop:"IdX"},{label:"试验类型",prop:"Trigger"},{label:"创建时间",prop:"Time",formatter:function(t,a,n){return t.Time?e.$moment(t.Time).format("yyyy-MM-DD HH:mm:ss"):""}}]),operates:Te,dataSource:[],options:{index:!0,labelIndex:"序号"}};var e},computed:o()({},Object(n.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.paginationCfg.currentPage=1,this.queryTableData()},deep:!0}},mounted:function(){this.queryTableData()},methods:{queryTableData:function(){var e=this;this.loading=!0;var t={page:this.paginationCfg.currentPage,pageSize:this.paginationCfg.pageSize},a={Type:"测试记录",Trigger:"交付验收试验",GeneratorId:this.selectCrew.ID};this.$api.equipment.GeneratorSetRecordingList(a,t).then(function(t){1===t.Code&&(e.dataTotal=t.Data.TotalItemCount,e.$set(e,"dataSource",t.Data.Data)),e.loading=!1}).catch(function(){e.loading=!1})},handleShowReport:function(e){var t={IndexID:e.IdX,Type:e.Type,Trigger:e.Trigger,GeneratorSetId:e.GeneratorSetId};this.$router.resolve({path:"/equipment/crewreport-detail",query:{selectTab:1,pageFlag:0,record:be()(t)}});this.$emit("showReport",{record:t,selectTab:1,pageFlag:0})},handleDelete:function(e){var t=this,a=this.$createElement;this.$confirm("删除提示",{title:"删除提示",message:a("div",[a("p","此操作将导致数据无法恢复，请谨慎操作!"),a("p","是否确定删除数据?")]),confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:e.RecordingId};t.$api.equipment.DeleteGeneratorSetFullRecord(a).then(function(e){1===e.Code&&(t.$message({type:"success",message:"删除成功!"}),t.paginationCfg.currentPage=1,t.queryTableData())}).catch(function(){t.$message({type:"success",message:"删除失败!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleReRequest:function(e){var t=this;this.$confirm("是否需要重新获取数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"重新获取数据成功!"})}).catch(function(){t.$message({type:"info",message:"已取消"})})}}},Se={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("TableList",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{options:e.options,columns:e.columns,dataSource:e.dataSource,operates:e.operates(this),dataTotal:e.dataTotal,pagination:e.paginationCfg},on:{handleChangePage:e.handleChangePage,handleChangeSize:e.handleChangeSize}})},staticRenderFns:[]};var Ie=a("VU/8")(xe,Se,!1,function(e){a("IHeG")},"data-v-010cff81",null).exports,Re=a("Gu7T"),$e=a.n(Re),Ge=a("Xxa5"),Me=a.n(Ge),Ee=a("exGp"),Le=a.n(Ee),Fe=[{label:"发电机组型号",key:"发电机组型号",unit:"",size:""},{label:"原动力型号",key:"原动力型号",unit:"",size:""},{label:"发动机型号",key:"发动机型号",unit:"",size:""},{label:"电机型号",key:"电机型号",unit:"",size:""},{label:"控制器型号",key:"控制器型号",unit:"",size:""},{label:"发电机组序列号",key:"发电机组序列号",unit:"",size:""},{label:"执行器型号",key:"执行器型号",unit:"",size:""},{label:"发动机序列号",key:"发动机序列号",unit:"",size:""},{label:"电机序列号",key:"电机序列号",unit:"",size:""},{label:"AVR型号",key:"AVR型号",unit:"",size:""},{label:"视在功率",key:"发电机组视在功率",unit:"kVA",size:""},{label:"功率因数",key:"发电机组功率因数",unit:"",size:""},{label:"额定频率",key:"发电机组额定频率",unit:"Hz",size:""},{label:"额定转速",key:"发电机组额定转速",unit:"r/min",size:"2"},{label:"额定功率",key:"发电机组额定功率",unit:"kW",size:""},{label:"额定电压",key:"发电机组额定电压",unit:"V",size:""},{label:"额定电流",key:"发电机组额定电流",unit:"A",size:""},{label:"励磁方式",key:"",unit:"",size:"2"},{label:"相对湿度",key:"相对湿度",unit:"",size:""},{label:"环境温度",key:"环境温度",unit:"",size:"1.5"},{label:"大气压力",key:"大气压力",unit:"",size:""},{label:"海拔高度",key:"海拔",unit:"m",size:""}],Ae=function(){for(var e=[],t=0;t<10;t++)for(var a=0;a<10;a++)e.push([t,a]);return e}(),Ve={name:"TimeMatrixReport",data:function(){return{size:"",descriptionsItems:Fe,dataSource:null,radioType:0,myChart:null,arrX:[],arrY:[],arrS:[],data:null,tableData:[],noDataFlag:!1}},computed:o()({},Object(n.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.getReportData()},deep:!0}},mounted:function(){this.getReportData()},methods:{getReportData:function(){var e=this;return Le()(Me.a.mark(function t(){var a,n;return Me.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={generatorId:e.selectCrew.ID},t.next=3,e.$api.equipment.GetGeneratorSetPowerTimeList({},a).then(function(e){if(1===e.Code)return console.log(e.Data),e.Data});case 3:n=t.sent,e.dataSource=n.dic,e.data=n,e.initData();case 7:case"end":return t.stop()}},t,e)}))()},initData:function(){var e,t,a,n=this.data.poSpProjects[0]?this.data.poSpProjects[0].Value:null,i=this.data.poSpProjects[1]?this.data.poSpProjects[1].Value:null,s=this.data.psSpDetails.Value,r=this.data.psSpDetails.Unit;if(n&&i){this.noDataFlag=!1;var l=n.split(",").map(Number),o=i.split(",").map(Number),c=s.split(",").map(Number).map(function(e){return e<10?0:(e*r/10/3600).toFixed(2)}),u=l.map(function(e){return e+"RPM"});u.unshift("");var d=[];u.forEach(function(e,t){var a=[];0===t?(a=o.map(function(e){return e+"KW"}),d.push([e].concat($e()(a)))):(a=c.slice(10*(t-1),10*t),d.push([e].concat($e()(a))))}),d.reverse(),this.$set(this,"tableData",d),this.arrX=l,this.arrY=o.map(function(e){return e+"KW"}),this.arrS=Ae.map(function(e,t){return[].concat($e()(e),[c[t]])});var p=document.getElementById("powerTimeReport");this.myChart=this.$echarts.init(p);var m=(e=this.arrX,t=this.arrY,a=this.arrS,{tooltip:{formatter:function(a){return'<div style = "text-align:left">转速: '+e[a.value[0]]+"RPM<br/>功率: "+t[a.value[1]]+"<br/>时间: "+a.value[2]+"(h)</div>"}},visualMap:{min:.001,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]}},xAxis3D:{type:"category",name:"转速",nameTextStyle:{color:"#cccccc"},axisLabel:{interval:0,color:"#cccccc"},axisLine:{lineStyle:{color:"#cccccc"}},data:e},yAxis3D:{type:"category",name:"功率",nameTextStyle:{color:"#cccccc"},axisLabel:{interval:0,color:"#cccccc"},axisLine:{lineStyle:{color:"#cccccc"}},data:t},zAxis3D:{type:"value",name:"时间(h)",nameTextStyle:{color:"#cccccc"},axisLabel:{interval:0,color:"#cccccc"},axisLine:{lineStyle:{color:"#cccccc"}}},grid3D:{boxWidth:200,boxDepth:80,viewControl:{},light:{main:{intensity:1.2,shadow:!0},ambient:{intensity:.3}}},series:[{type:"bar3D",data:a,shading:"lambert",label:{show:!0,fontSize:16,borderWidth:1},emphasis:{label:{fontSize:20,color:"#900"},itemStyle:{color:"#900"}}}]});this.myChart.setOption(m)}else{for(var f=[],h=0;h<11;h++)f.push([].concat($e()(new Array(11).fill(""))));this.$set(this,"tableData",f),this.noDataFlag=!0}},downloadFile:function(){Object(h.c)({title:"发电机组功率时间矩阵分析报表",contentId:"#descriptions-box"})}}},Ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"time-matrix-report-main"},[a("div",{staticClass:"operate-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.downloadFile}},[e._v("下载")]),e._v(" "),e._m(0)],1),e._v(" "),a("div",{staticClass:"descriptions-box",attrs:{id:"descriptions-box"}},[a("p",{staticClass:"title"},[e._v("发电机组功率时间矩阵分析报表")]),e._v(" "),a("el-descriptions",{staticClass:"margin-top",attrs:{title:"",column:5,size:e.size,border:""}},[e._l(e.descriptionsItems,function(t,n){return[a("el-descriptions-item",{key:n,attrs:{span:t.size}},[a("template",{slot:"label"},[e._v(e._s(t.label))]),e._v(" "),a("div",{staticClass:"description-content-box"},[a("span",[e._v(e._s(e.dataSource&&e.dataSource[t.key]))]),e._v(" "),t.unit?a("span",[e._v(e._s(t.unit))]):e._e()])],2)]})],2),e._v(" "),a("div",{staticClass:"radio-change-box"},[a("span",[e._v("海拔高度："+e._s(e.dataSource&&e.dataSource["海拔"]?e.dataSource["海拔"]+" m":"-"))]),e._v(" "),a("el-radio-group",{model:{value:e.radioType,callback:function(t){e.radioType=t},expression:"radioType"}},[a("el-radio",{attrs:{label:0}},[e._v("3D矩阵")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("二维矩阵")])],1)],1),e._v(" "),a("div",{staticClass:"matrix-content-box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.radioType,expression:"radioType === 0"}],key:"0",attrs:{id:"powerTimeReport"}},[a("p",{directives:[{name:"show",rawName:"v-show",value:e.noDataFlag,expression:"noDataFlag"}],staticClass:"no-data"},[a("i",{staticClass:"el-icon-circle-close"}),e._v(" 暂无记录!")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.radioType,expression:"radioType === 1"}],key:"1",staticClass:"timeTable"},e._l(e.tableData,function(t,n){return a("el-row",{key:"row_"+n,attrs:{type:"flex"}},[e._l(t,function(t,i){return[a("el-col",{key:"col_"+n+"_"+i,attrs:{span:0==i?4:2}},[e._v(e._s(t))])]})],2)}),1)])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"data-source"},[this._v("数据来源："),t("span",[this._v("机组信息获取")]),t("span",[this._v("手动输入")])])}]};var Pe=a("VU/8")(Ve,Ne,!1,function(e){a("UdMW")},"data-v-b4c1f974",null).exports,qe=a("eTTQ"),Oe=["#5470C6","#91CC75"],ze=[{label:"停机类报警",key:"TotalAlarmCount",type:"bar",unit:"kwh",data:[2,4.9,7,23.2,25.6,76.7,135.6,162.2,32.6,20,6.4,3.3]},{label:"警告类报警",key:"TotalWarnCount",type:"bar",data:[2,2.2,3.3,4.5,6.3,10.2,20.3,23.4,23,16.5,12,6.2]}],Be={name:"OperationalReliabilityReport",components:{BaseEcharts:qe.a,OperationReportComponent:Je},props:["year"],data:function(){return{dataSource:null,title:"机组运行可靠性报告",flag:!1,toolboxCfg:{dataViewIsShow:!0,magicTypeIsShow:!0,restoreIsShow:!0,saveAsImageIsShow:!0},containerId:"alarm-report-echart",colors:Oe,grid:{left:"5%",right:"8%",top:"15%"},legendData:[],xAxisData:[],yAxisData:[],seriesData:[],data:null}},computed:o()({},Object(n.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.getData()},deep:!0},year:function(e,t){this.getData()}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;return Le()(Me.a.mark(function t(){var a;return Me.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={GeneratorSetId:e.selectCrew.ID,Year:e.year,StartTime:e.year+"-01"},t.next=3,e.$api.equipment.GetGensetAlarmReport(a,{}).then(function(t){1===t.Code&&(e.$set(e,"data",t.Data),e.$set(e,"dataSource",o()({},t.Data.Genset,{TotalYearAllAlarm:t.Data.TotalYearAllAlarm,TotalYearAllWarn:t.Data.TotalYearAllWarn})))}).catch(function(){});case 3:e.init();case 4:case"end":return t.stop()}},t,e)}))()},init:function(){var e=this;console.log(this.data),this.xAxisData=[{type:"category",axisTick:{alignWithLabel:!0},data:this.data.TotalMonth}],this.yAxisData=[{type:"value",name:"数量",min:0,minInterval:1,axisLine:{show:!0,lineStyle:{color:Oe[0]}},splitLine:{show:!0,lineStyle:{color:"#6E7079",opacity:.4}}}];var t=[],a=[];ze.forEach(function(n,i){t.push(n.label);var s={name:n.label,type:n.type,data:e.data[n.key]};a.push(s)}),this.$set(this,"legendData",t),this.$set(this,"seriesData",a),this.flag=!0}}},He={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operational-reliability-report"},[a("el-descriptions",{staticClass:"alarm-descriptions-items",attrs:{title:"",column:1,border:""}},[a("el-descriptions-item",[a("template",{slot:"label"},[e._v("停机类报警")]),e._v(" "),a("div",{staticClass:"description-content-box"},[a("span",[e._v(e._s(e.dataSource&&e.dataSource.TotalYearAllAlarm)+" 次")])])],2),e._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[e._v("警告类报警")]),e._v(" "),a("div",{staticClass:"description-content-box"},[a("span",[e._v(e._s(e.dataSource&&e.dataSource.TotalYearAllWarn)+" 次")])])],2)],1),e._v(" "),e.flag?a("BaseEcharts",{attrs:{containerId:e.containerId,colors:e.colors,grid:e.grid,legendData:e.legendData,xAxisData:e.xAxisData,yAxisData:e.yAxisData,seriesData:e.seriesData,toolboxCfg:e.toolboxCfg}}):e._e()],1)},staticRenderFns:[]};var Ue=a("VU/8")(Be,He,!1,function(e){a("hIp4")},"data-v-649c5034",null).exports,We=[{label:"机组名称",key:"DisplayName",unit:"",size:""},{label:"云猫标识",key:"CollectorToken",unit:"",size:""},{label:"品牌",key:"Brand",unit:"",size:""},{label:"出厂编号",key:"Serial",unit:"",size:""},{label:"发动机",key:"EngineBrand",unit:"",size:""},{label:"发电机",key:"GeneratorBrand",unit:"",size:""},{label:"采集器",key:"CollectorBrand",unit:"",size:""},{label:"控制器",key:"ControllerBrand",unit:"",size:""},{label:"累计发电量",key:"TotalYearEnergy",unit:"kwh",size:"2"},{label:"累计运行时间",key:"TotalYearAllMinute",unit:"分钟",size:"2"}],je=["#5470C6","#91CC75","#EE6666"],Ye=[{label:"发电量",key:"TotalEnergy",type:"bar",unit:"kwh",data:[2,4.9,7,23.2,25.6,76.7,135.6,162.2,32.6,20,6.4,3.3]},{label:"运行时间",key:"TotalTime",type:"bar",unit:"Min",data:[2.6,5.9,9,26.4,28.7,70.7,175.6,182.2,48.7,18.8,6,2.3]},{label:"次数",key:"TotalCount",type:"line",data:[2,2.2,3.3,4.5,6.3,10.2,20.3,23.4,23,16.5,12,6.2]}],Ke={name:"OperationReportComponent",components:{BaseEcharts:qe.a,OperationalReliabilityReportCurve:Ue},props:["title"],data:function(){return{size:"",descriptionsItems:We,dataSource:null,selectYear:(new Date).getFullYear().toString(),year:(new Date).getFullYear().toString(),pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},flag:!1,toolboxCfg:{dataViewIsShow:!0,magicTypeIsShow:!0,restoreIsShow:!0,saveAsImageIsShow:!0},containerId:"operation-report-echart",colors:je,grid:{left:"5%",right:"8%",top:"15%"},legendData:[],xAxisData:[],yAxisData:[],seriesData:[],data:null}},computed:o()({},Object(n.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.getData()},deep:!0}},mounted:function(){this.getData()},methods:{initData:function(){"机组运行可靠性报告"==this.title&&this.$refs.OperationalReliabilityReportCurve.getData()},handleSearch:function(){this.selectYear||(this.selectYear=this.year),this.year=this.selectYear,this.getData()},getData:function(){var e=this;return Le()(Me.a.mark(function t(){var a;return Me.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={GeneratorSetId:e.selectCrew.ID,Year:e.year,StartTime:e.year+"-01"},t.next=3,e.$api.equipment.GetGensetRunReport(a,{}).then(function(t){1===t.Code&&(e.$set(e,"data",t.Data),e.$set(e,"dataSource",o()({},t.Data.Genset,{TotalYearEnergy:t.Data.TotalYearEnergy,TotalYearAllMinute:t.Data.TotalYearAllMinute,TotalYearHour:t.Data.TotalYearHour,TotalYearMinute:t.Data.TotalYearMinute})))}).catch(function(){});case 3:e.init();case 4:case"end":return t.stop()}},t,e)}))()},init:function(){var e=this;this.xAxisData=[{type:"category",axisTick:{alignWithLabel:!0},data:this.data.TotalMonth}];var t=[],a=[],n=[];Ye.forEach(function(i,s){t.push(i.label);var r={type:"value",name:i.label+" "+(i.unit||""),min:0,position:0===s?"left":"right",offset:s>=2?50*(s-1):0,axisLine:{show:!0,lineStyle:{color:je[s]}},splitLine:{show:!0,lineStyle:{color:"#6E7079",opacity:.4}},axisLabel:{formatter:"{value}"}};a.push(r);var l={name:i.label,type:i.type,yAxisIndex:s,data:e.data[i.key]};n.push(l)}),this.$set(this,"legendData",t),this.$set(this,"yAxisData",a),this.$set(this,"seriesData",n),this.$nextTick(function(){e.flag=!0})},downloadFile:function(){var e={title:this.title,contentId:"#descriptions-box"};Object(h.c)(e)}}},Xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operation-report-main"},[a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-item"},[a("span",[e._v("筛选:")]),e._v(" "),a("el-date-picker",{attrs:{type:"year",placeholder:"选择年","value-format":"yyyy","picker-options":e.pickerOptions,placement:"bottom-start"},model:{value:e.selectYear,callback:function(t){e.selectYear=t},expression:"selectYear"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSearch()}}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.downloadFile}},[e._v("下载")])],1),e._v(" "),a("div",{staticClass:"descriptions-box",attrs:{id:"descriptions-box"}},[a("p",{staticClass:"title"},[e._v(e._s(e.title))]),e._v(" "),a("el-descriptions",{staticClass:"descriptions-items",attrs:{title:"",column:2,size:e.size,border:""}},[e._l(e.descriptionsItems,function(t,n){return[a("el-descriptions-item",{key:n,attrs:{span:t.size}},[a("template",{slot:"label"},[e._v(e._s(t.label))]),e._v(" "),a("div",{staticClass:"description-content-box"},[e._v("\n            "+e._s(e.dataSource&&e.dataSource[t.key]||"-")+"\n            "),e.dataSource&&e.dataSource[t.key]&&t.unit?a("span",[e._v(e._s(t.unit))]):e._e()])],2)]})],2),e._v(" "),e.flag?a("BaseEcharts",{attrs:{containerId:e.containerId,colors:e.colors,grid:e.grid,legendData:e.legendData,xAxisData:e.xAxisData,yAxisData:e.yAxisData,seriesData:e.seriesData,toolboxCfg:e.toolboxCfg}}):e._e(),e._v(" "),"机组运行可靠性报告"==e.title?a("OperationalReliabilityReportCurve",{ref:"OperationalReliabilityReportCurve",attrs:{year:e.year}}):e._e()],1)])},staticRenderFns:[]};var Je=a("VU/8")(Ke,Xe,!1,function(e){a("eMR9"),a("iQCd")},"data-v-298042ee",null).exports,Qe={name:"OperationReport",components:{OperationReportComponent:Je},data:function(){return{title:"机组运行报告"}},mounted:function(){},methods:{initData:function(){this.$refs.OperationReportComponent.getData()}}},Ze={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("OperationReportComponent",{ref:"OperationReportComponent",attrs:{title:this.title}})],1)},staticRenderFns:[]};var et=a("VU/8")(Qe,Ze,!1,function(e){a("Z82o")},"data-v-a844a2ce",null).exports,tt={name:"OperationalReliabilityReport",components:{OperationReportComponent:Je},data:function(){return{title:"机组运行可靠性报告"}},mounted:function(){},methods:{initData:function(){this.$refs.OperationReportComponent.getData(),this.$refs.OperationReportComponent.initData()}}},at={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("OperationReportComponent",{ref:"OperationReportComponent",attrs:{title:this.title}})],1)},staticRenderFns:[]};var nt=a("VU/8")(tt,at,!1,function(e){a("jJPT")},"data-v-8d8706c2",null).exports,it=[{label:"发电机组型号",key:"发电机组型号",unit:"",size:""},{label:"原动力型号",key:"原动力型号",unit:"",size:""},{label:"发动机型号",key:"发动机型号",unit:"",size:""},{label:"电机型号",key:"电机型号",unit:"",size:""},{label:"控制器型号",key:"控制器型号",unit:"",size:""},{label:"发电机组序列号",key:"发电机组序列号",unit:"",size:""},{label:"执行器型号",key:"执行器型号",unit:"",size:""},{label:"发动机序列号",key:"发动机序列号",unit:"",size:""},{label:"电机序列号",key:"电机序列号",unit:"",size:""},{label:"AVR型号",key:"AVR型号",unit:"",size:""},{label:"视在功率",key:"发电机组视在功率",unit:"kVA",size:""},{label:"功率因数",key:"发电机组功率因数",unit:"",size:""},{label:"额定频率",key:"发电机组额定频率",unit:"Hz",size:""},{label:"额定转速",key:"发电机组额定转速",unit:"r/min",size:"2"},{label:"额定功率",key:"发电机组额定功率",unit:"kW",size:""},{label:"额定电压",key:"发电机组额定电压",unit:"V",size:""},{label:"额定电流",key:"发电机组额定电流",unit:"A",size:""},{label:"励磁方式",key:"",unit:"",size:"2"},{label:"相对湿度",key:"相对湿度",unit:"",size:""},{label:"环境温度",key:"环境温度",unit:"",size:"1.5"},{label:"大气压力",key:"大气压力",unit:"",size:""},{label:"海拔高度",key:"海拔",unit:"m",size:""}],st={id:"StartingReliabilityCurve",label:"起动曲线",echartsItems:[{label:"电池电压",key:"Leijctcout",accuracy:1,type:"line",yIndex:0,data:[]},{label:"水温",key:"LeiJdn",accuracy:1,type:"line",yIndex:1,data:[]},{label:"油压",key:"Fzqsgl",accuracy:1,type:"line",yIndex:2,data:[]},{label:"燃油位",key:"Fzjsgl",accuracy:1,type:"line",yIndex:3,data:[]},{label:"蓄电池1起动电压跌落",key:"Reserve2",accuracy:1,type:"line",yIndex:4,data:[]},{label:"蓄电池2起动电压跌落",key:"Reserve3",accuracy:1,type:"line",yIndex:4,data:[]},{label:"起动成功时间",key:"Reserve4",accuracy:1,type:"line",yIndex:4,data:[]}],yAxisItems:[{label:"电池电压",unit:""},{label:"水温",unit:""},{label:"油压",unit:""},{label:"燃油位",unit:""},{label:"电压跌落",unit:""}]},rt={name:"StartingReliabilityReport",components:{BaseEcharts:qe.a},data:function(){return{selectTab:this.$route.query.selectTab,searchTime:null,pickerTime:{disabledDate:function(e){return e.getTime()>Date.now()}},descriptionsItems1:it,dataSource:null,data:null,option:st,startingFlag:!1,startingGrid:{x:50,y:24,x2:150,y2:24,top:"15%"},startingColors:["#EF7B10","#BD2B0B","#CAD400","#56D43E","blue","#45EFB1","#EF7B10","#F2055C"],startingLegendData:[],startingXAxisData:[],startingYAxisData:[],startingSeriesData:[]}},computed:o()({},Object(n.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.getCurveData()},deep:!0}},mounted:function(){this.initSearchTime(),this.getCurveData()},methods:{initSearchTime:function(){var e=new Date,t=new Date(e.getTime()-2592e6),a=j()(e).format("YYYY-MM-DD HH:mm"),n=j()(t).format("YYYY-MM-DD HH:mm");this.searchTime=[n,a],console.log(this.searchTime)},timeChange:function(){console.log(this.searchTime)},handleSearch:function(){this.searchTime&&0!=this.searchTime.length||this.initSearchTime(),this.getCurveData()},getCurveData:function(){var e=this;return Le()(Me.a.mark(function t(){var a,n,i,s;return Me.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={Type:"启动记录",TriggerId:1200,TriggerName:"启动时间",StartTime:e.searchTime&&e.searchTime[0],EndTime:e.searchTime&&e.searchTime[1]},n={generatorId:e.selectCrew.ID},i=null,t.next=5,e.$api.equipment.GetGeneratorSetRecordDailyList(a,n).then(function(e){if(1===e.Code)return e.Data});case 5:s=t.sent,console.log(s,i),e.$set(e,"dataSource",s.dic),e.$set(e,"data",s.Data.Datas),e.startingInit();case 10:case"end":return t.stop()}},t,e)}))()},startingInit:function(){var e=this,t={Leijctcout:[],LeiJdn:[],Fzqsgl:[],Fzjsgl:[],Reserve2:[],Reserve3:[],Reserve4:[],RecordDate:[]};this.data.map(function(a){t.Leijctcout.push(a.Leijctcout),t.LeiJdn.push(a.LeiJdn),t.Fzqsgl.push(a.Fzqsgl),t.Fzjsgl.push(a.Fzjsgl),t.Reserve2.push(a.Reserve2),t.Reserve3.push(a.Reserve3),t.Reserve4.push(a.Reserve4),t.RecordDate.push(e.$moment(a.Record_Date).format("YYYYMMDDHHmmss"))}),console.log(t),this.startingXAxisData=[{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{},splitLine:{show:!0,width:5,lineStyle:{type:"dotted",color:"#6E7079"}},boundaryGap:!1,data:t.RecordDate}];var a=[],n=[],i=[];this.option.echartsItems.forEach(function(e,n){a.push(e.label);var s={name:e.label,type:e.type,yAxisIndex:e.yIndex,data:null==t[e.key]?[]:t[e.key],showAllSymbol:!1};i.push(s)}),this.option.yAxisItems.forEach(function(t,a){var i={type:"value",name:t.label,min:t.min||0,position:0===a?"left":"right",offset:a>=2?42*(a-1):0,axisLine:{show:!0,lineStyle:{color:e.startingColors[a]}},axisLabel:{formatter:"{value} "+(t.unit||"")},splitLine:{lineStyle:{type:"dotted",color:"#6E7079"}}};n.push(i)}),this.$set(this,"startingLegendData",a),this.$set(this,"startingYAxisData",n),this.$set(this,"startingSeriesData",i),this.$nextTick(function(){e.startingFlag=!0})},downloadFile:function(){Object(h.c)({title:"发电机组起动可靠性趋势分析报表",contentId:"#descriptions-box"})}}},lt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"starting-reliability-report"},[a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-item"},[a("span",[e._v("筛选:")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm","picker-options":e.pickerTime,placement:"bottom-start"},on:{change:function(t){return e.timeChange()}},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSearch()}}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.downloadFile}},[e._v("下载")])],1),e._v(" "),a("div",{staticClass:"descriptions-box",attrs:{id:"descriptions-box"}},[a("p",{staticClass:"part-title bold"},[e._v("发电机组起动可靠性趋势分析报表")]),e._v(" "),a("el-descriptions",{staticClass:"part-content descriptions_part_1",attrs:{title:"",column:5,border:""}},[e._l(e.descriptionsItems1,function(t,n){return[a("el-descriptions-item",{key:n,attrs:{span:t.size}},[a("template",{slot:"label"},[e._v(e._s(t.label))]),e._v(" "),a("div",{staticClass:"description-content-box"},[a("span",[e._v(e._s(e.dataSource&&e.dataSource[t.key]))]),e._v(" "),t.unit?a("span",[e._v(e._s(t.unit))]):e._e()])],2)]})],2),e._v(" "),a("div",{staticClass:"curve-container"},[a("span",[e._v("海拔高度："+e._s(e.dataSource&&e.dataSource["海拔"]?e.dataSource["海拔"]+" m":"-"))]),e._v(" "),e.startingFlag?a("BaseEcharts",{staticClass:"curve-box",attrs:{containerId:"StartingReliabilityCurve",grid:e.startingGrid,legendData:e.startingLegendData,xAxisData:e.startingXAxisData,yAxisData:e.startingYAxisData,seriesData:e.startingSeriesData,colors:e.startingColors}}):e._e()],1)],1)])},staticRenderFns:[]};var ot=a("VU/8")(rt,lt,!1,function(e){a("/z1V")},"data-v-72857885",null).exports,ct=a("WwEu"),ut={render:function(){var e=this,t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("div",{staticClass:"delivery-test-report-detail"},[n("div",{staticClass:"operate-box"},[n("div",[n("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:function(){return e.$emit("handleBack")}}},[t._v("返回列表\n        ")]),t._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.downloadFile}},[t._v("下载")])],1),t._v(" "),t._m(0)]),t._v(" "),n("div",{staticClass:"descriptions-box",attrs:{id:"descriptions-box"}},[n("p",{staticClass:"part-title bold"},[t._v("发电机组"+t._s(t.recordInfo.Trigger||"试验")+"报告")]),t._v(" "),n("el-descriptions",{staticClass:"descriptions_part_1",attrs:{title:"",column:5,border:""}},[t._l(t.descriptionsItems1,function(e,a){return[n("el-descriptions-item",{key:a,attrs:{span:e.size}},[n("template",{slot:"label"},[t._v(t._s(e.label))]),t._v(" "),n("div",{staticClass:"description-content-box"},[n("span",[t._v(t._s(t.dataSource[e.key]))]),t._v(" "),e.unit?n("span",[t._v(t._s(e.unit))]):t._e()])],2)]})],2),t._v(" "),n("p",{staticClass:"part-title"},[t._v("测试项目")]),t._v(" "),n("div",{staticClass:"test-project"},[n("el-row",{staticClass:"test_part test_part_1"},[n("el-col",{attrs:{span:4}},[n("p",[t._v("外观检测")])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("p",{staticClass:"text-center"})]),t._v(" "),n("el-col",{attrs:{span:6}},[n("p",{staticClass:"text-center"},[t._v("绝缘介质强度测试")])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("p",{staticClass:"text-center"})]),t._v(" "),n("el-col",{attrs:{span:10}},[n("p",{staticClass:"text-center"},[t._v("检查控制屏上各工作状态指示灯")])])],1),t._v(" "),n("el-row",{staticClass:"test_part test_part_2"},[n("el-col",{attrs:{span:4}},[n("p",[t._v("绝缘测量")]),t._v(" "),n("p",[t._v("电枢对地")]),t._v(" "),n("p",[t._v("绕组对地")])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("p",{staticClass:"line3 text-center"},[n("span")])]),t._v(" "),n("el-col",{attrs:{span:6}},[n("p",{staticClass:"text-center"},[t._v("常温下自启动功能(启动三次)")]),t._v(" "),n("p",{staticClass:"text-center"},[t._v("检查相序")]),t._v(" "),n("p",{staticClass:"text-center"},[t._v("检查空载电压调压范围:76.5%-124.5%")])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("p",{staticClass:"text-center"}),t._v(" "),n("p",{staticClass:"text-center"}),t._v(" "),n("p",{staticClass:"text-center"})]),t._v(" "),n("el-col",{attrs:{span:5}},[n("p",[t._v("检查指示仪表")]),t._v(" "),n("p",[t._v("检查高水温保护")]),t._v(" "),n("p",[t._v("检查低油压保护")])]),t._v(" "),n("el-col",{attrs:{span:5}},[n("p",[t._v("检查超速停机")]),t._v(" "),n("p",[t._v("检查紧急停机")]),t._v(" "),n("p",[t._v("检查蓄电池充电情况")])])],1)],1),t._v(" "),n("p",{staticClass:"part-title text-left"},[t._v("稳态测量及电压、频率的瞬态测量")]),t._v(" "),n("el-table",{staticClass:"test-table",staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{prop:"loadPercentage",label:"负载百分比","min-width":"5%"}}),t._v(" "),n("el-table-column",{attrs:{prop:"power",label:"KW","min-width":"10%"}}),t._v(" "),n("el-table-column",{attrs:{label:"电压(V)"}},[n("el-table-column",{attrs:{prop:"voltageA",label:"UA","min-width":"5%"}}),t._v(" "),n("el-table-column",{attrs:{prop:"voltageB",label:"UB","min-width":"5%"}}),t._v(" "),n("el-table-column",{attrs:{prop:"voltageC",label:"UC","min-width":"5%"}})],1),t._v(" "),n("el-table-column",{attrs:{label:"电流(A)"}},[n("el-table-column",{attrs:{prop:"currentA",label:"IA","min-width":"5%"}}),t._v(" "),n("el-table-column",{attrs:{prop:"currentB",label:"IB","min-width":"5%"}}),t._v(" "),n("el-table-column",{attrs:{prop:"currentC",label:"IC","min-width":"5%"}})],1),t._v(" "),n("el-table-column",{attrs:{prop:"powerFactor",label:"功率因数","min-width":"5%"}}),t._v(" "),n("el-table-column",{attrs:{prop:"frequency",label:"频率(Hz)","min-width":"5%"}}),t._v(" "),n("el-table-column",{attrs:{prop:"voltageError",label:"电压稳态误差(%)","min-width":"5%"}}),t._v(" "),n("el-table-column",{attrs:{prop:"frequencyError",label:"频率稳态误差(%)","min-width":"5%"}}),t._v(" "),n("el-table-column",{attrs:{label:"一分钟B相电压"}},[n("el-table-column",{attrs:{prop:"voltageBMax",label:"最大","min-width":"5%"}}),t._v(" "),n("el-table-column",{attrs:{prop:"voltageBMin",label:"最小","min-width":"5%"}})],1),t._v(" "),n("el-table-column",{attrs:{label:"一分钟B相频率"}},[n("el-table-column",{attrs:{prop:"currentBMax",label:"最大","min-width":"5%"}}),t._v(" "),n("el-table-column",{attrs:{prop:"currentBMin",label:"最小","min-width":"5%"}})],1),t._v(" "),n("el-table-column",{attrs:{prop:"voltageVolatility",label:"电压波动率(%)","min-width":"5%"}}),t._v(" "),n("el-table-column",{attrs:{prop:"frequencyVolatility",label:"频率波动率(%)","min-width":"5%"}}),t._v(" "),n("el-table-column",{attrs:{label:"备注","min-width":"5%"}},[[n("el-button",{attrs:{type:"text"}},[t._v("删除")])]],2)],1),t._v(" "),n("p",{staticClass:"part-title"},[n("el-button",{attrs:{type:"text"}},[t._v("添加")])],1),t._v(" "),n("el-row",{staticClass:"test_part test_part_3"},[n("el-col",{attrs:{span:2}},[n("p",{staticClass:"line2 text-center"},[t._v("测试结果")])]),t._v(" "),n("el-col",{attrs:{span:5}},[n("p",[t._v("电压稳态误差(%)")]),t._v(" "),n("p",[t._v("电压波动率(%)")])]),t._v(" "),n("el-col",{attrs:{span:5}},[n("p",[t._v(t._s(t.voltageError))]),t._v(" "),n("p",[t._v(t._s(t.voltageVolatility))])]),t._v(" "),n("el-col",{attrs:{span:8}},[n("p",[t._v("频率稳态误差(%)")]),t._v(" "),n("p",[t._v("频率波动率(%)")])]),t._v(" "),n("el-col",{attrs:{span:4}},[n("p",[t._v(t._s(t.frequencyError))]),t._v(" "),n("p",[t._v(t._s(t.frequencyVolatility))])])],1),t._v(" "),n("el-row",{staticClass:"test_part test_part_3"},[n("el-col",{attrs:{span:2}},[n("p",{staticClass:"line2 text-center"},[n("span",[t._v("测试结果")])])]),t._v(" "),n("el-col",{attrs:{span:22}},[n("el-row",[n("p"),t._v(" "),n("div",{staticClass:"no-padding"},[n("el-row",{staticClass:"test_part__row"},[n("el-col",{attrs:{span:2}},[n("p",[t._v("测试人员")])]),t._v(" "),n("el-col",{attrs:{span:4}},[n("p",[t._v(t._s(t.testPerson))])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("p",[t._v("检验员")])]),t._v(" "),n("el-col",{attrs:{span:4}},[n("p",[t._v(t._s(t.surveyor))])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("p",[t._v("测试日期")])]),t._v(" "),n("el-col",{attrs:{span:4}},[n("p",[t._v(t._s(t.testDate))])]),t._v(" "),n("el-col",{attrs:{span:2}},[n("p",[t._v("测试时间")])]),t._v(" "),n("el-col",{attrs:{span:4}},[n("p",[t._v(t._s(t.testTime))])])],1)],1)])],1)],1),t._v(" "),n("p",{staticClass:"part-title",staticStyle:{height:"200px"}}),t._v(" "),n("DeliveryTestReportDetailCurve",{attrs:{data:t.dataSource}})],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"data-source"},[this._v("\n        数据来源："),t("span",[this._v("机组信息获取")]),t("span",[this._v("手动输入")]),t("span",[this._v("云数据获取")])])}]};var dt=function(e){a("OFRJ")},pt=a("VU/8")(ct.a,ut,!1,dt,"data-v-d9644afa",null).exports,mt=a("VU/8")(null,null,!1,null,null,null).exports,ft={name:"crewreportDetail",components:{ToggleCrew:s.a,IframeComponent:d,DeliveryTestReport:ke,InteractionTestReport:Ie,TimeMatrixReport:Pe,OperationReport:et,OperationalReliabilityReport:nt,StartingReliabilityReport:ot,DeliveryTestReportDetail:pt,InteractionTestReportDetail:mt},data:function(){return{tabs:[{label:"出厂试验报告",value:"0",linkUrl:"http://www.fortrustyun.com:8022/Genset/TestReportFactory?condition=&mpage=0&ishow=0&gid="},{label:"交付试验报告",value:"1",linkUrl:"http://www.fortrustyun.com:8022/Genset/TestReportDelivery?condition=&mpage=0&ishow=0&gid="},{label:"起动可靠性分析报告",value:"5"},{label:"功率时间矩阵分析报告",value:"2",linkUrl:"http://www.fortrustyun.com:8022/Genset/GeneratorSetRecordDailyPowerTime?condition=&mpage=0&ishow=0&gid="},{label:"运行报告",value:"3",linkUrl:"http://www.fortrustyun.com:8022/Genset/GensetRunReport?condition=&mpage=0&ishow=0&gid="},{label:"运行可靠性报告",value:"4",linkUrl:"http://www.fortrustyun.com:8022/Genset/GensetRunReliabilityReport?condition=&mpage=0&ishow=0&gid="}],selectTab:this.$route.query.selectTab||"0",pageFlag:this.$route.query.pageFlag||"1",recordInfo:null}},computed:o()({},Object(n.c)(["selectCrew"]),{linkUrl:function(){var e=this;return this.tabs.filter(function(t){return t.value===e.selectTab})[0].linkUrl}}),watch:{$route:{handler:function(e,t){this.selectTab=this.$route.query.selectTab||"0",this.pageFlag=this.$route.query.pageFlag||"1",console.log("$route",e,"0"===this.selectTab,"0"===this.pageFlag)},deep:!0}},methods:{initData:function(){"0"!=this.pageFlag?0==this.selectTab?this.$refs.DeliveryTestReport.queryTableData():1==this.selectTab?this.$refs.InteractionTestReport.queryTableData():2==this.selectTab?this.$refs.TimeMatrixReport.getReportData():3==this.selectTab?this.$refs.OperationReport.initData():4==this.selectTab?this.$refs.OperationalReliabilityReport.initData():this.$refs.StartingReliabilityReport.handleSearch():this.$refs.DeliveryTestReportDetail.getCurveData()},changeTab:function(e){console.log(e,void 0===e?"undefined":ge()(e)),this.selectTab=e,this.pageFlag="1"},handleBackClick:function(){this.$router.push({path:"/equipment/crewinfo"})},showReport:function(e){this.selectTab=String(e.selectTab),this.pageFlag=String(e.pageFlag),this.recordInfo=e.record,console.log(e,this.selectTab,this.pageFlag,this.recordInfo)},handleBack:function(){this.pageFlag="1"}}},ht={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-main",[a("div",{attrs:{id:"crewreport-detail"}},[a("div",{staticClass:"creat-info-box"},[a("div",{staticClass:"tab-box"},e._l(e.tabs,function(t){return a("el-button",{key:t.value,class:["status-tab",{"select-tab":e.selectTab==t.value}],on:{click:function(a){return e.changeTab(t.value)}}},[e._v(e._s(t.label))])}),1),e._v(" "),"0"!==e.selectTab&&"1"!==e.selectTab||"0"!==e.pageFlag?["0"===e.selectTab?a("DeliveryTestReport",{ref:"DeliveryTestReport",on:{showReport:e.showReport}}):"1"===e.selectTab?a("InteractionTestReport",{ref:"InteractionTestReport",on:{showReport:e.showReport}}):"2"===e.selectTab?a("TimeMatrixReport",{ref:"TimeMatrixReport"}):"3"===e.selectTab?a("OperationReport",{ref:"OperationReport"}):"4"===e.selectTab?a("OperationalReliabilityReport",{ref:"OperationalReliabilityReport"}):"5"===e.selectTab?a("StartingReliabilityReport",{ref:"StartingReliabilityReport"}):e._e()]:a("DeliveryTestReportDetail",{ref:"DeliveryTestReportDetail",attrs:{recordInfo:e.recordInfo},on:{handleBack:e.handleBack}})],2)])])],1)],1)},staticRenderFns:[]};var vt=a("VU/8")(ft,ht,!1,function(e){a("0jnT")},"data-v-3be7b8ef",null).exports,_t=[{key:"0",value:"机组履历"},{key:"1",value:"报警曲线记录"},{key:"2",value:"启动曲线记录"},{key:"3",value:"一键报修记录"},{key:"4",value:"操作记录"},{key:"5",value:"运行记录"},{key:"6",value:"上线记录"},{key:"7",value:"发电量统计"},{key:"8",value:"报警历史"},{key:"9",value:"历史曲线"}],gt={name:"CrewDataRecord",components:{GensetAlarmCurveRecord:a("2pEH").default},computed:o()({},Object(n.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e,t){this.GensetId=e.ID},deep:!0}},data:function(){return{GensetId:null,configList:_t,activeNum:null}},mounted:function(){this.GensetId=this.selectCrew.ID,this.activeNum=this.$route.meta.active||"0"},methods:{changeActive:function(e){this.activeNum=e.key}}},yt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-record"},[a("div",{staticClass:"data-record-container"},[a("div",{staticClass:"data-record-container__left"},[a("ul",[e._l(e.configList,function(t){return[a("li",{key:t.key,class:{active:t.key==e.activeNum},on:{click:function(a){return e.changeActive(t)}}},[a("span",[e._v(e._s(t.value))])])]})],2)]),e._v(" "),a("div",{staticClass:"data-record-container__right"},[1==e.activeNum?a("GensetAlarmCurveRecord"):e._e()],1)])])},staticRenderFns:[]};var bt=a("VU/8")(gt,yt,!1,function(e){a("w6Ce")},"data-v-4d3badbc",null).exports,Ct=[{key:"1",value:"机组信息",componentName:"CrewinfoDetail"},{key:"2",value:"机组配置",componentName:"GensetConfig"},{key:"3",value:"运行监控",componentName:"CrewMonitor"},{key:"4",value:"维保监控",componentName:"MaintenanceMonitor"},{key:"5",value:"劣化分析",componentName:"DeteriorationAnalysis"},{key:"6",value:"远程解锁机",componentName:"GensetLock"},{key:"7",value:"云消息推送",componentName:"GensetCloudMessage"},{key:"8",value:"机组报告",componentName:"CrewreportDetail"}],Dt={name:"sensorMonitor",inject:["reload"],components:{GensetInfo:i.a,ToggleCrew:s.a,CrewinfoDetail:T,GensetConfig:V,CrewMonitor:N.a,MaintenanceMonitor:P.a,DeteriorationAnalysis:Q,GensetLock:se,GensetCloudMessage:ve,CrewreportDetail:vt,CrewDataRecord:bt},beforeRouteEnter:function(e,t,a){a(function(e){"crewinfo"!==t.name&&"operationalChartDaily"!=t.name&&"operationalChartWeekly"!=t.name||(e.hasBackBtn=!0)})},watch:{$route:{handler:function(e,t){var a=this;this.activeName=this.$route.query.active||e.meta.activeNum,this.currentView=this.tabList.filter(function(e){return e.key==a.activeName})[0].componentName},deep:!0,immediate:!0}},data:function(){return{hasBackBtn:!1,GensetId:null,GeneratorSetInfo:{},tabList:Ct,activeName:"1",currentView:""}},mounted:function(){},methods:{changeGeneratorSetInfo:function(e){this.$set(this,"GeneratorSetInfo",e)},handleClickTab:function(){var e=this;this.currentView=this.tabList.filter(function(t){return t.key==e.activeName})[0].componentName},handleRefresh:function(){this.$refs.gensetInfo.getGeneratorSet(),this.$refs.subComponent.initData&&this.$refs.subComponent.initData()}},beforeDestroy:function(){}},wt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-main",[a("div",{attrs:{id:"genset-mould-page"}},[a("genset-info",{ref:"gensetInfo",attrs:{gensetInfo:e.GeneratorSetInfo,hasBackBtn:e.hasBackBtn},on:{handleRefresh:e.handleRefresh}}),e._v(" "),a("el-tabs",{staticClass:"genset-tabs",on:{"tab-click":e.handleClickTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e._l(e.tabList,function(e){return[a("el-tab-pane",{key:e.key,attrs:{label:e.value,name:e.key}})]})],2),e._v(" "),a(e.currentView,{ref:"subComponent",tag:"component",on:{changeGeneratorSetInfo:e.changeGeneratorSetInfo}})],1)]),e._v(" "),a("toggle-crew")],1)],1)},staticRenderFns:[]};var kt=a("VU/8")(Dt,wt,!1,function(e){a("mbWR")},"data-v-ac33e8d8",null);t.default=kt.exports},Z82o:function(e,t){},bVtG:function(e,t){},bXqF:function(e,t){},eMR9:function(e,t){},hIp4:function(e,t){},i2q6:function(e,t){},iQCd:function(e,t){},jJPT:function(e,t){},lVJv:function(e,t){},lqwT:function(e,t){},mKGV:function(e,t){},mbWR:function(e,t){},n1pD:function(e,t){},oKgG:function(e,t){},w6Ce:function(e,t){},wQgC:function(e,t){},wooG:function(e,t){}});
//# sourceMappingURL=3.397856e69c4fbb808362.js.map