webpackJsonp([8],{ItCE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),i=a.n(n),o=a("oqQY"),r=a.n(o),l=a("NYxO"),c=a("X2Oc"),s=[{label:"机组名称",prop:"mch_name",props:{}},{label:"开始时间",prop:"begin_time"},{label:"结束时间",prop:"end_time"},{label:"持续时间",prop:"keep_time"},{label:"发电kWh",prop:"power"}],d={name:"CrewRecordRunning",components:{ToggleCrew:a("5w7s").a},data:function(){return{columns:s,dataSource:[],dataTotal:0,options:{index:!0,labelIndex:"序号"},paginationCfg:{currentPage:1,pageSize:10,layout:"total, sizes, prev, pager, next, jumper",pageSizes:[10,20,30,40]},data:[],value_date:[new Date((new Date).setDate((new Date).getDate()-3)),new Date],value_date_query:[new Date((new Date).setDate((new Date).getDate()-3)),new Date]}},computed:i()({},Object(l.c)(["selectCrew"])),watch:{selectCrew:{handler:function(e){this._query()}}},mounted:function(){this._query()},methods:{queryTableData:function(){var e=this,t={id:this.selectCrew.ID},a={StartTime:r()(this.value_date_query[0]).format("YYYY-MM-DD HH:mm:ss"),EndTime:r()(this.value_date_query[1]).format("YYYY-MM-DD HH:mm:ss")};this.$api.equipment.findGeneratorStartStopRecords(a,t).then(function(t){var a=[],n=t.Data;!n||0===n.length||n.forEach(function(e,t){var n={key:t,mch_name:e.GeneratorSetDisplayName,begin_time:Object(c.c)(e.StartTime).format("YYYY-MM-DD HH:mm:ss"),end_time:Object(c.c)(e.EndTime).format("YYYY-MM-DD HH:mm:ss"),keep_time:e.TolalTime,power:e.TolalKwh};1===Number(e.Status)&&(n.end_time="-"),a.push(n)}),e.dataTotal=n.length;var i=a.splice((e.paginationCfg.currentPage-1)*e.paginationCfg.pageSize,e.paginationCfg.pageSize);e.$set(e,"dataSource",i)}).catch(function(){})},handleNewJump:function(e){},handleChangePage:function(e){this.paginationCfg.currentPage=e,this.queryTableData()},handleChangeSize:function(e){this.paginationCfg.currentPage=1,this.paginationCfg.pageSize=e,this.queryTableData()},_export:function(){this.$api.screenData.GensetStartStopRecordExportV2({mchCode:"",starttime:"",endtime:""}).then(function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.style.display="none",a.href=t,a.download=decodeURI(e.headers["content-disposition"].split("filename=")[1])||"未命名文件.xls",document.body.appendChild(a),a.click()})},_query:function(){this.paginationCfg.currentPage=1,this.value_date_query=this.value_date,this.queryTableData()},diffTime:function(e,t){var a=Object(c.c)(e),n=Object(c.c)(t).diff(a,"m");return Math.floor(n/60)+"h"+n%60+"min"}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("BMainTopComponent"),e._v(" "),a("el-container",[a("el-main",[a("div",{attrs:{id:"crew-record-operating"}},[a("el-card",{attrs:{shadow:"never"}},[a("div",{staticClass:"block"},[a("span",[e._v("筛选：")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","popper-append-to-body":!1,placement:"bottom-start"},model:{value:e.value_date,callback:function(t){e.value_date=t},expression:"value_date"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e._query}},[e._v("搜索")])],1),e._v(" "),a("el-card",{attrs:{shadow:"never"}},[a("table-list",{attrs:{options:e.options,columns:e.columns,dataSource:e.dataSource,dataTotal:e.dataTotal,pagination:e.paginationCfg},on:{handleChangePage:e.handleChangePage,handleChangeSize:e.handleChangeSize}})],1)],1)]),e._v(" "),a("toggle-crew")],1)],1)},staticRenderFns:[]};var u=a("VU/8")(d,p,!1,function(e){a("qQ+2")},"data-v-9fd4271e",null);t.default=u.exports},"qQ+2":function(e,t){}});
//# sourceMappingURL=8.20f6046c2a4146212ae1.js.map