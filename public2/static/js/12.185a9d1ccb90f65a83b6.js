webpackJsonp([12],{FnT6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),r=a.n(n),i=a("Dd8w"),o=a.n(i),s=a("NYxO"),c=a("fALy"),u=a("5w7s"),l=a("EsGT"),d=a("vfJC"),g=(a("PJh5"),function(e){return[{label:"查看曲线",method:function(t){e.handleShowCurve(t)}},{label:"删除",method:function(t){e.handleDelete(t)},setStyle:function(e){return"color: red;"}}]}),h={name:"GensetStartingCurveRecord",mixins:[c.a],components:{CurveReport:l.a,ToggleCrew:u.a,GensetInfo:d.a},data:function(){return{isShowBackBtn:!("0"!==this.$route.query.pageFlag),pageFlag:this.$route.query.pageFlag||"1",type:"2",columns:(e=this,[{label:"索引值",prop:"IdX",minWidth:"25%",formatter:function(e,t,a){return""+e.IdX}},{label:"试验类型",prop:"Trigger",minWidth:"25%"},{label:"创建时间",prop:"Time",minWidth:"50%",formatter:function(t,a,n){return t.Time?e.$moment(t.Time).format("yyyy-MM-DD HH:mm:ss"):""}}]),operates:g,dataSource:[],options:{index:!0,labelIndex:"序号",props:{width:248}},data:[],loading:!1};var e},computed:o()({},Object(s.c)(["selectCrew"])),watch:{$route:{handler:function(e,t){this.pageFlag=this.$route.query.pageFlag||"1","0"===this.$route.query.pageFlag?this.isShowBackBtn=!0:this.isShowBackBtn=!1},deep:!0},selectCrew:{handler:function(e){this.paginationCfg.currentPage=1,this.queryTableData()}}},mounted:function(){this.queryTableData()},methods:{handleRefresh:function(){this.$refs.gensetInfo.getGeneratorSet(),this.queryTableData()},queryTableData:function(){var e=this;this.loading=!0;var t={page:this.paginationCfg.currentPage,pageSize:this.paginationCfg.pageSize},a={Type:"测试记录",Trigger:"启动记录",GeneratorId:this.selectCrew.ID};this.$api.equipment.GeneratorSetRecordingList(a,t).then(function(t){1===t.Code&&(e.dataTotal=t.Data.TotalItemCount,e.$set(e,"dataSource",t.Data.Data)),e.loading=!1}).catch(function(){e.loading=!1})},handleShowCurve:function(e){var t={IndexID:e.IdX,Type:e.Type,Trigger:e.Trigger,GeneratorSetId:e.GeneratorSetId},a=this.$router.resolve({path:"/equipment/data-record/starting-curve-record",query:{pageFlag:0,record:r()(t)}});window.open(a.href,"_blank")},handleBackClick:function(){this.$router.push({path:"/equipment/data-record/starting-curve-record",query:{pageFlag:1}})},handleDelete:function(e){var t=this,a=this.$createElement;this.$confirm("删除提示",{title:"删除提示",message:a("div",[a("p","此操作将导致数据无法恢复，请谨慎操作!"),a("p","是否确定删除数据?")]),confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:e.RecordingId};t.$api.equipment.DeleteGeneratorSetFullRecord(a).then(function(e){1===e.Code&&(t.$message({type:"success",message:"删除成功!"}),t.paginationCfg.currentPage=1,t.queryTableData())}).catch(function(){t.$message({type:"success",message:"删除失败!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleReRequest:function(e){var t=this;this.$confirm("是否需要重新获取数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"重新获取数据成功!"})}).catch(function(){t.$message({type:"info",message:"已取消"})})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return"1"===e.pageFlag?a("div",[a("el-container",[a("el-main",[a("div",{staticClass:"genset-starting-curve-record"},[a("genset-info",{ref:"gensetInfo",on:{handleRefresh:e.handleRefresh}}),e._v(" "),a("TableList",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{options:e.options,columns:e.columns,dataSource:e.dataSource,operates:e.operates(this),dataTotal:e.dataTotal,pagination:e.paginationCfg,border:""},on:{handleChangePage:e.handleChangePage,handleChangeSize:e.handleChangeSize}})],1)]),e._v(" "),a("toggle-crew")],1)],1):a("div",[a("BMainTopComponent",{attrs:{isShowBackBtn:e.isShowBackBtn,isHandleBackClick:!0},on:{handleBackClick:e.handleBackClick}}),e._v(" "),a("CurveReport",{attrs:{curveType:e.type}})],1)},staticRenderFns:[]};var f=a("VU/8")(h,p,!1,function(e){a("oXat")},"data-v-227021d1",null);t.default=f.exports},oXat:function(e,t){}});
//# sourceMappingURL=12.185a9d1ccb90f65a83b6.js.map