webpackJsonp([38],{U4aI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("fALy"),i=a("izrR"),l={name:"MaintenanceStrategy",mixins:[o.a],data:function(){return{searchForm:{StrategyName:"",EngineBrandId:-1,Type:0,Status:2},dropdown:{},options:{index:!0,labelIndex:"序号",props:{width:126}},loading:!1,columns:[],dataSource:[],dataSourceAll:[],statusList:[]}},mounted:function(){this.init(),this.queryTableData()},methods:{init:function(){this.columns=Object(i.a)(this).table.columns,this.dropdown=Object(i.a)(this).dropdown,this.getEngineBrandList()},jump:function(){this.$router.push({path:"/setting/agreement-management/maintenance-strategy-new-add"})},getEngineBrandList:function(){var e=this;this.$api.operation.GetMaintenanceGensetEngineBrand().then(function(t){if(1===t.Code){var a=t.Data.map(function(e){return{value:e.EngineBrandId,label:e.BrandName}});e.$set(e.dropdown,"model",a)}})},operates:function(e){return[{label:"查看",method:function(t){e.checkHandler(t,1)}},{label:"禁用",method:function(t){e.checkHandler(t,2)}},{label:"删除",method:function(t){e.checkHandler(t,3)}}]},checkHandler:function(e,t){var a=this;switch(t){case 1:this.$router.push({path:"/setting/agreement-management/maintenance-strategy-new-check",query:{rawData:e}});break;case 2:this.$confirm("","",{message:'确认<span style="color:red;font-weight:bold">'+(e.IsUsing?"禁用":"启用")+"</span>该策略？",dangerouslyUseHTMLString:!0}).then(function(t){var n={StrategyId:e.StrategyId};a.$api.operation.EnableDisableMaintenanceGensetStrategy({},n).then(function(e){1===e.Code&&(a.$message({type:"success",message:e.Message}),a.queryTableData())})}).catch(function(e){});break;case 3:this.$confirm("","",{message:'确认<span style="color:red;font-weight:bold">删除</span>该策略？',dangerouslyUseHTMLString:!0}).then(function(e){}).catch(function(e){})}},queryTableData:function(){var e=this;this.loading=!0;var t={Page:this.paginationCfg.currentPage,PageSize:this.paginationCfg.pageSize},a=r()({},this.searchForm);this.$api.operation.GetMaintenanceGensetStrategyManage(a,t).then(function(t){1===t.Code&&(e.dataTotal=t.Data.TotalItemCount,e.$set(e,"dataSource",t.Data.Data)),e.loading=!1}).catch(function(){e.loading=!1})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("BMainTopComponent"),e._v(" "),a("div",{staticClass:"maintenance-strategy"},[a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-item"},[a("span",[e._v("维保策略名称:")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.searchForm.StrategyName,callback:function(t){e.$set(e.searchForm,"StrategyName",t)},expression:"searchForm.StrategyName"}})],1),e._v(" "),a("div",{staticClass:"search-item"},[a("span",[e._v("发动机品牌:")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择","popper-append-to-body":!1},model:{value:e.searchForm.EngineBrandId,callback:function(t){e.$set(e.searchForm,"EngineBrandId",t)},expression:"searchForm.EngineBrandId"}},[a("el-option",{attrs:{label:"全部",value:-1}}),e._v(" "),e._l(e.dropdown.model,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),a("div",{staticClass:"search-item"},[a("span",[e._v("策略主备分类:")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择","popper-append-to-body":!1},model:{value:e.searchForm.Type,callback:function(t){e.$set(e.searchForm,"Type",t)},expression:"searchForm.Type"}},[a("el-option",{attrs:{label:"全部",value:0}}),e._v(" "),e._l(e.dropdown.strategyType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),a("div",{staticClass:"search-item"},[a("span",[e._v("维保策略状态:")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择维保策略状态","popper-append-to-body":!1},model:{value:e.searchForm.Status,callback:function(t){e.$set(e.searchForm,"Status",t)},expression:"searchForm.Status"}},e._l(e.dropdown.strategyState,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"search-item"},[a("el-button",{attrs:{size:"mini",plain:""},on:{click:function(t){return e.resetCurrentParams()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.jump}},[e._v("新建")])],1)]),e._v(" "),a("el-card",{attrs:{shadow:"never"}},[a("table-list",{attrs:{options:e.options,columns:e.columns,dataSource:e.dataSource,dataTotal:e.dataTotal,pagination:e.paginationCfg,loading:e.loading},on:{handleChangePage:e.handleChangePage,handleChangeSize:e.handleChangeSize}},[a("el-table-column",e._b({attrs:{slot:"operation",label:"操作",align:"center"},slot:"operation",scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"operate-group"},[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.checkHandler(t.row,1)}}},[e._v(" 查看 ")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.checkHandler(t.row,2)}}},[e._v("\n                "+e._s(t.row.IsUsing?"禁用":"启用")+"\n              ")])],1)]}}])},"el-table-column",e.options&&e.options.props,!1))],1)],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(l,s,!1,function(e){a("jmnz")},"data-v-773c0b0e",null);t.default=c.exports},izrR:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(e){return{dropdown:{model:[{value:0,label:"全部"},{value:1,label:"上柴"},{value:2,label:"潍柴"},{value:3,label:"玉柴"},{value:4,label:"孚创柴"}],seriesList:[],strategyType:[{value:1,label:"备用机"},{value:2,label:"主用机"}],strategyState:[{value:0,label:"全部"},{value:2,label:"启用"},{value:1,label:"禁用"}]},table:{columns:[{label:"维保策略名称",prop:"StrategyName",minWidth:"15%"},{label:"发动机品牌",prop:"EngineBrandName",minWidth:"15%"},{label:"发动机系列",prop:"EngineSeriesName",minWidth:"15%"},{label:"策略主备分类",prop:"Type",minWidth:"15%",formatter:function(t,a,n){return t.Type?e.dropdown.strategyType.find(function(e){return e.value==t.Type}).label:""}},{label:"策略主备状态",prop:"IsUsing",minWidth:"15%",formatter:function(e,t,a){return e.IsUsing?"启用":"禁用"}},{label:"最后编辑人",prop:"UpDateUserName",minWidth:"15%"},{label:"最后编辑时间",prop:"UpDateTime",minWidth:"20%",formatter:function(t,a,n){return t.UpDateTime?e.$moment(t.UpDateTime).format("yyyy-MM-DD HH:mm:ss"):""}}],dataSource:[{name:"上柴E系列维保方案",brand:"上柴",model:"E",type:"备用机",state:"启用",lastEditor:"李娜",lastEditorTime:"2022-3-11",rawData:{ID:1,name:"上柴策略A",model:"上柴",series:"E",state:"启用",beatDuration:8,beatTotal:60,periodDuration:"8*60",periodTotal:4,duration:"8*60*4",type:"备用机",items:[{name:"维保事项名字",operatingTime:"120小时",absoluteTime:"5天",lastEditTime:"2022-3-15 11:12:18",username:"张三"}]}}]},editTable:{table_columns:[{prop:"ItemContent",label:"维保事项",width:"100"},{prop:"DefaultHourSetting",label:"运行时间",width:"100"},{prop:"DefaultDaySetting",label:"绝对时间",width:"100"}],dataArray:[]}}}},jmnz:function(e,t){}});
//# sourceMappingURL=38.16188beee2626fe5a1ac.js.map