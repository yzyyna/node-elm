{"version":3,"sources":["webpack:///src/views/settingManagement/advertisementApp/index.vue","webpack:///./src/views/settingManagement/advertisementApp/index.vue?f2fe","webpack:///./src/views/settingManagement/advertisementApp/index.vue"],"names":["advertisementApp","name","components","data","_this","this","dialogFormVisible","form","picType","picName","picSize","picFile","website","picMemo","formCurrentPicUrl","formCurrentPicId","formLabelWidth","picLimit","picSizeLimit","picSizeLimitText","picProportionLimit","picProportionLimitText","dialogImageUrl","dialogVisiblePic","dataSource","dataTotal","options","height","index","labelIndex","props","width","paginationCfg","currentPage","pageSize","layout","pageSizes","columns","label","prop","minWidth","formatter","row","column","render","h","params","picUrl","attrs","src","previewSrcList","ref","class","el-input__inner","style","background","picState","extends_default","value","picIndex","type","min","disabled","on","change","_","paramsApi","FormData","el","target","console","log","picTypeOpt","forEach","e","append","$api","setting","EditGensetProjectBanner","id","then","res","getTableData","key","isShow","columnsMapping","Title","Type","OrderBy","FileUrl","Website","Describe","IsPublish","OperUserName","OperTime","BannerId","activeName","$route","editType","picEdit","provide","computed","watch","nv","queryTableData","handleChangePage","ky","$refs","refUploadPics","uploadFiles","length","handlePicState","$route.name","handler","methods","setActionColumn","that","method","handleActions","_this2","publish","$createElement","$confirm","title","message","confirmButtonText","cancelButtonText","DeleteGensetProjectBanner","$message","catch","msg","_this3","PublishOrCancelGensetProjectBanner","handleNewJump","val","handleChangeSize","handlePictureCardPreview","file","url","handleRemove","uid","i","splice","error","onChangePic","fileList","_this4","Object","common","raw","flag","size","indexOf","warning","err","upload","addPicComponent","$children","$el","display","dialogFormSubmit","push","validateForm","editRecord","addRecord","warnMes","addPicHandler","_this5","query","Page","PageSize","mapping","Array","loading","$loading","lock","text","spinner","GetGensetProjectBannerManage","Data","obj","handlePicUrl","toString","lastEditTime","format","_e","IsUsing","close","_this6","AddGensetProjectBanner","_this7","beforeCreate","created","beforeMount","mounted","beforeUpdated","updated","beforeDestroy","destroyed","settingManagement_advertisementApp","_vm","_h","_c","_self","_v","model","callback","$$v","expression","staticClass","align","span","placeholder","_l","justify","click","operates","pagination","visible","close-on-click-modal","update:visible","$event","required","label-width","$set","fit","preview-src-list","fontSize","color","position","right","top","cursor","action","multiple","limit","auto-upload","list-type","on-change","accept","scopedSlots","_u","fn","alt","slot","fontWeight","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.a1ac49d2359a050afb1b.js","sourcesContent":["<template>\r\n  <div>\r\n    <BMainTopComponent />\r\n    <div id=\"advertisement-app\">\r\n      <el-tabs v-model=\"activeName\">\r\n        <el-tab-pane label=\"APP\" name=\"app\"></el-tab-pane>\r\n        <el-tab-pane label=\"小程序\" name=\"applet\"></el-tab-pane>\r\n      </el-tabs>\r\n      <el-row class=\"pic-type-select-container\" type=\"flex\" align=\"middle\">\r\n        <el-col :span=\"2\"> <div class=\"text\">图片类型：</div></el-col>\r\n        <el-col :span=\"5\">\r\n          <div class=\"pic-type-select\">\r\n            <el-select v-model=\"picType\" placeholder=\"请选择图片类型\">\r\n              <el-option\r\n                v-for=\"(e, i) in picTypeOpt\"\r\n                :label=\"e.label\"\r\n                :value=\"e.value\"\r\n                :key=\"i\"\r\n              ></el-option>\r\n            </el-select>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"17\">\r\n          <el-row type=\"flex\" justify=\"end\" align=\"middle\">\r\n            <div class=\"add-btn\">\r\n              <el-button type=\"primary\" @click=\"addPicHandler\" size=\"mini\">新增图片</el-button>\r\n            </div>\r\n          </el-row>\r\n        </el-col>\r\n      </el-row>\r\n      <TableList\r\n        :options=\"options\"\r\n        :columns=\"columns\"\r\n        :dataTotal=\"dataTotal\"\r\n        :dataSource=\"dataSource\"\r\n        :operates=\"setActionColumn(this)\"\r\n        :pagination=\"paginationCfg\"\r\n        @handleChangePage=\"handleChangePage\"\r\n        @handleChangeSize=\"handleChangeSize\"\r\n      />\r\n    </div>\r\n    <!-- edit form dialog -->\r\n    <el-dialog\r\n      :title=\"editType === 'edit' ? '编辑' : '新增'\"\r\n      width=\"30%\"\r\n      :visible.sync=\"dialogFormVisible\"\r\n      :close-on-click-modal=\"false\"\r\n    >\r\n      <el-form :model=\"form\" ref=\"refForm\">\r\n        <el-form-item required label=\"图片类型\" :label-width=\"formLabelWidth\">\r\n          <el-select :style=\"{ width: '100%' }\" v-model=\"form.picType\" placeholder=\"请选择图片类型\">\r\n            <el-option label=\"首页轮播图\" value=\"1\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item\r\n          v-model=\"form.picName\"\r\n          required\r\n          label=\"图片名称\"\r\n          :label-width=\"formLabelWidth\"\r\n        >\r\n          <el-input v-model=\"form.picName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item required v-if=\"picEdit\" label=\"上传图片\" :label-width=\"formLabelWidth\">\r\n          <el-image fit=\"contain\" :src=\"formCurrentPicUrl\" :preview-src-list=\"[formCurrentPicUrl]\">\r\n          </el-image>\r\n          <span\r\n            :style=\"{\r\n              fontSize: '1.2rem',\r\n              color: '#eee',\r\n              position: 'absolute',\r\n              right: '5px',\r\n              top: '0px',\r\n              cursor: 'pointer'\r\n            }\"\r\n            @click=\"handleRemove()\"\r\n          >\r\n            <i class=\"el-icon-delete\"></i>\r\n          </span>\r\n        </el-form-item>\r\n        <el-form-item required v-else label=\"上传图片\" :label-width=\"formLabelWidth\">\r\n          <el-upload\r\n            action=\"#\"\r\n            :multiple=\"true\"\r\n            :limit=\"picLimit\"\r\n            ref=\"refUploadPics\"\r\n            :auto-upload=\"false\"\r\n            list-type=\"picture-card\"\r\n            :on-change=\"onChangePic\"\r\n            accept=\".jpg, .jpeg, .png\"\r\n          >\r\n            <i slot=\"default\" class=\"el-icon-plus\"></i>\r\n            <div slot=\"file\" slot-scope=\"{ file }\">\r\n              <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\" alt=\"\" />\r\n              <span class=\"el-upload-list__item-actions\">\r\n                <!-- fullscreen -->\r\n                <span class=\"el-upload-list__item-preview\" @click=\"handlePictureCardPreview(file)\">\r\n                  <i class=\"el-icon-zoom-in\"></i>\r\n                </span>\r\n                <!-- delete -->\r\n                <span class=\"el-upload-list__item-delete\" @click=\"handleRemove(file)\">\r\n                  <i class=\"el-icon-delete\"></i>\r\n                </span>\r\n              </span>\r\n            </div>\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item label=\" \" :label-width=\"formLabelWidth\">\r\n          <div :style=\"{ color: 'red', fontSize: '.9rem', fontWeight: 'bold' }\">\r\n            请上传宽/高比例为2:1且小于5M的图片！\r\n          </div>\r\n        </el-form-item>\r\n        <!-- <el-form-item label=\"图片尺寸\" :label-width=\"formLabelWidth\">\r\n          <el-input disabled v-model=\"form.picSize\"></el-input>\r\n        </el-form-item> -->\r\n        <el-form-item label=\"URL\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form.website\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"备注\" :label-width=\"formLabelWidth\">\r\n          <el-input type=\"textarea\" v-model=\"form.picMemo\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogFormSubmit\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <!-- picture fullscreen dialog -->\r\n    <el-dialog :visible.sync=\"dialogVisiblePic\">\r\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { validatePicProportion } from '@/utils/common'\r\nimport { formatTime } from '@/utils/common'\r\n\r\nexport default {\r\n  name: 'AdvertisementApp',\r\n  components: {},\r\n  data() {\r\n    return {\r\n      // *** edit dialog\r\n      dialogFormVisible: false,\r\n      form: {\r\n        picType: '',\r\n        picName: '',\r\n        picSize: '',\r\n        picFile: '',\r\n        website: '',\r\n        picMemo: ''\r\n      },\r\n      formCurrentPicUrl: '',\r\n      formCurrentPicId: '',\r\n      formLabelWidth: '120px',\r\n      // *** upload pics\r\n      picLimit: 1,\r\n      picSizeLimit: 5 * 1024 * 1024,\r\n      picSizeLimitText: '5MB',\r\n      picProportionLimit: 2 / 1,\r\n      picProportionLimitText: '2:1',\r\n      dialogImageUrl: '',\r\n      dialogVisiblePic: false,\r\n      // *** table configurations\r\n      dataSource: [],\r\n      dataTotal: 0,\r\n      options: {\r\n        height: '100%',\r\n        index: true,\r\n        labelIndex: '序号',\r\n        props: {\r\n          width: 140\r\n        }\r\n      },\r\n      paginationCfg: {\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n        layout: 'total, sizes, prev, pager, next, jumper',\r\n        pageSizes: [10, 20, 30, 40]\r\n      },\r\n      data: [],\r\n      columns: [\r\n        {\r\n          label: '图片名称',\r\n          prop: 'picName',\r\n          minWidth: '15%'\r\n        },\r\n        {\r\n          label: '图片类型',\r\n          prop: 'picType',\r\n          minWidth: '15%',\r\n          formatter: (row, column, index) => {\r\n            return row.picType\r\n          }\r\n        },\r\n        {\r\n          label: '缩略图',\r\n          render: (h, params) => {\r\n            const picUrl = params.row.picUrl\r\n            return [\r\n              h('el-image', {\r\n                attrs: {\r\n                  src: picUrl,\r\n                  previewSrcList: [picUrl]\r\n                }\r\n              })\r\n            ]\r\n          },\r\n          minWidth: '10%'\r\n        },\r\n        {\r\n          label: '排序',\r\n          prop: 'picIndex',\r\n          minWidth: '15%',\r\n          render: (h, params) => {\r\n            return [\r\n              // h('div', {\r\n              //   domProps: {\r\n              //     innerHTML: params.row.picIndex\r\n              //   },\r\n              //   style: {\r\n              //     color: 'red'\r\n              //   }\r\n              // }),\r\n              h('input', {\r\n                ref: 'refInputNumber',\r\n                class: {\r\n                  'el-input__inner': true\r\n                },\r\n                style: {\r\n                  width: '60%',\r\n                  height: '30px',\r\n                  background: params.row.picState !== '禁用' ? 'gray' : ''\r\n                },\r\n                attrs: {\r\n                  value: params.row.picIndex,\r\n                  type: 'number',\r\n                  min: 0,\r\n                  ...params.row,\r\n                  disabled: params.row.picState !== '禁用'\r\n                },\r\n                on: {\r\n                  change: (_) => {\r\n                    const paramsApi = new FormData()\r\n                    const el = _.target\r\n                    const row = params.row\r\n                    console.log('change', row)\r\n                    this.picTypeOpt.forEach((e) => {\r\n                      if (e.label === row.picType) row.picType = e.value\r\n                    })\r\n                    paramsApi.append('OrderBy', el.value)\r\n                    paramsApi.append('Type', row.picType)\r\n                    paramsApi.append('Title', row.picName)\r\n                    paramsApi.append('Describe', row.picMemo)\r\n                    paramsApi.append('Website', row.website)\r\n                    this.$api.setting\r\n                      .EditGensetProjectBanner(paramsApi, { id: params.row.id })\r\n                      .then((res) => {\r\n                        this.getTableData()\r\n                      })\r\n                  }\r\n                },\r\n                key: params.row.id\r\n              })\r\n            ]\r\n          }\r\n        },\r\n        {\r\n          label: 'URL',\r\n          prop: 'website',\r\n          minWidth: '15%'\r\n        },\r\n        {\r\n          label: '备注',\r\n          prop: 'picMemo',\r\n          minWidth: '15%'\r\n        },\r\n        {\r\n          label: '状态',\r\n          prop: 'picState',\r\n          minWidth: '15%'\r\n        },\r\n        {\r\n          label: '操作人',\r\n          prop: 'operator',\r\n          minWidth: '15%'\r\n        },\r\n        {\r\n          label: '最后修改时间',\r\n          prop: 'lastEditTime',\r\n          minWidth: '15%'\r\n        },\r\n        {\r\n          label: 'id',\r\n          prop: 'id',\r\n          minWidth: '15%',\r\n          isShow: (_) => false\r\n        }\r\n      ],\r\n      columnsMapping: {\r\n        Title: 'picName',\r\n        Type: 'picType',\r\n        OrderBy: 'picIndex',\r\n        FileUrl: 'picUrl',\r\n        Website: 'website',\r\n        Describe: 'picMemo',\r\n        IsPublish: 'picState',\r\n        OperUserName: 'operator',\r\n        OperTime: 'lastEditTime',\r\n        BannerId: 'id'\r\n      },\r\n      // current tab:app|applet\r\n      activeName: this.$route.name === 'Advertisement-app' ? 'app' : 'applet',\r\n      // pic type\r\n      picType: 0,\r\n      // pic type options\r\n      picTypeOpt: [\r\n        {\r\n          value: -1,\r\n          label: '全部'\r\n        },\r\n        {\r\n          value: 0,\r\n          label: '首页轮播图'\r\n        }\r\n      ],\r\n      // edit type\r\n      editType: 'edit',\r\n      // pic edit or add\r\n      picEdit: true\r\n    }\r\n  },\r\n  // props:[''],\r\n  // inject:[''],\r\n  provide() {\r\n    return {}\r\n  },\r\n  computed: {},\r\n  watch: {\r\n    activeName(nv) {\r\n      this.queryTableData()\r\n      // back to first page\r\n      this.handleChangePage(1)\r\n    },\r\n    dialogFormVisible(nv) {\r\n      if (!nv) {\r\n        for (const ky in this.form) {\r\n          this.form[ky] = ''\r\n        }\r\n        !!this.$refs.refUploadPics &&\r\n          !!this.$refs.refUploadPics.uploadFiles &&\r\n          (this.$refs.refUploadPics.uploadFiles.length = 0)\r\n        this.handlePicState()\r\n        this.getTableData()\r\n      }\r\n    },\r\n    '$route.name': {\r\n      handler: function (nv) {\r\n        this.activeName = nv === 'Advertisement-app' ? 'app' : 'applet'\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // *** table configurations\r\n    setActionColumn: (that) => [\r\n      {\r\n        label: '禁用',\r\n        isShow: (row) => {\r\n          return row.picState === '使用中'\r\n        },\r\n        method: (row) => {\r\n          that.handleActions(0, row)\r\n        }\r\n      },\r\n      {\r\n        label: '启用',\r\n        isShow: (row) => {\r\n          return row.picState === '禁用'\r\n        },\r\n        method: (row) => {\r\n          that.handleActions(1, row)\r\n        }\r\n      },\r\n      {\r\n        label: '编辑',\r\n        isShow: (row) => {\r\n          return row.picState === '禁用'\r\n        },\r\n        method: (row) => {\r\n          that.handleActions(2, row)\r\n        }\r\n      },\r\n      {\r\n        label: '删除',\r\n        disabled: (row) => {\r\n          return row.picState === '使用中'\r\n        },\r\n        method: (row) => {\r\n          that.handleActions(3, row)\r\n        }\r\n      }\r\n    ],\r\n    handleActions(type, row) {\r\n      switch (type) {\r\n        // disable\r\n        case 0:\r\n          this.publish(row.id, '禁用')\r\n          break\r\n        // enable\r\n        case 1:\r\n          this.publish(row.id, '使用中')\r\n          break\r\n        // edit\r\n        case 2:\r\n          this.dialogFormVisible = true\r\n          this.editType = 'edit'\r\n          this.picEdit = true\r\n          this.formCurrentPicUrl = row.picUrl\r\n          this.formCurrentPicId = row.id\r\n\r\n          for (const ky in this.form) {\r\n            this.form[ky] = row[ky]\r\n          }\r\n          break\r\n        // delete\r\n        default:\r\n          const h = this.$createElement\r\n          this.$confirm('删除提示', {\r\n            title: '删除提示',\r\n            message: h('div', [\r\n              h('p', '此操作将导致数据无法恢复，请谨慎操作!'),\r\n              h('p', '是否确定删除数据?')\r\n            ]),\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          })\r\n            .then(() => {\r\n              this.$api.setting.DeleteGensetProjectBanner({}, { id: row.id }).then((res) => {\r\n                this.$message({\r\n                  type: 'success',\r\n                  message: '删除成功!'\r\n                })\r\n                this.getTableData()\r\n              })\r\n            })\r\n            .catch(() => {\r\n              this.$message({\r\n                type: 'info',\r\n                message: '已取消删除'\r\n              })\r\n            })\r\n          break\r\n      }\r\n    },\r\n    publish(id, msg) {\r\n      this.$confirm(`是否确定${msg}?`).then((_) => {\r\n        this.$api.setting\r\n          .PublishOrCancelGensetProjectBanner({ id: id })\r\n          .then((_) => {\r\n            this.$message({\r\n              type: 'success',\r\n              message: `${msg}成功!`\r\n            })\r\n            this.getTableData()\r\n          })\r\n          .catch(() => {\r\n            this.$message({\r\n              type: 'info',\r\n              message: '已取消'\r\n            })\r\n          })\r\n      })\r\n    },\r\n    queryTableData() {\r\n      this.getTableData()\r\n    },\r\n    handleNewJump(row) {},\r\n    handleChangePage(val) {\r\n      this.paginationCfg.currentPage = val\r\n      this.queryTableData()\r\n    },\r\n    handleChangeSize(val) {\r\n      this.paginationCfg.currentPage = 1\r\n      this.paginationCfg.pageSize = val\r\n      this.queryTableData()\r\n    },\r\n    // *** upload pics\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url\r\n      this.dialogVisiblePic = true\r\n    },\r\n    handleRemove(file) {\r\n      if (!!file) {\r\n        const uid = file.uid\r\n        const upload = this.$refs.refUploadPics\r\n        const uploadFiles = upload.uploadFiles\r\n        try {\r\n          uploadFiles.forEach((e, i) => {\r\n            if (e.uid === uid) uploadFiles.splice(i, 1)\r\n          })\r\n          this.handlePicState()\r\n        } catch (error) {\r\n          this.$message({\r\n            type: 'error',\r\n            message: '删除失败！'\r\n          })\r\n          console.error(error)\r\n        }\r\n      } else {\r\n        this.formCurrentPicUrl = ''\r\n        this.formCurrentPicId = ''\r\n        this.picEdit = false\r\n      }\r\n    },\r\n    onChangePic(file, fileList) {\r\n      validatePicProportion(file.raw, 2)\r\n        .then((res) => {\r\n          let flag = true\r\n          let message = ''\r\n          if (res) {\r\n            const isLt5M = file.size > this.picSizeLimit\r\n            if (isLt5M) {\r\n              flag = false\r\n              message = `上传图片大小不能超过${this.picSizeLimitText}!`\r\n            }\r\n          } else {\r\n            flag = false\r\n            message = `上传的图片宽/高比例必须为${this.picProportionLimitText}！`\r\n          }\r\n          if (flag) {\r\n            this.handlePicState()\r\n          } else {\r\n            fileList.splice(fileList.indexOf(file), 1)\r\n            this.$message.warning(message)\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.error(err)\r\n        })\r\n    },\r\n    handlePicState() {\r\n      const upload = this.$refs.refUploadPics\r\n      const addPicComponent =\r\n        !!upload.$children && upload.$children.length > 1 && upload.$children[1]\r\n      !addPicComponent ||\r\n        (!!addPicComponent.$el.style.display\r\n          ? (addPicComponent.$el.style.display = '')\r\n          : (addPicComponent.$el.style.display = 'none'))\r\n    },\r\n    // edit form submit\r\n    dialogFormSubmit() {\r\n      const upload = this.$refs.refUploadPics || { uploadFiles: null }\r\n      const uploadFiles = (!!upload.uploadFiles && upload.uploadFiles) || []\r\n      if (uploadFiles.length > 0) {\r\n        const picFile = []\r\n        uploadFiles.forEach((e) => {\r\n          picFile.push(e.raw)\r\n        })\r\n        this.form.picFile = picFile\r\n      }\r\n      const res = this.validateForm()\r\n      if (res) {\r\n        if (this.editType === 'edit') this.editRecord()\r\n        else this.addRecord()\r\n      }\r\n    },\r\n    validateForm() {\r\n      let warnMes = ''\r\n      const form = this.form\r\n      if (!form.picType) {\r\n        warnMes = '请选择图片类型！'\r\n      } else if (!form.picName) {\r\n        warnMes = '请填写图片名称！'\r\n      } else if (!form.picFile && !this.picEdit) {\r\n        warnMes = '请上传图片！'\r\n      } else {\r\n        return true\r\n      }\r\n      this.$message.warning(warnMes)\r\n      return false\r\n    },\r\n    // add pic button\r\n    addPicHandler() {\r\n      this.dialogFormVisible = true\r\n      this.editType = 'add'\r\n      this.picEdit = false\r\n      this.formCurrentPicUrl = ''\r\n      this.formCurrentPicId = ''\r\n    },\r\n    getTableData() {\r\n      const params = {\r\n        Type: this.picType\r\n      }\r\n      const query = {\r\n        Page: this.paginationCfg.currentPage,\r\n        PageSize: this.paginationCfg.pageSize\r\n      }\r\n      const mapping = this.columnsMapping\r\n      const dataSource = new Array()\r\n      const loading = this.$loading({\r\n        lock: true,\r\n        text: '数据加载中，请稍后...',\r\n        spinner: 'el-icon-loading',\r\n        background: 'rgba(0, 0, 0, 0.7)'\r\n      })\r\n      this.$api.setting\r\n        .GetGensetProjectBannerManage(params, query)\r\n        .then((res) => {\r\n          const dataArr = (!!res.Data && !!res.Data.Data && res.Data.Data) || []\r\n          dataArr.forEach((e) => {\r\n            const obj = new Object()\r\n            for (const ky in e) {\r\n              e[ky] !== 'null' || (e[ky] = '')\r\n              obj[mapping[ky]] = e[ky]\r\n            }\r\n            obj.picUrl = this.handlePicUrl(obj.picUrl)\r\n            obj.picState = obj.picState ? '使用中' : '禁用'\r\n            // 0 => null\r\n            obj.picIndex = obj.picIndex.toString()\r\n            obj.lastEditTime = formatTime(obj.lastEditTime).format('yyyy-MM-DD HH:mm:ss')\r\n            for (let i in this.picTypeOpt) {\r\n              const e = this.picTypeOpt[i]\r\n              if (e.value === obj.picType) {\r\n                obj.picType = e.label\r\n              }\r\n            }\r\n            if (e.IsUsing) dataSource.push(obj)\r\n          })\r\n          this.dataSource = dataSource\r\n          loading.close()\r\n        })\r\n        .catch((error) => {\r\n          loading.close()\r\n        })\r\n    },\r\n    addRecord() {\r\n      const form = this.form\r\n      const params = new FormData()\r\n      params.append('Type', this.picType)\r\n      params.append('Title', form.picName)\r\n      params.append('Describe', form.picMemo)\r\n      params.append('Website', form.website)\r\n      params.append('FileUrl', form.picFile[0])\r\n      this.$api.setting.AddGensetProjectBanner(params).then((res) => {\r\n        this.dialogFormVisible = false\r\n        this.formCurrentPicUrl = ''\r\n        this.formCurrentPicId = ''\r\n        this.picEdit = false\r\n      })\r\n    },\r\n    editRecord(id) {\r\n      const form = this.form\r\n      const params = new FormData()\r\n      params.append('Type', this.picType)\r\n      params.append('Title', form.picName)\r\n      params.append('Describe', form.picMemo)\r\n      params.append('Website', form.website)\r\n      params.append('FileUrl', (form.picFile && form.picFile.length > 0 && form.picFile[0]) || '')\r\n      this.$api.setting\r\n        .EditGensetProjectBanner(params, { id: this.formCurrentPicId })\r\n        .then((res) => {\r\n          this.dialogFormVisible = false\r\n        })\r\n    },\r\n    handlePicUrl(url) {\r\n      const res = `${process.env.BASE_API}/${url}`\r\n      return res\r\n    }\r\n  },\r\n  beforeCreate() {},\r\n  created() {},\r\n  beforeMount() {},\r\n  mounted() {\r\n    this.queryTableData()\r\n  },\r\n  beforeUpdated() {},\r\n  updated() {},\r\n  beforeDestroy() {},\r\n  destroyed() {}\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n/deep/ .el-upload--picture-card {\r\n  background-color: transparent;\r\n}\r\n/deep/ .el-upload-list--picture-card .el-upload-list__item {\r\n  width: 300px;\r\n  height: 150px;\r\n  background-color: transparent;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/settingManagement/advertisementApp/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('BMainTopComponent'),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"advertisement-app\"}},[_c('el-tabs',{model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"APP\",\"name\":\"app\"}}),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"小程序\",\"name\":\"applet\"}})],1),_vm._v(\" \"),_c('el-row',{staticClass:\"pic-type-select-container\",attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":2}},[_c('div',{staticClass:\"text\"},[_vm._v(\"图片类型：\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":5}},[_c('div',{staticClass:\"pic-type-select\"},[_c('el-select',{attrs:{\"placeholder\":\"请选择图片类型\"},model:{value:(_vm.picType),callback:function ($$v) {_vm.picType=$$v},expression:\"picType\"}},_vm._l((_vm.picTypeOpt),function(e,i){return _c('el-option',{key:i,attrs:{\"label\":e.label,\"value\":e.value}})}),1)],1)]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":17}},[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"end\",\"align\":\"middle\"}},[_c('div',{staticClass:\"add-btn\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.addPicHandler}},[_vm._v(\"新增图片\")])],1)])],1)],1),_vm._v(\" \"),_c('TableList',{attrs:{\"options\":_vm.options,\"columns\":_vm.columns,\"dataTotal\":_vm.dataTotal,\"dataSource\":_vm.dataSource,\"operates\":_vm.setActionColumn(this),\"pagination\":_vm.paginationCfg},on:{\"handleChangePage\":_vm.handleChangePage,\"handleChangeSize\":_vm.handleChangeSize}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.editType === 'edit' ? '编辑' : '新增',\"width\":\"30%\",\"visible\":_vm.dialogFormVisible,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"refForm\",attrs:{\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"required\":\"\",\"label\":\"图片类型\",\"label-width\":_vm.formLabelWidth}},[_c('el-select',{style:({ width: '100%' }),attrs:{\"placeholder\":\"请选择图片类型\"},model:{value:(_vm.form.picType),callback:function ($$v) {_vm.$set(_vm.form, \"picType\", $$v)},expression:\"form.picType\"}},[_c('el-option',{attrs:{\"label\":\"首页轮播图\",\"value\":\"1\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"required\":\"\",\"label\":\"图片名称\",\"label-width\":_vm.formLabelWidth},model:{value:(_vm.form.picName),callback:function ($$v) {_vm.$set(_vm.form, \"picName\", $$v)},expression:\"form.picName\"}},[_c('el-input',{model:{value:(_vm.form.picName),callback:function ($$v) {_vm.$set(_vm.form, \"picName\", $$v)},expression:\"form.picName\"}})],1),_vm._v(\" \"),(_vm.picEdit)?_c('el-form-item',{attrs:{\"required\":\"\",\"label\":\"上传图片\",\"label-width\":_vm.formLabelWidth}},[_c('el-image',{attrs:{\"fit\":\"contain\",\"src\":_vm.formCurrentPicUrl,\"preview-src-list\":[_vm.formCurrentPicUrl]}}),_vm._v(\" \"),_c('span',{style:({\n            fontSize: '1.2rem',\n            color: '#eee',\n            position: 'absolute',\n            right: '5px',\n            top: '0px',\n            cursor: 'pointer'\n          }),on:{\"click\":function($event){return _vm.handleRemove()}}},[_c('i',{staticClass:\"el-icon-delete\"})])],1):_c('el-form-item',{attrs:{\"required\":\"\",\"label\":\"上传图片\",\"label-width\":_vm.formLabelWidth}},[_c('el-upload',{ref:\"refUploadPics\",attrs:{\"action\":\"#\",\"multiple\":true,\"limit\":_vm.picLimit,\"auto-upload\":false,\"list-type\":\"picture-card\",\"on-change\":_vm.onChangePic,\"accept\":\".jpg, .jpeg, .png\"},scopedSlots:_vm._u([{key:\"file\",fn:function(ref){\n          var file = ref.file;\nreturn _c('div',{},[_c('img',{staticClass:\"el-upload-list__item-thumbnail\",attrs:{\"src\":file.url,\"alt\":\"\"}}),_vm._v(\" \"),_c('span',{staticClass:\"el-upload-list__item-actions\"},[_c('span',{staticClass:\"el-upload-list__item-preview\",on:{\"click\":function($event){return _vm.handlePictureCardPreview(file)}}},[_c('i',{staticClass:\"el-icon-zoom-in\"})]),_vm._v(\" \"),_c('span',{staticClass:\"el-upload-list__item-delete\",on:{\"click\":function($event){return _vm.handleRemove(file)}}},[_c('i',{staticClass:\"el-icon-delete\"})])])])}}])},[_c('i',{staticClass:\"el-icon-plus\",attrs:{\"slot\":\"default\"},slot:\"default\"})])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\" \",\"label-width\":_vm.formLabelWidth}},[_c('div',{style:({ color: 'red', fontSize: '.9rem', fontWeight: 'bold' })},[_vm._v(\"\\n          请上传宽/高比例为2:1且小于5M的图片！\\n        \")])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"URL\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{model:{value:(_vm.form.website),callback:function ($$v) {_vm.$set(_vm.form, \"website\", $$v)},expression:\"form.website\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"备注\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.picMemo),callback:function ($$v) {_vm.$set(_vm.form, \"picMemo\", $$v)},expression:\"form.picMemo\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.dialogFormSubmit}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisiblePic},on:{\"update:visible\":function($event){_vm.dialogVisiblePic=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-57c91f31\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/settingManagement/advertisementApp/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-57c91f31\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-57c91f31\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-57c91f31\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/settingManagement/advertisementApp/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}